{"version":3,"sources":["webpack:///./src/components/NotificationCenter.vue?8a25","webpack:///src/components/NotificationCenter.vue","webpack:///./src/components/NotificationCenter.vue?2975","webpack:///./src/components/NotificationCenter.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","$vuetify","breakpoint","attrs","card","dark","color","icon","on","click","closeDialog","_v","_e","dense","notifications","length","_l","notification","key","notificationId","$event","notificationClicked","_s","message","staticClass","createdDateTime","fromNow","xsOnly","totalCount","row","class","mr-1","block","disabled","clearNotification","ml-1","flat","loading","moreNotification","staticRenderFns","NotificationCentervue_type_script_lang_js_","name","props","[object Object]","methods","item","$axios","delete","headers","silent","then","response","$store","dispatch","catch","error","console","log","href","$router","push","$emit","get","params","dateTimeBefore","$moment","format","data","text","put","computed","getters","map","x","_objectSpread","components_NotificationCentervue_type_script_lang_js_","component","Object","componentNormalizer","__webpack_exports__"],"mappings":"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","file":"js/chunk-2d21d54d.fcee5465.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-card',[(_vm.$vuetify.breakpoint.xsOnly)?_c('v-toolbar',{attrs:{\"card\":\"\",\"dark\":\"\",\"color\":\"primary\"}},[_c('v-btn',{attrs:{\"icon\":\"\",\"dark\":\"\"},on:{\"click\":_vm.closeDialog}},[_c('v-icon',[_vm._v(\"close\")])],1),_c('v-toolbar-title',[_vm._v(\"알림내역\")]),_c('v-spacer')],1):_vm._e(),_c('v-list',{attrs:{\"dense\":\"\"}},[(_vm.notifications.length > 0)?[_vm._l((_vm.notifications),function(notification){return _c('v-list-tile',{key:notification.notificationId,on:{\"click\":function($event){return _vm.notificationClicked(notification)}}},[_c('v-list-tile-title',[_vm._v(_vm._s(notification.message))]),_c('div',{staticClass:\"nowrap\"},[_c('v-list-tile-sub-title',[_vm._v(_vm._s(notification.createdDateTime.fromNow()))])],1)],1)}),(_vm.$vuetify.breakpoint.xsOnly || _vm.notifications.length < _vm.notifications[0].totalCount)?_c('v-list-tile',[_c('v-layout',{attrs:{\"row\":\"\"}},[(_vm.$vuetify.breakpoint.xsOnly)?_c('v-btn',{class:{'mr-1':_vm.notifications.length < _vm.notifications[0].totalCount},attrs:{\"block\":\"\",\"disabled\":_vm.notifications.length === 0},on:{\"click\":_vm.clearNotification}},[_vm._v(\"모두 삭제\")]):_vm._e(),(_vm.notifications.length < _vm.notifications[0].totalCount)?_c('v-btn',{class:{'ml-1':_vm.$vuetify.breakpoint.xsOnly},attrs:{\"block\":\"\",\"flat\":\"\",\"loading\":_vm.loading},on:{\"click\":_vm.moreNotification}},[_vm._v(\"더보기\")]):_vm._e()],1)],1):_vm._e()]:_c('v-list-tile',[_c('v-list-tile-title',[_vm._v(\"새로운 알림이 없습니다.\")])],1)],2),(_vm.$vuetify.breakpoint.smAndUp)?[_c('v-divider'),_c('v-card-actions',[_c('v-btn',{attrs:{\"disabled\":_vm.notifications.length === 0},on:{\"click\":_vm.clearNotification}},[_vm._v(\"모두 삭제\")]),_c('v-spacer'),_c('v-btn',{attrs:{\"flat\":\"\",\"color\":\"primary\"},on:{\"click\":_vm.closeDialog}},[_vm._v(\"닫기\")])],1)]:_vm._e()],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <v-card>\n    <v-toolbar card dark color=\"primary\" v-if=\"$vuetify.breakpoint.xsOnly\">\n      <v-btn icon dark @click=\"closeDialog\">\n        <v-icon>close</v-icon>\n      </v-btn>\n      <v-toolbar-title>알림내역</v-toolbar-title>\n      <v-spacer></v-spacer>\n    </v-toolbar>\n    <v-list dense>\n      <template v-if=\"notifications.length > 0\">\n        <v-list-tile v-for=\"notification in notifications\" :key=\"notification.notificationId\" @click=\"notificationClicked(notification)\">\n          <v-list-tile-title>{{notification.message}}</v-list-tile-title>\n          <div class=\"nowrap\">\n            <v-list-tile-sub-title>{{notification.createdDateTime.fromNow()}}</v-list-tile-sub-title>\n          </div>\n        </v-list-tile>\n        <v-list-tile v-if=\"$vuetify.breakpoint.xsOnly || notifications.length < notifications[0].totalCount\">\n          <v-layout row>\n            <v-btn block :disabled=\"notifications.length === 0\" v-if=\"$vuetify.breakpoint.xsOnly\" @click=\"clearNotification\" :class=\"{'mr-1':notifications.length < notifications[0].totalCount}\">모두 삭제</v-btn>\n            <v-btn block flat :loading=\"loading\" @click=\"moreNotification\" v-if=\"notifications.length < notifications[0].totalCount\" :class=\"{'ml-1':$vuetify.breakpoint.xsOnly}\">더보기</v-btn>\n          </v-layout>\n        </v-list-tile>\n      </template>\n      <v-list-tile v-else>\n        <v-list-tile-title>새로운 알림이 없습니다.</v-list-tile-title>\n      </v-list-tile>\n    </v-list>\n    <template v-if=\"$vuetify.breakpoint.smAndUp\">\n      <v-divider/>\n      <v-card-actions>\n        <v-btn :disabled=\"notifications.length === 0\" @click=\"clearNotification\">모두 삭제</v-btn>\n        <v-spacer></v-spacer>\n        <v-btn flat color=\"primary\" @click=\"closeDialog\">닫기</v-btn>\n      </v-card-actions>\n    </template>\n  </v-card>\n</template>\n<script>\nexport default {\n  name: 'NotificationCenter',\n  props: ['dialog'],\n  data () {\n    return {\n      loading: false\n    };\n  },\n  methods: {\n    notificationClicked (item) {\n      this.$axios\n        .delete('/notification/' + item.notificationId, { headers: { silent: true } })\n        .then(response => {\n          this.$store.dispatch('markNotification', item.notificationId);\n        })\n        .catch(error => {\n          console.log(error);\n        });\n      if (item.href) {\n        this.$router.push(item.href);\n      }\n      this.$emit('closeDialog', null);\n    },\n    moreNotification () {\n      this.loading = true;\n      this.$axios\n        .get('/notification', { params: { dateTimeBefore: this.$moment(this.notifications[this.notifications.length - 1].createdDateTime).format('YMMDDHHmmss') }, headers: { silent: true } })\n        .then(response => {\n          this.loading = false;\n          this.$store.dispatch('addNotifications', response.data);\n        })\n        .catch(error => {\n          this.loading = false;\n          this.$store.dispatch('showSnackbar', { text: `${error.response ? error.response.data.message : '새로운 알림을 불러오지 못했습니다.'}`, color: 'error' });\n        });\n    },\n    closeDialog () {\n      this.$emit('closeDialog', null);\n    },\n    clearNotification () {\n      this.$axios\n        .put('/notification', { clearNotification: true })\n        .then(response => {\n          this.$store.dispatch('setNotifications', []);\n          this.$emit('closeDialog', null);\n        })\n        .catch(error => {\n          this.$store.dispatch('showSnackbar', { text: `${error.response ? error.response.data.message : '알림을 읽음 표시하지 못했습니다.'}`, color: 'error' });\n        });\n    }\n  },\n  computed: {\n    notifications () {\n      return this.$store.getters.notifications.map(x => ({ ...x, createdDateTime: this.$moment(x.createdDateTime, 'YYYYMMDDHHmmss') }));\n    }\n  }\n};\n</script>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/@vue/cli-plugin-babel/node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./NotificationCenter.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/@vue/cli-plugin-babel/node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./NotificationCenter.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./NotificationCenter.vue?vue&type=template&id=02280020&\"\nimport script from \"./NotificationCenter.vue?vue&type=script&lang=js&\"\nexport * from \"./NotificationCenter.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}
(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-01798c39","chunk-2d22db79"],{"113b":function(t,e,o){"use strict";o.r(e);var r=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("v-card",{attrs:{flat:""}},[o("v-card-title",{attrs:{"primary-title":""}},[o("v-layout",{attrs:{column:""}},[o("v-layout",{attrs:{row:"",wrap:""}},[t.lounges.length>0?o("v-flex",{class:{"mt-5":t.$vuetify.breakpoint.xsOnly,"pr-2":t.$vuetify.breakpoint.mdAndUp,"ml-auto":!0},attrs:{xs12:"",sm6:"",lg5:""}},[o("v-layout",{staticClass:"titleRow",attrs:{row:""}},[o("span",{staticClass:"title"},[t._v("라운지")])]),o("span",{staticClass:"ellipsis subtitle"},[t._v("신고로 인해 쓰기/읽기가 제한된 라운지만 보여집니다.")]),o("v-divider",{staticClass:"my-3"}),o("v-list",{attrs:{dense:""}},t._l(t.lounges,function(e){return o("v-list-tile",{key:e.boardId},[o("v-layout",{attrs:{row:""}},[o("v-flex",{staticClass:"ellipsis"},[o("div",{staticClass:"vertical-center ellipsis"},[t._v("\n                    "+t._s(e.boardName)+"\n                    "),e.isOwner?o("v-icon",{attrs:{title:"라운지지기"}},[t._v("person")]):t._e()],1)]),o("v-spacer"),e.writeRestrictDate?o("v-tooltip",{attrs:{bottom:""}},[o("v-chip",{attrs:{slot:"activator",color:"red","text-color":"white",small:""},slot:"activator"},[t._v("쓰기제한")]),o("span",[t._v(t._s(t.$moment(e.writeRestrictDate,"YYYYMMDD").format("Y년 M월 D일까지")))])],1):t._e(),e.readRestrictDate?o("v-tooltip",{attrs:{bottom:""}},[o("v-chip",{attrs:{slot:"activator",color:"red","text-color":"white",small:""},slot:"activator"},[t._v("읽기제한")]),o("span",[t._v(t._s(t.$moment(e.readRestrictDate,"YYYYMMDD").format("Y년 M월 D일까지")))])],1):t._e()],1)],1)}),1)],1):t._e(),o("v-flex",{class:{"pl-2":t.$vuetify.breakpoint.mdAndUp,"mr-auto":!0,"ml-auto":0===t.lounges.length},attrs:{xs12:"",sm6:t.lounges.length>0,sm9:0===t.lounges.length,lg5:t.lounges.length>0,lg8:0===t.lounges.length}},[o("v-layout",{class:{titleRow:!0,"mb-2":0===t.lounges.length},attrs:{row:""}},[o("span",{class:{title:t.lounges.length>0,headline:0===t.lounges.length}},[t._v("토픽")]),o("v-spacer"),o("v-btn",{class:{"my-0":!0,"ml-0":!0,"mr-0":t.$vuetify.breakpoint.xsOnly},attrs:{id:"createTopic",small:"",color:"accent",title:"새로운 토픽을 만들 수 있습니다."},on:{click:function(e){return t.openDialog(null)}}},[t._v("토픽만들기")]),o("br")],1),o("span",{staticClass:"ellipsis subtitle"},[t._v("드래그하여 순서를 변경할 수 있습니다.")]),o("v-divider",{staticClass:"my-3"}),t.topics.length>0?o("draggable",{attrs:{options:{handle:".cursor-move"}},model:{value:t.topics,callback:function(e){t.topics=e},expression:"topics"}},[o("transition-group",t._l(t.topics,function(e,r){return o("v-layout",{key:e.boardId,staticClass:"align-center",attrs:{row:""}},[o("v-flex",{staticClass:"cursor-move ellipsis align-center"},[o("div",{staticClass:"cursor-move align-center ellipsis"},[t._v("\n                    "+t._s(e.boardName)+"\n                    "),e.isOwner?o("v-icon",{staticClass:"vertical-align-middle",attrs:{title:"토픽지기"}},[t._v("person")]):t._e()],1)]),o("v-spacer"),e.readRestrictDate||e.writeRestrictDate?[e.writeRestrictDate?o("v-tooltip",{attrs:{bottom:""}},[o("v-chip",{staticClass:"cursor-move",attrs:{slot:"activator",color:"red","text-color":"white",small:""},slot:"activator"},[t._v("쓰기제한")]),o("span",[t._v(t._s(t.$moment(e.writeRestrictDate,"YYYYMMDD").format("Y년 M월 D일까지")))])],1):t._e(),e.readRestrictDate?o("v-tooltip",{attrs:{bottom:""}},[o("v-chip",{staticClass:"cursor-move",attrs:{slot:"activator",color:"red","text-color":"white",small:""},slot:"activator"},[t._v("읽기제한")]),o("span",[t._v(t._s(t.$moment(e.readRestrictDate,"YYYYMMDD").format("Y년 M월 D일까지")))])],1):t._e()]:[e.isOwner?o("v-btn",{staticClass:"mx-0",attrs:{flat:"",primary:"",small:"",title:"내가 토픽지기인 토픽은 구독해제할 수 없습니다."},nativeOn:{click:function(o){return o.preventDefault(),o.stopPropagation(),t.openDialog(e)}}},[t._v("토픽관리")]):o("v-btn",{staticClass:"mx-0",attrs:{flat:"",primary:"",small:""},nativeOn:{click:function(e){return e.preventDefault(),e.stopPropagation(),t.removeItem(r)}}},[t._v("구독해제")])]],2)}),1)],1):o("v-layout",[o("span",[t._v("아직 구독하고 있는 토픽이 없네요.\n              "),o("br"),o("router-link",{staticClass:"primary--text",attrs:{to:"/searchBoard"}},[t._v("새로운 토픽")]),t._v("을 구독해보세요!\n            ")],1)])],1)],1)],1),o("v-dialog",{attrs:{id:"topicCreatorDialog",fullscreen:t.$vuetify.breakpoint.xsOnly,transition:t.$vuetify.breakpoint.xsOnly?"dialog-bottom-transition":"fade-transition",lazy:"",scrollable:"","max-width":"700px"},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[o("topic-creator",{attrs:{board:t.editItem},on:{closeDialog:t.closeDialog,resetBoard:t.resetBoard}})],1)],1),o("v-card-actions",{attrs:{"pa-3":""}},[o("v-layout",{attrs:{row:t.$vuetify.breakpoint.smAndUp,column:t.$vuetify.breakpoint.xsOnly,wrap:"","text-xs-right":""}},[o("v-btn",{staticClass:"mt-2",attrs:{flat:"",block:t.$vuetify.breakpoint.xsOnly},on:{click:t.reset}},[t._v("초기화")]),o("v-spacer"),o("v-btn",{staticClass:"mt-2",attrs:{color:"primary",loading:t.loading,block:t.$vuetify.breakpoint.xsOnly},on:{click:t.save}},[t._v("저장")])],1)],1)],1)},n=[],i=o("1516"),a=o.n(i),s=o("f94d"),l={name:"MyBoard",components:{draggable:a.a,TopicCreator:s["default"]},data:function(){return{loading:!1,dialog:!1,topics:[],editItem:{}}},methods:{reset:function(){this.topics=JSON.parse(JSON.stringify(this.originalTopics))},isDirty:function(){if(this.topics.length!==this.originalTopics.length)return!0;var t=0;while(t<this.topics.length){if(this.topics[t].boardId!==this.originalTopics[t].boardId)return!0;t++}return!1},save:function(){var t=this;this.isDirty()?(this.loading=!0,this.$axios.put("/user/board",{boards:this.topics.map(function(t,e){return{orderNumber:e+1,boardId:t.boardId}})}).then(function(e){t.loading=!1,t.$store.dispatch("setUserBoards",JSON.parse(JSON.stringify(t.topics)).concat(t.userBoards.filter(function(t){return"T"!==t.boardType}))),t.$store.dispatch("showSnackbar",{text:"변경 내용을 반영하였습니다.",color:"success"})}).catch(function(e){console.log(e),t.loading=!1,t.$store.dispatch("showSnackbar",{text:e.response?e.response.data.message||"변경 내용을 반영하지 못했습니다.":"변경내용을 반영하지 못했습니다.",color:"error"})})):this.$store.dispatch("showSnackbar",{text:"변경된 내용이 없습니다.",color:"info"})},removeItem:function(t){var e=this,o=this.topics[t];o&&this.$axios.delete("/user/board/"+o.boardId).then(function(r){e.$store.dispatch("removeUserBoard",o.boardId),e.topics.splice(t,1),e.$store.dispatch("showSnackbar",{text:"토픽을 구독 해제하였습니다.",color:"success"})}).catch(function(t){console.log(t.response),e.$store.dispatch("showSnackbar",{text:t.response&&t.response.data.message||"토픽을 구독 해제하지 못했습니다.",color:"error"})})},openDialog:function(t){var e=this;if(null===t){if("A"!==this.$store.getters.profile.auth)return void this.$store.dispatch("showSnackbar",{text:"인증을 받은 회원만 토픽을 만들 수 있습니다.",color:"error"});this.editItem=null,this.dialog=!0}else t&&this.$axios.get("/board",{params:{boardId:t.boardId}}).then(function(t){e.editItem=t.data,e.dialog=!0}).catch(function(t){console.log(t.response),e.$store.dispatch("showSnackbar",{text:t.response&&t.response.data.message||"토픽 정보를 가져오지 못했습니다.",color:"error"})})},closeDialog:function(){this.dialog=!1},resetBoard:function(){var t=this;this.$axios.get("/user/board").then(function(e){t.$store.dispatch("setUserBoards",e.data),t.$nextTick(t.reset)}).catch(function(e){console.log(e),t.$store.dispatch("showSnackbar",{text:e.response&&e.response.data.message||"구독 토픽 목록을 불러오지 못했습니다.",color:"error"})})}},computed:{originalTopics:function(){var t=this;return this.userBoards.filter(function(t){return"T"===t.boardType}).map(function(e){return e.readRestrictDate&&t.$moment(e.readRestrictDate,"YYYYMMDD").isValid()&&!t.$moment(e.readRestrictDate,"YYYYMMDD").isBefore(t.$moment())||delete e.readRestrictDate,e.writeRestrictDate&&t.$moment(e.writeRestrictDate,"YYYYMMDD").isValid()&&!t.$moment(e.writeRestrictDate,"YYYYMMDD").isBefore(t.$moment())||delete e.writeRestrictDate,e})},lounges:function(){var t=this;return this.userBoards.map(function(e){return e.readRestrictDate&&t.$moment(e.readRestrictDate,"YYYYMMDD").isValid()&&!t.$moment(e.readRestrictDate,"YYYYMMDD").isBefore(t.$moment())||delete e.readRestrictDate,e.writeRestrictDate&&t.$moment(e.writeRestrictDate,"YYYYMMDD").isValid()&&!t.$moment(e.writeRestrictDate,"YYYYMMDD").isBefore(t.$moment())||delete e.writeRestrictDate,e}).filter(function(t){return"T"!==t.boardType&&(t.writeRestrictDate||t.readRestrictDate)})},userBoards:function(){return this.$store.getters.userBoards}},mounted:function(){this.reset()},watch:{userBoards:function(){this.reset()},dialog:function(t){document.body.style.position=t?"fixed":"initial"}},render:function(t){return t("myBoard",{attrs:{id:"app"}},this.draggable)}},c=l,u=(o("1917"),o("0c7c")),d=Object(u["a"])(c,r,n,!1,null,null,null);e["default"]=d.exports},1516:function(t,e,o){"use strict";"function"===typeof Symbol&&Symbol.iterator;var r=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var o=arguments[e];for(var r in o)Object.prototype.hasOwnProperty.call(o,r)&&(t[r]=o[r])}return t};function n(t){if(Array.isArray(t)){for(var e=0,o=Array(t.length);e<t.length;e++)o[e]=t[e];return o}return Array.from(t)}(function(){function e(t,e,o){return void 0==o?t:(t=null==t?{}:t,t[e]=o,t)}function i(t){function o(t){t.parentElement.removeChild(t)}function i(t,e,o){var r=0===o?t.children[0]:t.children[o-1].nextSibling;t.insertBefore(e,r)}function a(t,e){return t.map(function(t){return t.elm}).indexOf(e)}function s(t,e,o){if(!t)return[];var r=t.map(function(t){return t.elm}),i=[].concat(n(e)).map(function(t){return r.indexOf(t)});return o?i.filter(function(t){return-1!==t}):i}function l(t,e){var o=this;this.$nextTick(function(){return o.$emit(t.toLowerCase(),e)})}function c(t){var e=this;return function(o){null!==e.realList&&e["onDrag"+t](o),l.call(e,t,o)}}var u=["Start","Add","Remove","Update","End"],d=["Choose","Sort","Filter","Clone"],h=["Move"].concat(u,d).map(function(t){return"on"+t}),p=null,f={options:Object,list:{type:Array,required:!1,default:null},value:{type:Array,required:!1,default:null},noTransitionOnDrag:{type:Boolean,default:!1},clone:{type:Function,default:function(t){return t}},element:{type:String,default:"div"},move:{type:Function,default:null},componentData:{type:Object,required:!1,default:null}},m={name:"draggable",props:f,data:function(){return{transitionMode:!1,noneFunctionalComponentMode:!1,init:!1}},render:function(t){var o=this.$slots.default;if(o&&1===o.length){var r=o[0];r.componentOptions&&"transition-group"===r.componentOptions.tag&&(this.transitionMode=!0)}var i=0,a=o,s=this.$slots,l=s.header,c=s.footer;l&&(i=l.length,a=a?[].concat(n(l),n(a)):[].concat(n(l))),c&&(a=a?[].concat(n(a),n(c)):[].concat(n(c))),this.headerOffset=i;var u=null,d=function(t,o){u=e(u,t,o)};if(d("attrs",this.$attrs),this.componentData){var h=this.componentData,p=h.on,f=h.props;d("on",p),d("props",f)}return t(this.element,u,a)},mounted:function(){var e=this;if(this.noneFunctionalComponentMode=this.element.toLowerCase()!==this.$el.nodeName.toLowerCase(),this.noneFunctionalComponentMode&&this.transitionMode)throw new Error("Transition-group inside component is not supported. Please alter element value or remove transition-group. Current element value: "+this.element);var o={};u.forEach(function(t){o["on"+t]=c.call(e,t)}),d.forEach(function(t){o["on"+t]=l.bind(e,t)});var n=r({},this.options,o,{onMove:function(t,o){return e.onDragMove(t,o)}});!("draggable"in n)&&(n.draggable=">*"),this._sortable=new t(this.rootContainer,n),this.computeIndexes()},beforeDestroy:function(){void 0!==this._sortable&&this._sortable.destroy()},computed:{rootContainer:function(){return this.transitionMode?this.$el.children[0]:this.$el},isCloning:function(){return!!this.options&&!!this.options.group&&"clone"===this.options.group.pull},realList:function(){return this.list?this.list:this.value}},watch:{options:{handler:function(t){for(var e in t)-1==h.indexOf(e)&&this._sortable.option(e,t[e])},deep:!0},realList:function(){this.computeIndexes()}},methods:{getChildrenNodes:function(){if(this.init||(this.noneFunctionalComponentMode=this.noneFunctionalComponentMode&&1==this.$children.length,this.init=!0),this.noneFunctionalComponentMode)return this.$children[0].$slots.default;var t=this.$slots.default;return this.transitionMode?t[0].child.$slots.default:t},computeIndexes:function(){var t=this;this.$nextTick(function(){t.visibleIndexes=s(t.getChildrenNodes(),t.rootContainer.children,t.transitionMode)})},getUnderlyingVm:function(t){var e=a(this.getChildrenNodes()||[],t);if(-1===e)return null;var o=this.realList[e];return{index:e,element:o}},getUnderlyingPotencialDraggableComponent:function(t){var e=t.__vue__;return e&&e.$options&&"transition-group"===e.$options._componentTag?e.$parent:e},emitChanges:function(t){var e=this;this.$nextTick(function(){e.$emit("change",t)})},alterList:function(t){if(this.list)t(this.list);else{var e=[].concat(n(this.value));t(e),this.$emit("input",e)}},spliceList:function(){var t=arguments,e=function(e){return e.splice.apply(e,t)};this.alterList(e)},updatePosition:function(t,e){var o=function(o){return o.splice(e,0,o.splice(t,1)[0])};this.alterList(o)},getRelatedContextFromMoveEvent:function(t){var e=t.to,o=t.related,n=this.getUnderlyingPotencialDraggableComponent(e);if(!n)return{component:n};var i=n.realList,a={list:i,component:n};if(e!==o&&i&&n.getUnderlyingVm){var s=n.getUnderlyingVm(o);if(s)return r(s,a)}return a},getVmIndex:function(t){var e=this.visibleIndexes,o=e.length;return t>o-1?o:e[t]},getComponent:function(){return this.$slots.default[0].componentInstance},resetTransitionData:function(t){if(this.noTransitionOnDrag&&this.transitionMode){var e=this.getChildrenNodes();e[t].data=null;var o=this.getComponent();o.children=[],o.kept=void 0}},onDragStart:function(t){this.context=this.getUnderlyingVm(t.item),t.item._underlying_vm_=this.clone(this.context.element),p=t.item},onDragAdd:function(t){this.updateEvenemt(t);var e=t.item._underlying_vm_;if(void 0!==e){o(t.item);var r=this.getVmIndex(t.newIndex);this.spliceList(r,0,e),this.computeIndexes();var n={element:e,newIndex:r};this.emitChanges({added:n})}},onDragRemove:function(t){if(this.updateEvenemt(t),i(this.rootContainer,t.item,t.oldIndex),this.isCloning)o(t.clone);else{var e=this.context.index;this.spliceList(e,1);var r={element:this.context.element,oldIndex:e};this.resetTransitionData(e),this.emitChanges({removed:r})}},onDragUpdate:function(t){this.updateEvenemt(t),o(t.item),i(t.from,t.item,t.oldIndex);var e=this.context.index,r=this.getVmIndex(t.newIndex);this.updatePosition(e,r);var n={element:this.context.element,oldIndex:e,newIndex:r};this.emitChanges({moved:n})},updateEvenemt:function(t){this.updateProperty(t,"newIndex"),this.updateProperty(t,"oldIndex")},updateProperty:function(t,e){t.hasOwnProperty(e)&&(t[e]+=this.headerOffset)},computeFutureIndex:function(t,e){if(!t.element)return 0;var o=[].concat(n(e.to.children)).filter(function(t){return"none"!==t.style["display"]}),r=o.indexOf(e.related),i=t.component.getVmIndex(r),a=-1!=o.indexOf(p);return a||!e.willInsertAfter?i:i+1},onDragMove:function(t,e){var o=this.move;if(!o||!this.realList)return!0;var n=this.getRelatedContextFromMoveEvent(t),i=this.context,a=this.computeFutureIndex(n,t);return r(i,{futureIndex:a}),r(t,{relatedContext:n,draggedContext:i}),o(t,e)},onDragEnd:function(t){this.computeIndexes(),p=null}}};return m}Array.from||(Array.from=function(t){return[].slice.call(t)});var a=o("53fe");t.exports=i(a)})()},1917:function(t,e,o){"use strict";var r=o("5e58"),n=o.n(r);n.a},"53fe":function(t,e,o){var r,n;
/**!
 * Sortable
 * @author	RubaXa   <trash@rubaxa.org>
 * @author	owenm    <owen23355@gmail.com>
 * @license MIT
 */
/**!
 * Sortable
 * @author	RubaXa   <trash@rubaxa.org>
 * @author	owenm    <owen23355@gmail.com>
 * @license MIT
 */
(function(i){"use strict";r=i,n="function"===typeof r?r.call(e,o,e,t):r,void 0===n||(t.exports=n)})(function(){"use strict";if("undefined"===typeof window||!window.document)return function(){throw new Error("Sortable.js requires a window with a document")};var t,e,o,r,n,i,a,s,l,c,u,d,h,p,f,m,v,g,b,y,w,D,x,_,C,I=[],k=!1,T=!1,N=!1,S=[],E=!1,$=!1,A=/\s+/g,Y="Sortable"+(new Date).getTime(),M=window,O=M.document,R=M.parseInt,B=M.setTimeout,P=M.jQuery||M.Zepto,G=M.Polymer,L={capture:!1,passive:!1},X=!!navigator.userAgent.match(/(?:Trident.*rv[ :]?11\.|msie|iemobile)/i),H=!!navigator.userAgent.match(/Edge/i),F=H||X?"cssFloat":"float",U="draggable"in O.createElement("div"),W=function(){if(X)return!1;var t=O.createElement("x");return t.style.cssText="pointer-events:auto","auto"===t.style.pointerEvents}(),V=!1,j=!1,z=Math.abs,q=Math.min,J=[],Z=function(t,e){var o=yt(t),r=R(o.width),n=kt(t,0,e),i=kt(t,1,e),a=n&&yt(n),s=i&&yt(i),l=a&&R(a.marginLeft)+R(a.marginRight)+Xt(n).width,c=s&&R(s.marginLeft)+R(s.marginRight)+Xt(i).width;if("flex"===o.display)return"column"===o.flexDirection||"column-reverse"===o.flexDirection?"vertical":"horizontal";if(n&&"none"!==a.float){var u="left"===a.float?"left":"right";return!i||"both"!==s.clear&&s.clear!==u?"horizontal":"vertical"}return n&&("block"===a.display||"flex"===a.display||"table"===a.display||"grid"===a.display||l>=r&&"none"===o[F]||i&&"none"===o[F]&&l+c>r)?"vertical":"horizontal"},K=function(t,e){for(var o=0;o<S.length;o++)if(!S[o].children.length){var r=Xt(S[o]),n=S[o][Y].options.emptyInsertThreshold,i=t>=r.left-n&&t<=r.right+n,a=e>=r.top-n&&e<=r.bottom+n;if(i&&a)return S[o]}},Q=function(t,e,o,r,n){var i=Xt(o),a="vertical"===r?i.left:i.top,s="vertical"===r?i.right:i.bottom,l="vertical"===r?t:e;return a<l&&l<s},tt=function(e,o,r){var n=e===t&&C||Xt(e),i=o===t&&C||Xt(o),a="vertical"===r?n.left:n.top,s="vertical"===r?n.right:n.bottom,l="vertical"===r?n.width:n.height,c="vertical"===r?i.left:i.top,u="vertical"===r?i.right:i.bottom,d="vertical"===r?i.width:i.height;return a===c||s===u||a+l/2===c+d/2},et=function(t,e){if(!t||!t.getBoundingClientRect)return M;var o=t,r=!1;do{if(o.clientWidth<o.scrollWidth||o.clientHeight<o.scrollHeight){var n=yt(o);if(o.clientWidth<o.scrollWidth&&("auto"==n.overflowX||"scroll"==n.overflowX)||o.clientHeight<o.scrollHeight&&("auto"==n.overflowY||"scroll"==n.overflowY)){if(!o||!o.getBoundingClientRect||o===O.body)return M;if(r||e)return o;r=!0}}}while(o=o.parentNode);return M},ot=Mt(function(t,e,o,r){if(e.scroll){var n=o?o[Y]:window,i=e.scrollSensitivity,a=e.scrollSpeed,u=t.clientX,d=t.clientY,h=(window.innerWidth,window.innerHeight,!1);l!==o&&(rt(),s=e.scroll,c=e.scrollFn,!0===s&&(s=et(o,!0),l=s));var p=0,f=s;do{var m,v,g,y,w,D,x,_,C,T=f,N=Xt(T),S=N.top,E=N.bottom,$=N.left,A=N.right,R=N.width,B=N.height;if(T!==M?(m=T.scrollWidth,v=T.scrollHeight,g=yt(T),D=R<m&&("auto"===g.overflowX||"scroll"===g.overflowX),x=B<v&&("auto"===g.overflowY||"scroll"===g.overflowY),_=T.scrollLeft,C=T.scrollTop):(m=O.documentElement.scrollWidth,v=O.documentElement.scrollHeight,g=yt(O.documentElement),D=R<m&&("auto"===g.overflowX||"scroll"===g.overflowX||"visible"===g.overflowX),x=B<v&&("auto"===g.overflowY||"scroll"===g.overflowY||"visible"===g.overflowY),_=O.documentElement.scrollLeft,C=O.documentElement.scrollTop),y=D&&(z(A-u)<=i&&_+R<m)-(z($-u)<=i&&!!_),w=x&&(z(E-d)<=i&&C+B<v)-(z(S-d)<=i&&!!C),!I[p])for(var P=0;P<=p;P++)I[P]||(I[P]={});I[p].vx==y&&I[p].vy==w&&I[p].el===T||(I[p].el=T,I[p].vx=y,I[p].vy=w,clearInterval(I[p].pid),!T||0==y&&0==w||(h=!0,I[p].pid=setInterval(function(){r&&0===this.layer&&ht.active._emulateDragOver(!0);var e=I[this.layer].vy?I[this.layer].vy*a:0,o=I[this.layer].vx?I[this.layer].vx*a:0;"function"===typeof c&&"continue"!==c.call(n,o,e,t,b,I[this.layer].el)||(I[this.layer].el===M?M.scrollTo(M.pageXOffset+o,M.pageYOffset+e):(I[this.layer].el.scrollTop+=e,I[this.layer].el.scrollLeft+=o))}.bind({layer:p}),24))),p++}while(e.bubbleScroll&&f!==M&&(f=et(f,!1)));k=h}},30),rt=function(){I.forEach(function(t){clearInterval(t.pid)}),I=[]},nt=function(t){function e(t,o){return function(r,n,i,a){var s=r.options.group.name&&n.options.group.name&&r.options.group.name===n.options.group.name;if(null==t&&(o||s))return!0;if(null==t||!1===t)return!1;if(o&&"clone"===t)return t;if("function"===typeof t)return e(t(r,n,i,a),o)(r,n,i,a);var l=(o?r:n).options.group.name;return!0===t||"string"===typeof t&&t===l||t.join&&t.indexOf(l)>-1}}var o={},r=t.group;r&&"object"==typeof r||(r={name:r}),o.name=r.name,o.checkPull=e(r.pull,!0),o.checkPut=e(r.put),o.revertClone=r.revertClone,t.group=o},it=function(e){t&&t.parentNode&&t.parentNode[Y]&&t.parentNode[Y]._computeIsAligned(e)},at=function(t,e){var o=e;while(!o[Y])o=o.parentNode;return t===o},st=function(t,e,o){var r=t.parentNode;while(r&&!r[Y])r=r.parentNode;r&&r[Y][o](Rt(e,{artificialBubble:!0}))},lt=function(){!W&&o&&yt(o,"display","none")},ct=function(){!W&&o&&yt(o,"display","")};O.addEventListener("click",function(t){if(N)return t.preventDefault(),t.stopPropagation&&t.stopPropagation(),t.stopImmediatePropagation&&t.stopImmediatePropagation(),N=!1,!1},!0);var ut,dt=function(e){if(e=e.touches?e.touches[0]:e,t){var o=K(e.clientX,e.clientY);o&&o[Y]._onDragOver({clientX:e.clientX,clientY:e.clientY,target:o,rootEl:o})}};function ht(t,e){if(!t||!t.nodeType||1!==t.nodeType)throw"Sortable: `el` must be HTMLElement, not "+{}.toString.call(t);this.el=t,this.options=e=Rt({},e),t[Y]=this;var o={group:null,sort:!0,disabled:!1,store:null,handle:null,scroll:!0,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0,draggable:/[uo]l/i.test(t.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return Z(t,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(t,e){t.setData("Text",e.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,touchStartThreshold:R(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:!1!==ht.supportPointer&&("PointerEvent"in window||window.navigator&&"msPointerEnabled"in window.navigator),emptyInsertThreshold:5};for(var r in o)!(r in e)&&(e[r]=o[r]);for(var n in nt(e),this)"_"===n.charAt(0)&&"function"===typeof this[n]&&(this[n]=this[n].bind(this));this.nativeDraggable=!e.forceFallback&&U,e.supportPointer?vt(t,"pointerdown",this._onTapStart):(vt(t,"mousedown",this._onTapStart),vt(t,"touchstart",this._onTapStart)),this.nativeDraggable&&(vt(t,"dragover",this),vt(t,"dragenter",this)),S.push(this.el),e.store&&e.store.get&&this.sort(e.store.get(this)||[])}function pt(t,e,o,r){if(t){o=o||O;do{if(null!=e&&(">"===e[0]&&t.parentNode===o&&Yt(t,e.substring(1))||Yt(t,e))||r&&t===o)return t;if(t===o)break}while(t=ft(t))}return null}function ft(t){return t.host&&t!==O&&t.host.nodeType?t.host:t.parentNode}function mt(t){t.dataTransfer&&(t.dataTransfer.dropEffect="move"),t.cancelable&&t.preventDefault()}function vt(t,e,o){t.addEventListener(e,o,L)}function gt(t,e,o){t.removeEventListener(e,o,L)}function bt(t,e,o){if(t&&e)if(t.classList)t.classList[o?"add":"remove"](e);else{var r=(" "+t.className+" ").replace(A," ").replace(" "+e+" "," ");t.className=(r+(o?" "+e:"")).replace(A," ")}}function yt(t,e,o){var r=t&&t.style;if(r){if(void 0===o)return O.defaultView&&O.defaultView.getComputedStyle?o=O.defaultView.getComputedStyle(t,""):t.currentStyle&&(o=t.currentStyle),void 0===e?o:o[e];e in r||-1!==e.indexOf("webkit")||(e="-webkit-"+e),r[e]=o+("string"===typeof o?"":"px")}}function wt(t){var e="";do{var o=yt(t,"transform");o&&"none"!==o&&(e=o+" "+e)}while(t=t.parentNode);return window.DOMMatrix?new DOMMatrix(e):window.WebKitCSSMatrix?new WebKitCSSMatrix(e):window.CSSMatrix?new CSSMatrix(e):void 0}function Dt(t,e,o){if(t){var r=t.getElementsByTagName(e),n=0,i=r.length;if(o)for(;n<i;n++)o(r[n],n);return r}return[]}function xt(t,e,o,n,i,a,s,l,c){t=t||e[Y];var u,d=t.options,h="on"+o.charAt(0).toUpperCase()+o.substr(1);!window.CustomEvent||X||H?(u=O.createEvent("Event"),u.initEvent(o,!0,!0)):u=new CustomEvent(o,{bubbles:!0,cancelable:!0}),u.to=i||e,u.from=a||e,u.item=n||e,u.clone=r,u.oldIndex=s,u.newIndex=l,u.originalEvent=c,e&&e.dispatchEvent(u),d[h]&&d[h].call(t,u)}function _t(t,e,o,r,n,i,a,s){var l,c,u=t[Y],d=u.options.onMove;return!window.CustomEvent||X||H?(l=O.createEvent("Event"),l.initEvent("move",!0,!0)):l=new CustomEvent("move",{bubbles:!0,cancelable:!0}),l.to=e,l.from=t,l.dragged=o,l.draggedRect=r,l.related=n||e,l.relatedRect=i||Xt(e),l.willInsertAfter=s,l.originalEvent=a,t.dispatchEvent(l),d&&(c=d.call(u,l,a)),c}function Ct(t){t.draggable=!1}function It(){V=!1}function kt(e,r,n){var i=0,a=0,s=e.children;while(a<s.length){if("none"!==s[a].style.display&&s[a]!==o&&s[a]!==t&&pt(s[a],n.draggable,e,!1)){if(i===r)return s[a];i++}a++}return null}function Tt(t){var e=t.lastElementChild;while(e===o||"none"===e.style.display)if(e=e.previousElementSibling,!e)break;return e||null}function Nt(t,e,o){var r=Xt(Tt(o)),n="vertical"===e?t.clientY:t.clientX,i="vertical"===e?t.clientX:t.clientY,a="vertical"===e?r.bottom:r.right,s="vertical"===e?r.left:r.top,l="vertical"===e?r.right:r.bottom,c=10;return"vertical"===e?i>l+c||i<=l&&n>a&&i>=s:n>a&&i>s||n<=a&&i>l+c}function St(e,o,r,n,i,a,s){var l=Xt(o),c="vertical"===r?e.clientY:e.clientX,u="vertical"===r?l.height:l.width,d="vertical"===r?l.top:l.left,h="vertical"===r?l.bottom:l.right,p=Xt(t),f=!1;if(!a)if(s&&_<u*n)if(!E&&(1===D?c>d+u*i/2:c<h-u*i/2)&&(E=!0),E)f=!0;else{"vertical"===r?p.top:p.left,"vertical"===r?p.bottom:p.right;if(1===D?c<d+_:c>h-_)return-1*D}else if(c>d+u*(1-n)/2&&c<h-u*(1-n)/2)return c>d+u/2?-1:1;return f=f||a,f&&(c<d+u*i/2||c>h-u*i/2)?c>d+u/2?1:-1:0}function Et(e,o){var r=At(t,o.draggable),n=At(e,o.draggable);return r<n?1:-1}function $t(t){var e=t.tagName+t.className+t.src+t.href+t.textContent,o=e.length,r=0;while(o--)r+=e.charCodeAt(o);return r.toString(36)}function At(t,e){var o=0;if(!t||!t.parentNode)return-1;while(t&&(t=t.previousElementSibling))"TEMPLATE"!==t.nodeName.toUpperCase()&&t!==r&&o++;return o}function Yt(t,e){if(t)try{if(t.matches)return t.matches(e);if(t.msMatchesSelector)return t.msMatchesSelector(e);if(t.webkitMatchesSelector)return t.webkitMatchesSelector(e)}catch(o){return!1}return!1}function Mt(t,e){return function(){if(!ut){var o=arguments,r=this;ut=B(function(){1===o.length?t.call(r,o[0]):t.apply(r,o),ut=void 0},e)}}}function Ot(){clearTimeout(ut),ut=void 0}function Rt(t,e){if(t&&e)for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o]);return t}function Bt(t){return G&&G.dom?G.dom(t).cloneNode(!0):P?P(t).clone(!0)[0]:t.cloneNode(!0)}function Pt(t){J.length=0;var e=t.getElementsByTagName("input"),o=e.length;while(o--){var r=e[o];r.checked&&J.push(r)}}function Gt(t){return B(t,0)}function Lt(t){return clearTimeout(t)}function Xt(t,e,o){if(t.getBoundingClientRect||t===M){var r,n,i,a,s,l,c;if(t!==M?(r=t.getBoundingClientRect(),n=r.top,i=r.left,a=r.bottom,s=r.right,l=r.height,c=r.width):(n=0,i=0,a=window.innerHeight,s=window.innerWidth,l=window.innerHeight,c=window.innerWidth),o&&t!==M){if(e=e||t.parentNode,!X)do{if(e&&e.getBoundingClientRect&&"none"!==yt(e,"transform")){var u=e.getBoundingClientRect();n-=u.top+R(yt(e,"border-top-width")),i-=u.left+R(yt(e,"border-left-width")),a=n+r.height,s=i+r.width;break}}while(e=e.parentNode);var d=wt(t),h=d&&d.a,p=d&&d.d;d&&(n/=p,i/=h,c/=h,l/=p,a=n+l,s=i+c)}return{top:n,left:i,bottom:a,right:s,width:c,height:l}}}function Ht(t,e){var o=et(o,!0),r=Xt(t)[e];while(o){var n,i=Xt(o)[e];if(n="top"===e||"left"===e?r>=i:r<=i,!n)return!0;if(o===M)break;o=et(o,!1)}return!1}return vt(O,"dragover",dt),vt(O,"mousemove",dt),vt(O,"touchmove",dt),ht.prototype={constructor:ht,_computeIsAligned:function(e){var r;if(o&&!W?(lt(),r=O.elementFromPoint(e.clientX,e.clientY),ct()):r=e.target,r=pt(r,this.options.draggable,this.el,!1),!j&&t&&t.parentNode===this.el){for(var n=this.el.children,i=0;i<n.length;i++)pt(n[i],this.options.draggable,this.el,!1)&&n[i]!==r&&(n[i].sortableMouseAligned=Q(e.clientX,e.clientY,n[i],this._getDirection(e,null),this.options));pt(r,this.options.draggable,this.el,!0)||(w=null),j=!0,B(function(){j=!1},30)}},_getDirection:function(e,o){return"function"===typeof this.options.direction?this.options.direction.call(this,e,o,t):this.options.direction},_onTapStart:function(e){if(e.cancelable){var o,r=this,n=this.el,i=this.options,s=i.preventOnFilter,l=e.type,c=e.touches&&e.touches[0],u=(c||e).target,d=e.target.shadowRoot&&(e.path&&e.path[0]||e.composedPath&&e.composedPath()[0])||u,h=i.filter;if(Pt(n),(!X||e.artificialBubble||at(n,u))&&!t&&!(/mousedown|pointerdown/.test(l)&&0!==e.button||i.disabled)&&!d.isContentEditable)if(u=pt(u,i.draggable,n,!1),u){if(a!==u){if(o=At(u,i.draggable),"function"===typeof h){if(h.call(this,e,u,this))return xt(r,d,"filter",u,n,n,o),void(s&&e.cancelable&&e.preventDefault())}else if(h&&(h=h.split(",").some(function(t){if(t=pt(d,t.trim(),n,!1),t)return xt(r,t,"filter",u,n,n,o),!0}),h))return void(s&&e.cancelable&&e.preventDefault());i.handle&&!pt(d,i.handle,n,!1)||this._prepareDragStart(e,c,u,o)}}else X&&st(n,e,"_onTapStart")}},_handleAutoScroll:function(e,o){if(t&&this.options.scroll){var r=e.clientX,n=e.clientY,i=O.elementFromPoint(r,n),a=this;if(o||H||X){ot(e,a.options,i,o);var s=et(i,!0);!k||f&&r===m&&n===v||(f&&clearInterval(f),f=setInterval(function(){if(t){var i=et(O.elementFromPoint(r,n),!0);i!==s&&(s=i,rt(),ot(e,a.options,s,o))}},10),m=r,v=n)}else{if(!a.options.bubbleScroll||et(i,!0)===window)return void rt();ot(e,a.options,et(i,!1),!1)}}},_prepareDragStart:function(o,r,s,l){var c,d=this,p=d.el,f=d.options,m=p.ownerDocument;s&&!t&&s.parentNode===p&&(n=p,t=s,e=t.parentNode,i=t.nextSibling,a=s,h=f.group,u=l,g={target:t,clientX:(r||o).clientX,clientY:(r||o).clientY},this._lastX=(r||o).clientX,this._lastY=(r||o).clientY,t.style["will-change"]="all",t.style.transition="",t.style.transform="",c=function(){d._disableDelayedDrag(),t.draggable=d.nativeDraggable,d._triggerDragStart(o,r),xt(d,n,"choose",t,n,n,u),bt(t,f.chosenClass,!0)},f.ignore.split(",").forEach(function(e){Dt(t,e.trim(),Ct)}),f.supportPointer?vt(m,"pointerup",d._onDrop):(vt(m,"mouseup",d._onDrop),vt(m,"touchend",d._onDrop),vt(m,"touchcancel",d._onDrop)),f.delay?(vt(m,"mouseup",d._disableDelayedDrag),vt(m,"touchend",d._disableDelayedDrag),vt(m,"touchcancel",d._disableDelayedDrag),vt(m,"mousemove",d._delayedDragTouchMoveHandler),vt(m,"touchmove",d._delayedDragTouchMoveHandler),f.supportPointer&&vt(m,"pointermove",d._delayedDragTouchMoveHandler),d._dragStartTimer=B(c,f.delay)):c())},_delayedDragTouchMoveHandler:function(t){var e=t.touches?t.touches[0]:t;q(z(e.clientX-this._lastX),z(e.clientY-this._lastY))>=this.options.touchStartThreshold&&this._disableDelayedDrag()},_disableDelayedDrag:function(){var t=this.el.ownerDocument;clearTimeout(this._dragStartTimer),gt(t,"mouseup",this._disableDelayedDrag),gt(t,"touchend",this._disableDelayedDrag),gt(t,"touchcancel",this._disableDelayedDrag),gt(t,"mousemove",this._delayedDragTouchMoveHandler),gt(t,"touchmove",this._delayedDragTouchMoveHandler),gt(t,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(e,o){o=o||("touch"==e.pointerType?e:null),!this.nativeDraggable||o?this.options.supportPointer?vt(O,"pointermove",this._onTouchMove):vt(O,o?"touchmove":"mousemove",this._onTouchMove):(vt(t,"dragend",this),vt(n,"dragstart",this._onDragStart));try{O.selection?Gt(function(){O.selection.empty()}):window.getSelection().removeAllRanges()}catch(r){}},_dragStarted:function(e){if(T=!1,n&&t){this.nativeDraggable&&(vt(O,"dragover",this._handleAutoScroll),vt(O,"dragover",it));var o=this.options;!e&&bt(t,o.dragClass,!1),bt(t,o.ghostClass,!0),yt(t,"transform",""),ht.active=this,e&&this._appendGhost(),xt(this,n,"start",t,n,n,u)}else this._nulling()},_emulateDragOver:function(e){if(b){if(this._lastX===b.clientX&&this._lastY===b.clientY&&!e)return;this._lastX=b.clientX,this._lastY=b.clientY,lt();var o=O.elementFromPoint(b.clientX,b.clientY),r=o;while(o&&o.shadowRoot)o=o.shadowRoot.elementFromPoint(b.clientX,b.clientY),r=o;if(r)do{var n;if(r[Y])if(n=r[Y]._onDragOver({clientX:b.clientX,clientY:b.clientY,target:o,rootEl:r}),n&&!this.options.dragoverBubble)break;o=r}while(r=r.parentNode);t.parentNode[Y]._computeIsAligned(b),ct()}},_onTouchMove:function(t){if(g){var e=this.options,r=e.fallbackTolerance,n=e.fallbackOffset,i=t.touches?t.touches[0]:t,a=o&&wt(o),s=o&&a&&a.a,l=o&&a&&a.d,c=(i.clientX-g.clientX+n.x)/(s||1),u=(i.clientY-g.clientY+n.y)/(l||1),d=t.touches?"translate3d("+c+"px,"+u+"px,0)":"translate("+c+"px,"+u+"px)";if(!ht.active&&!T){if(r&&q(z(i.clientX-this._lastX),z(i.clientY-this._lastY))<r)return;this._onDragStart(t,!0)}this._handleAutoScroll(i,!0),y=!0,b=i,yt(o,"webkitTransform",d),yt(o,"mozTransform",d),yt(o,"msTransform",d),yt(o,"transform",d),t.cancelable&&t.preventDefault()}},_appendGhost:function(){if(!o){var e=Xt(t,this.options.fallbackOnBody?O.body:n,!0),r=(yt(t),this.options);o=t.cloneNode(!0),bt(o,r.ghostClass,!1),bt(o,r.fallbackClass,!0),bt(o,r.dragClass,!0),yt(o,"box-sizing","border-box"),yt(o,"margin",0),yt(o,"top",e.top),yt(o,"left",e.left),yt(o,"width",e.width),yt(o,"height",e.height),yt(o,"opacity","0.8"),yt(o,"position","fixed"),yt(o,"zIndex","100000"),yt(o,"pointerEvents","none"),r.fallbackOnBody&&O.body.appendChild(o)||n.appendChild(o)}},_onDragStart:function(e,o){var i=this,a=e.dataTransfer,s=i.options;r=Bt(t),r.draggable=!1,r.style["will-change"]="",this._hideClone(),bt(r,i.options.chosenClass,!1),i._cloneId=Gt(function(){i.options.removeCloneOnHide||n.insertBefore(r,t),xt(i,n,"clone",t)}),!o&&bt(t,s.dragClass,!0),o?(N=!0,i._loopId=setInterval(i._emulateDragOver,50)):(gt(O,"mouseup",i._onDrop),gt(O,"touchend",i._onDrop),gt(O,"touchcancel",i._onDrop),a&&(a.effectAllowed="move",s.setData&&s.setData.call(i,a,t)),vt(O,"drop",i),yt(t,"transform","translateZ(0)")),T=!0,i._dragStartId=Gt(i._dragStarted.bind(i,o)),vt(O,"selectstart",i)},_onDragOver:function(r){var a,s,l,c=this.el,d=r.target,f=this.options,m=f.group,v=ht.active,g=h===m,b=f.sort,I=this;if(!V&&(!X||r.rootEl||r.artificialBubble||at(c,d))){if(void 0!==r.preventDefault&&r.cancelable&&r.preventDefault(),y=!0,d=pt(d,f.draggable,c,!0),pt(r.target,null,t,!0)||d.animated)return F();if(d!==t&&(N=!1),v&&!f.disabled&&(g?b||(l=!n.contains(t)):p===this||(this.lastPutMode=h.checkPull(this,v,t,r))&&m.checkPut(this,v,t,r))){var T=this._getDirection(r,d);if(a=Xt(t),l)return this._hideClone(),e=n,i?n.insertBefore(t,i):n.appendChild(t),F();if(0===c.children.length||c.children[0]===o||Nt(r,T,c)&&!t.animated){if(0!==c.children.length&&c.children[0]!==o&&c===r.target&&(d=Tt(c)),d&&(s=Xt(d)),g?v._hideClone():v._showClone(this),!1!==_t(n,c,t,a,d,s,r,!!d))return c.appendChild(t),e=c,C=null,U(),this._animate(a,t),d&&this._animate(s,d),F()}else if(d&&d!==t&&d.parentNode===c){var S,A=0,M=d.sortableMouseAligned,R=t.parentNode!==c,P=Ht(d,"vertical"===T?"top":"left");if(w!==d&&(x=null,S=Xt(d)["vertical"===T?"top":"left"],E=!1),tt(t,d,T)&&M||R||P||f.invertSwap||"insert"===x||"swap"===x?("swap"!==x&&($=f.invertSwap||R||k||P),A=St(r,d,T,f.swapThreshold,null==f.invertedSwapThreshold?f.swapThreshold:f.invertedSwapThreshold,$,w===d),x="swap"):(A=Et(d,f),x="insert"),0===A)return F();C=null,w=d,D=A,s=Xt(d);var G=d.nextElementSibling,L=!1;L=1===A;var H=_t(n,c,t,a,d,s,r,L);if(!1!==H)return 1!==H&&-1!==H||(L=1===H),V=!0,B(It,30),g?v._hideClone():v._showClone(this),L&&!G?c.appendChild(t):d.parentNode.insertBefore(t,L?G:d),e=t.parentNode,void 0===S||$||(_=z(S-Xt(d)["vertical"===T?"top":"left"])),U(),!R&&this._animate(s,d),this._animate(a,t),F()}if(c.contains(t))return F()}return X&&!r.rootEl&&st(c,r,"_onDragOver"),!1}function F(){return v&&(bt(t,p?p.options.ghostClass:v.options.ghostClass,!1),bt(t,f.ghostClass,!0)),p!==I&&I!==ht.active?p=I:I===ht.active&&(p=null),(d===t&&!t.animated||d===c&&!d.animated)&&(w=null),f.dragoverBubble||r.rootEl||d===O||(I._handleAutoScroll(r),t.parentNode[Y]._computeIsAligned(r)),!f.dragoverBubble&&r.stopPropagation&&r.stopPropagation(),!0}function U(){xt(I,n,"change",d,c,n,u,At(t,f.draggable),r)}},_animate:function(e,o){var r=this.options.animation;if(r){var n=Xt(o);if(o===t&&(C=n),1===e.nodeType&&(e=Xt(e)),e.left+e.width/2!==n.left+n.width/2||e.top+e.height/2!==n.top+n.height/2){var i=wt(this.el),a=i&&i.a,s=i&&i.d;yt(o,"transition","none"),yt(o,"transform","translate3d("+(e.left-n.left)/(a||1)+"px,"+(e.top-n.top)/(s||1)+"px,0)"),o.offsetWidth,yt(o,"transition","transform "+r+"ms"+(this.options.easing?" "+this.options.easing:"")),yt(o,"transform","translate3d(0,0,0)")}"number"===typeof o.animated&&clearTimeout(o.animated),o.animated=B(function(){yt(o,"transition",""),yt(o,"transform",""),o.animated=!1},r)}},_offUpEvents:function(){var t=this.el.ownerDocument;gt(O,"touchmove",this._onTouchMove),gt(O,"pointermove",this._onTouchMove),gt(t,"mouseup",this._onDrop),gt(t,"touchend",this._onDrop),gt(t,"pointerup",this._onDrop),gt(t,"touchcancel",this._onDrop),gt(O,"selectstart",this)},_onDrop:function(a){var s=this.el,l=this.options;T=!1,k=!1,$=!1,E=!1,clearInterval(this._loopId),clearInterval(f),rt(),Ot(),clearTimeout(this._dragStartTimer),Lt(this._cloneId),Lt(this._dragStartId),gt(O,"mousemove",this._onTouchMove),this.nativeDraggable&&(gt(O,"drop",this),gt(s,"dragstart",this._onDragStart),gt(O,"dragover",this._handleAutoScroll),gt(O,"dragover",it)),this._offUpEvents(),a&&(y&&(a.cancelable&&a.preventDefault(),!l.dropBubble&&a.stopPropagation()),o&&o.parentNode&&o.parentNode.removeChild(o),(n===e||p&&"clone"!==p.lastPutMode)&&r&&r.parentNode&&r.parentNode.removeChild(r),t&&(this.nativeDraggable&&gt(t,"dragend",this),Ct(t),t.style["will-change"]="",bt(t,p?p.options.ghostClass:this.options.ghostClass,!1),bt(t,this.options.chosenClass,!1),xt(this,n,"unchoose",t,e,n,u,null,a),n!==e?(d=At(t,l.draggable),d>=0&&(xt(null,e,"add",t,e,n,u,d,a),xt(this,n,"remove",t,e,n,u,d,a),xt(null,e,"sort",t,e,n,u,d,a),xt(this,n,"sort",t,e,n,u,d,a)),p&&p.save()):t.nextSibling!==i&&(d=At(t,l.draggable),d>=0&&(xt(this,n,"update",t,e,n,u,d,a),xt(this,n,"sort",t,e,n,u,d,a))),ht.active&&(null!=d&&-1!==d||(d=u),xt(this,n,"end",t,e,n,u,d,a),this.save()))),this._nulling()},_nulling:function(){n=t=e=o=i=r=a=s=l=I.length=f=m=v=g=b=y=d=u=w=D=C=p=h=ht.active=null,J.forEach(function(t){t.checked=!0}),J.length=0},handleEvent:function(e){switch(e.type){case"drop":case"dragend":this._onDrop(e);break;case"dragenter":case"dragover":t&&(this._onDragOver(e),mt(e));break;case"selectstart":e.preventDefault();break}},toArray:function(){for(var t,e=[],o=this.el.children,r=0,n=o.length,i=this.options;r<n;r++)t=o[r],pt(t,i.draggable,this.el,!1)&&e.push(t.getAttribute(i.dataIdAttr)||$t(t));return e},sort:function(t){var e={},o=this.el;this.toArray().forEach(function(t,r){var n=o.children[r];pt(n,this.options.draggable,o,!1)&&(e[t]=n)},this),t.forEach(function(t){e[t]&&(o.removeChild(e[t]),o.appendChild(e[t]))})},save:function(){var t=this.options.store;t&&t.set&&t.set(this)},closest:function(t,e){return pt(t,e||this.options.draggable,this.el,!1)},option:function(t,e){var o=this.options;if(void 0===e)return o[t];o[t]=e,"group"===t&&nt(o)},destroy:function(){var t=this.el;t[Y]=null,gt(t,"mousedown",this._onTapStart),gt(t,"touchstart",this._onTapStart),gt(t,"pointerdown",this._onTapStart),this.nativeDraggable&&(gt(t,"dragover",this),gt(t,"dragenter",this)),Array.prototype.forEach.call(t.querySelectorAll("[draggable]"),function(t){t.removeAttribute("draggable")}),this._onDrop(),S.splice(S.indexOf(this.el),1),this.el=t=null},_hideClone:function(){r.cloneHidden||(yt(r,"display","none"),r.cloneHidden=!0,r.parentNode&&this.options.removeCloneOnHide&&r.parentNode.removeChild(r))},_showClone:function(e){"clone"===e.lastPutMode?r.cloneHidden&&(n.contains(t)&&!this.options.group.revertClone?n.insertBefore(r,t):i?n.insertBefore(r,i):n.appendChild(r),this.options.group.revertClone&&this._animate(t,r),yt(r,"display",""),r.cloneHidden=!1):this._hideClone()}},vt(O,"touchmove",function(t){(ht.active||T)&&t.cancelable&&t.preventDefault()}),ht.utils={on:vt,off:gt,css:yt,find:Dt,is:function(t,e){return!!pt(t,e,t,!1)},extend:Rt,throttle:Mt,closest:pt,toggleClass:bt,clone:Bt,index:At,nextTick:Gt,cancelNextTick:Lt,detectDirection:Z,getChild:kt},ht.create=function(t,e){return new ht(t,e)},ht.version="1.8.3",ht})},"5e58":function(t,e,o){},f94d:function(t,e,o){"use strict";o.r(e);var r=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("v-card",{attrs:{tile:""}},[o("v-toolbar",{attrs:{card:"",color:"white"}},[o("v-toolbar-title",[t._v(t._s(t.board?"토픽 관리":"새로운 토픽 만들기"))]),o("v-spacer"),o("v-toolbar-items",[o("v-btn",{attrs:{icon:""},on:{click:function(e){return t.$emit("closeDialog",null)}}},[o("v-icon",[t._v("close")])],1)],1)],1),o("v-card-text",[o("v-form",{ref:"form"},[o("v-layout",{attrs:{row:"",xs12:"",wrap:""}},[o("v-flex",{staticClass:"mb-1",attrs:{xs6:""}},[t.board?o("v-text-field",{staticClass:"dense",attrs:{readonly:"",label:"토픽ID",hint:"pedagy.com/<b>seoul</b>과 같이 URL주소에 들어가는 문구입니다."},model:{value:t.boardId,callback:function(e){t.boardId=e},expression:"boardId"}}):o("v-text-field",{staticClass:"dense",attrs:{autofocus:"",rules:t.boardIdRules,"error-messages":t.boardIdErrors,maxlength:"15",label:"토픽ID",hint:"pedagy.com/<b>seoul</b>과 같이 URL주소에 들어갈 문구입니다.",placeholder:"비워두면 임의로 생성됩니다.","validate-on-blur":""},on:{blur:t.checkBoardId},model:{value:t.boardId,callback:function(e){t.boardId=e},expression:"boardId"}})],1),o("v-flex",{staticClass:"mb-1",attrs:{xs6:""}},[o("v-text-field",{staticClass:"dense",attrs:{rules:t.boardNameRules,maxlength:"200",label:"토픽 이름",required:"",hint:"토픽 목록에 표시되는 이름입니다.","validate-on-blur":""},model:{value:t.boardName,callback:function(e){t.boardName=e},expression:"boardName"}})],1),o("v-flex",{attrs:{xs12:""}},[o("v-textarea",{ref:"boardDescription",attrs:{rows:3,maxlength:"1000",height:"80px",label:"토픽 소개",hint:"토픽 이름 아래에 작게 표시되는 설명입니다.","validate-on-blur":""},model:{value:t.boardDescription,callback:function(e){t.boardDescription=e},expression:"boardDescription"}})],1),o("v-flex",{attrs:{xs6:""}},[o("v-checkbox",{ref:"allowAnonymous",staticClass:"dense mt-2",attrs:{label:"익명글 허용","hide-details":""},model:{value:t.allowAnonymous,callback:function(e){t.allowAnonymous=e},expression:"allowAnonymous"}})],1),o("v-flex",{attrs:{xs6:""}},[o("v-tooltip",{attrs:{bottom:""}},[o("v-checkbox",{ref:"useCategory",staticClass:"dense mt-2",attrs:{slot:"activator",label:"카테고리 분류 사용","hide-details":""},slot:"activator",model:{value:t.useCategory,callback:function(e){t.useCategory=e},expression:"useCategory"}}),o("span",[t._v("글을 작성할 때 작성자가 기본/정보/질문 중 하나의 카테고리를 지정할 수 있습니다.")])],1)],1),o("v-flex",{staticClass:"mt-3",attrs:{xs6:""}},[o("v-select",{attrs:{items:t.allGroupAuthItems,label:"토픽 공개 여부",dense:""},model:{value:t.allGroupAuth,callback:function(e){t.allGroupAuth=e},expression:"allGroupAuth"}})],1),o("v-flex",{staticClass:"mt-3",attrs:{xs6:""}},[o("v-layout",{attrs:{"align-center":"","fill-height":""}},[o(t.$vuetify.breakpoint.xsOnly?"small":"div",{tag:"component",domProps:{innerHTML:t._s(t.allGroupAuthDescription)}})],1)],1),o("v-flex",{attrs:{xs12:""}},[o(t.$vuetify.breakpoint.xsOnly?"v-select":"v-autocomplete",{tag:"component",attrs:{name:"allowedGroups",chips:"",multiple:"","item-text":"text",dense:"","item-value":"value",disabled:"READWRITE"===t.allGroupAuth,items:t.groupItems,label:"구독 권한",hint:"내가 구독할 수 있도록 선택해야 합니다."+(""!==t.myGroup?" 나의 구독가능 정보 : "+t.myGroup:""),"persistent-hint":"","menu-props":{closeOnContentClick:t.$vuetify.breakpoint.xsOnly}},scopedSlots:t._u([{key:"selection",fn:function(e){return[o("v-chip",{key:e.item.value,attrs:{close:"",small:"",selected:e.selected},on:{input:function(o){return t.removeChip(e,e.item,t.allowedGroups)}}},[t._v(t._s(e.item.text))])]}},{key:"item",fn:function(e){return[o("v-list-tile-content",[o("v-list-tile-title",{domProps:{innerHTML:t._s(e.item.text)}})],1)]}}]),model:{value:t.allowedGroups,callback:function(e){t.allowedGroups=e},expression:"allowedGroups"}})],1),t.board?o("v-flex",{staticClass:"mt-2",attrs:{xs12:""}},[o("v-select",{attrs:{name:"ownerNickName",dense:"",items:t.boardMemberItems,label:"토픽지기 양도",hint:"선택한 회원에게 토픽지기가 양도됩니다.","persistent-hint":""},model:{value:t.ownerNickName,callback:function(e){t.ownerNickName=e},expression:"ownerNickName"}})],1):t._e(),t.board&&t.board.reservedDate?o("v-flex",{staticClass:"mt-3",attrs:{xs12:""}},[o("v-textarea",{ref:"reservedContents",attrs:{rows:3,readonly:"",height:"80px",label:"변경 예약("+t.$moment(t.board.reservedDate,"YYYYMMDD").format("Y.M.D")+" 반영 예정) 내용",hint:"변경이 예약된 토픽의 내용입니다."},model:{value:t.reservedContents,callback:function(e){t.reservedContents=e},expression:"reservedContents"}})],1):t._e()],1),o("v-divider",{staticClass:"my-2"}),o("v-layout",{attrs:{row:""}},[o("v-btn",{attrs:{flat:""},on:{click:function(e){return t.reset(!0)}}},[t._v("초기화")]),t.board?o("v-btn",{attrs:{color:"error"},on:{click:t.deleteBoard}},[t._v("삭제")]):t._e(),o("v-spacer"),o("v-btn",{attrs:{color:"primary",loading:t.loading},on:{click:t.save}},[t._v("등록")])],1)],1)],1)],1)},n=[];function i(t){return i="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i(t)}var a=["document","documents","profile","profiles","auth","user","users","comment","comments","vote","votes","report","reports","index","scraps","scrap","board","boards","manage","manages","chat","chats","message","messages","group","groups","event","events","signup","signin","signout","resetPassword","notification","notifications","survey","list","admin","ADMIN","ADMINISTRATOR","administrator","attach","profiles","animal","loungeBest","topicBest","lounge","topic","type","best","sanction","userId","nickName","myPage","myBoard","myCommunity","pedagy","myPedagy","Pedagy","tools","privacy","contract","rules","error","search","searchBoard","searchDocument","myBoard","myDocument","myComment","authSubmit"],s=[/^(?:[a-zA-Z]+)(?:[a-zA-Z0-9\-_]{0,15})$/,/^((?!(--|__)).)*$/],l={M:"전공",G:"학년",N:"일반",R:"지역",Z:"인증"},c={name:"topicCreator",data:function(){return{loading:!1,boardId:null,boardName:null,boardDescription:null,allGroupAuth:"READONLY",allowAnonymous:!0,useCategory:!1,allowedGroups:[],allGroupAuthItems:[{value:"READWRITE",text:"전체구독허용"},{value:"READONLY",text:"읽기공개"},{value:"NONE",text:"비공개"}],ownerNickName:null,groupItems:[],boardIdRules:[function(t){return!a.includes(t)||"사용할 수 없는 ID입니다."},function(t){return!t||t.length>3&&t.length<16||"4~15자로 입력해주세요."},function(t){return s[0].test(t)||"토픽ID의 길이가 너무 길거나, 알파벳이 아닌 문자가 있습니다."},function(t){return s[1].test(t)||"토픽ID에 연속된 [_, -]가 있습니다."}],boardNameRules:[function(t){return!!t||"토픽 이름을 입력해주세요."}],boardMemberItems:[],boardIdErrors:[]}},props:["board"],computed:{myGroup:function(){var t=this.$store.getters.profile;return this.groupItems.filter(function(e){return t.groups.some(function(t){return t===e.value})}).map(function(t){return t.text}).join(", ")},allGroupAuthDescription:function(){switch(this.allGroupAuth){case"READONLY":return"구독자만 글을 쓸 수 있지만,<br>구독하지 않아도 글을 볼 수 있습니다.<br>그 대신 핫토픽에 글이 노출됩니다.";case"NONE":return"구독자만 글을 읽고 쓸 수 있습니다.<br>핫토픽에는 글이 노출되지 않습니다.";case"READWRITE":return"모든 회원이 토픽을 구독할 수 있습니다.<br>구독하지 않아도 글을 볼 수 있습니다.<br>핫토픽에 글이 노출됩니다."}},reservedContents:function(){var t=this;if(!this.board||!this.board.reservedContents)return null;var e=function(){var e=t.board.reservedContents,o="",r=function(r){switch(r){case"boardName":o+="토픽 이름 : ".concat(e[r],"\n");break;case"boardDescription":o+="토픽 설명 : ".concat(e[r],"\n");break;case"allowAnonymous":o+="익명글 허용 여부 : ".concat(e[r]?"허용":"비허용","\n");break;case"useCategory":o+="카테고리 : ".concat(e[r]?"사용":"미사용","\n");break;case"allGroupAuth":o+="토픽 공개/비공개 : ".concat(t.allGroupAuthItems.some(function(t){return t.value===e[r]})?t.allGroupAuthItems.find(function(t){return t.value===e[r]}).text:"(알 수 없음)","\n");break;case"ownerNickName":o+="토픽지기 : ".concat(e[r],"\n");break;case"auth":o+="구독 권한 : ".concat(e[r].filter(function(e){return t.groupItems.some(function(t){return t.value===e.groupId})}).map(function(e){return t.groupItems.find(function(t){return t.value===e.groupId}).text+("INSERT"===e.command?" 추가":"DELETE"===e.command?" 삭제":"")}).join(", "));break;case"status":o+="DELETED"===e[r]?"토픽 삭제 예정":"";break}};for(var n in e)r(n);return{v:o}}();return"object"===i(e)?e.v:void 0}},methods:{reset:function(t){var e=this;this.board?(t||(this.loading=!0,this.$axios.get("/board/member",{params:{boardId:this.board.boardId},headers:{silent:!0}}).then(function(t){var o=e.$store.getters.profile.topicNickName;e.boardMemberItems=t.data.filter(function(t){return t.nickName!==o}).map(function(t){return t.nickName}),e.loading=!1}).catch(function(t){console.log(t.response),e.loading=!1,e.$store.dispatch("showSnackbar",{text:t.response?t.response.data.message:"토픽 구성원을 불러오지 못했습니다.",color:"error"})})),this.boardId=this.board.boardId,this.boardName=this.board.boardName,this.boardDescription=this.board.boardDescription,this.allGroupAuth=this.board.allGroupAuth,this.allowAnonymous=this.board.allowAnonymous,this.useCategory=!!this.board.categories&&this.board.categories.filter(function(t){return t}).length>0,this.allowedGroups=this.board.boardAuth.map(function(t){return t.groupId}),this.ownerNickName=this.board.ownerNickName):(this.boardId=null,this.boardName=null,this.boardDescription=null,this.allGroupAuth="READONLY",this.allowAnonymous=!0,this.useCategory=!1,this.allowedGroups=[],this.ownerNickName=null)},removeChip:function(t,e,o){t.parent.selectedItems.splice(t.parent.selectedItems.indexOf(e.value),1),o.splice(o.indexOf(e.value),1)},checkBoardId:function(t){var e=this;this.boardId&&0===this.boardIdErrors.length?this.$axios.get("/boardId",{params:{boardId:this.boardId},headers:{silent:!0}}).then(function(o){e.boardIdErrors=[],"function"===typeof t&&t.call(e)}).catch(function(o){e.boardIdErrors=[o&&o.response&&o.response.data.message],"function"===typeof t&&t.call(e)}):"function"===typeof t&&t.call(this)},save:function(){var t=this;this.board?this.$refs.form.validate()&&0===this.boardIdErrors.length?confirm("변경 내용은 1개월 뒤에 반영됩니다. 계속하시겠습니까?")&&(this.loading=!0,this.$axios.put("/board",{boardId:this.boardId,boardName:this.boardName,boardDescription:this.boardDescription||void 0,allGroupAuth:this.allGroupAuth,allowAnonymous:this.allowAnonymous,allowedGroups:this.allowedGroups.map(function(t){return{groupId:t,authType:"READWRITE"}}),useCategory:this.useCategory,ownerNickName:this.ownerNickName||void 0}).then(function(e){t.loading=!1,t.$emit("resetBoard"),t.$emit("closeDialog"),t.$store.dispatch("showSnackbar",{text:"토픽 정보를 변경 예약하였습니다.",color:"success"})}).catch(function(e){console.log(e.response),t.loading=!1,t.$store.dispatch("showSnackbar",{text:e.response?e.response.data.message:"토픽을 만들지 못했습니다.",color:"error"})})):this.$store.dispatch("showSnackbar",{text:"토픽 정보를 정확히 입력해주세요.",color:"error"}):this.checkBoardId(function(){t.$refs.form.validate()&&0===t.boardIdErrors.length?(t.loading=!0,t.$axios.post("/board",{boardId:t.boardId,boardName:t.boardName,boardType:"T",boardDescription:t.boardDescription||void 0,allGroupAuth:t.allGroupAuth,allowAnonymous:t.allowAnonymous,allowedGroups:t.allowedGroups.map(function(t){return{groupId:t,authType:"READWRITE"}}),useCategory:t.useCategory}).then(function(e){t.loading=!1,t.$store.dispatch("addBoard",{boardId:t.boardId,boardName:t.boardName,boardType:"T",boardDescription:t.boardDescription||void 0,allGroupAuth:t.allGroupAuth,allowAnonymous:t.allowAnonymous}),t.$store.dispatch("addUserBoard",{boardId:t.boardId,boardName:t.boardName,boardType:"T",boardDescription:t.boardDescription||void 0,allGroupAuth:t.allGroupAuth,allowAnonymous:t.allowAnonymous}),t.$emit("resetBoard"),t.$emit("closeDialog"),t.reset(),t.$store.dispatch("showSnackbar",{text:"새로운 토픽을 만들었습니다.",color:"success"})}).catch(function(e){console.log(e.response),t.loading=!1,t.$store.dispatch("showSnackbar",{text:e.response?e.response.data.message:"토픽을 만들지 못했습니다.",color:"error"})})):t.$store.dispatch("showSnackbar",{text:"토픽 정보를 정확히 입력해주세요.",color:"error"})})},deleteBoard:function(){var t=this;confirm("토픽 삭제는 1개월 유예기간 후에 이루어지고,\n삭제 후에는 모든 글에 접근이 불가능합니다. 계속하시겠습니까?")&&this.$axios.put("/board",{boardId:this.boardId,status:"DELETED"}).then(function(e){t.$emit("resetBoard"),t.$emit("closeDialog"),t.$store.dispatch("showSnackbar",{text:"토픽 삭제를 예약하였습니다.",color:"success"})}).catch(function(e){console.log(e.response),t.$store.dispatch("showSnackbar",{text:e.response?e.response.data.message:"토픽을 만들지 못했습니다.",color:"error"})})}},created:function(){var t=this;this.$store.getters.groups?this.groupItems=this.$store.getters.groups:this.$axios.get("/group",{headers:{silent:!0}}).then(function(e){e.data.forEach(function(t){"N"!==t.groupType&&"D"!==t.groupType&&"E"!==t.groupType||(t.groupType="Z")}),t.groupItems=e.data.sort(function(t,e){return t.groupType<e.groupType?-1:t.groupType===e.groupType?0:1});var o=null,r=0;while(r<t.groupItems.length)o!==t.groupItems[r].groupType&&(o?(o=t.groupItems[r].groupType,t.groupItems.splice(r,0,{divider:!0}),r++):o=t.groupItems[r].groupType,t.groupItems.splice(r,0,{header:l[o]}),r++),r++;t.groupItems=t.groupItems.map(function(t){return t.groupName?{text:t.groupName,value:t.groupId}:t}),t.$store.dispatch("setGroups",t.groupItems)}).catch(function(e){t.$store.dispatch("showSnackbar",{text:"그룹 목록을 가져오지 못했습니다.".concat(e&&e.response&&e.response.data?"["+e.response.data.message+"]":"")})}),this.reset()},watch:{boardId:function(){this.boardIdErrors.length>0&&(this.boardIdErrors=[])},board:{handler:function(){this.reset()},deep:!0}}},u=c,d=o("0c7c"),h=Object(d["a"])(u,r,n,!1,null,null,null);e["default"]=h.exports}}]);
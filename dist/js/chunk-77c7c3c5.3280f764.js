(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-77c7c3c5"],{"6d1e":function(e,s,t){"use strict";var r=t("87bb"),a=t.n(r);a.a},"6f6c":function(e,s,t){"use strict";t.r(s);var r=function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("v-container",{class:{"pa-3":e.$vuetify.breakpoint.xsOnly}},[t("v-layout",[t("v-flex",[t("v-form",{ref:"form",attrs:{"lazy-validation":""}},[t("v-text-field",{ref:"userId",attrs:{name:"userId",height:"20",error:e.userIdError,rules:e.userIdRules,label:"아이디",required:"",maxlength:"50",autofocus:""},on:{focus:e.clearError,keydown:function(s){return"keyCode"in s&&e._k(s.keyCode,"enter",13,s.key,"Enter")?null:(s.stopPropagation(),e.focusPassword(s))}},model:{value:e.userId,callback:function(s){e.userId=s},expression:"userId"}}),t("v-text-field",{ref:"password",attrs:{name:"password",height:"20",error:e.passwordError,rules:e.passwordRules,label:"비밀번호",required:"",type:"password"},on:{keydown:function(s){return"keyCode"in s&&e._k(s.keyCode,"enter",13,s.key,"Enter")?null:(s.stopPropagation(),e.signin(s))},focus:e.clearError},model:{value:e.password,callback:function(s){e.password=s},expression:"password"}}),t("v-btn",{attrs:{color:"primary",block:"",loading:e.loading},on:{click:e.signin}},[e._v("로그인")]),t("v-layout",{staticClass:"mt-3",attrs:{row:"","justify-space-between":""}},[t("v-flex",[t("v-checkbox",{staticClass:"small",attrs:{label:"자동 로그인","hide-details":""},model:{value:e.rememberMe,callback:function(s){e.rememberMe=s},expression:"rememberMe"}})],1),t("v-flex",{attrs:{"text-xs-right":""}},[t("router-link",{attrs:{to:"/resetPassword"}},[e._v("비밀번호 찾기")])],1)],1),t("p",{directives:[{name:"show",rawName:"v-show",value:e.message,expression:"message"}],staticClass:"text-xs-center"},[t("span",{staticClass:"error--text"},[e._v(e._s(e.message))])]),t("p",{class:{"text-xs-center":!0,"mt-3":!e.message}},[t(e.$vuetify.breakpoint.xsOnly?"span":"small",{tag:"component"},[t("router-link",{attrs:{to:"/signup"}},[e._v("아직 회원이 아니신가요?")])],1)],1)],1)],1)],1)],1)},a=[];function o(e){let s=e+"=",t=decodeURIComponent(document.cookie),r=t.split(";");for(let a=0;a<r.length;a++){let e=r[a];while(" "===e.charAt(0))e=e.substring(1);if(0===e.indexOf(s))return e.substring(s.length,e.length)}}function i(e,s,t){let r="";if(t){let e=new Date;e.setTime(e.getTime()+24*t*60*60*1e3),r="; expires="+e.toUTCString()}document.cookie=e+"="+(s||"")+r+"; path=/"}var n={name:"Signin",data:()=>({loading:!1,message:null,userIdError:!1,passwordError:!1,userId:"",password:"",rememberMe:!1,userIdRules:[e=>!!e||"아이디를 입력해주세요."],passwordRules:[e=>!!e||"비밀번호를 입력해주세요."]}),created(){this.loading=!0,this.$axios({method:"POST",url:"/refresh",headers:{silent:!0}}).then(e=>{this.loading=!1,this.$store.dispatch("setUserId",e.data.userId),this.$store.dispatch("setToken",!0);const s=e.data.redirectTo;if((e.data.imminent||e.data.needEmail)&&this.$store.dispatch("updateAuthInformation",{imminent:e.data.imminent,needEmail:e.data.needEmail}),s)"/auth"===s&&o("authRequirement")&&o("authRequirement")>=this.$moment().format("YMMDD")?this.$router.push(decodeURIComponent(window.location.search.replace(new RegExp("^(?:.*[&\\?]"+encodeURIComponent("redirectTo").replace(/[.+*]/g,"\\$&")+"(?:\\=([^&]*))?)?.*$","i"),"$1"))||"/"):this.$router.push(s+window.location.search);else{const e=decodeURIComponent(window.location.search.replace(new RegExp("^(?:.*[&\\?]"+encodeURIComponent("redirectTo").replace(/[.+*]/g,"\\$&")+"(?:\\=([^&]*))?)?.*$","i"),"$1"));this.$router.push("/index"!==e&&"/signin"!==e&&""!==e?e:"/")}}).catch(e=>{this.loading=!1,o("userId")&&(this.userId=o("userId")),e.response&&e.response.data?"로그인 정보가 없습니다."!==e.response.data.message&&(this.message=e.response.data.message):this.message="서버에 접속할 수 없습니다. 인터넷 연결을 확인해주세요.",this.$store.dispatch("setToken",!1)})},watch:{userId(){this.userIdError&&(this.userIdError=!1),this.message&&(this.message=null)},password(){this.passwordError&&(this.passwordError=!1),this.message&&(this.message=null)}},methods:{clearError(){this.$refs.form.resetValidation(),this.message=null},signin(){if(this.$refs.form.validate()){if(!this.userId||!this.password||""===this.userId||""===this.password)return this.message="아이디와 비밀번호를 입력해주세요.",!1;i("userId",this.userId,30),this.message=null,this.userIdError=!1,this.passwordError=!1,this.loading=!0,this.$axios.post("/signin",{userId:this.userId,password:this.password,rememberMe:this.rememberMe},{headers:{silent:!0}}).then(e=>{this.$store.dispatch("setToken",!0),this.$store.dispatch("setUserId",this.userId);const s=e.data.redirectTo;if((e.data.imminent||e.data.needEmail)&&this.$store.dispatch("updateAuthInformation",{imminent:e.data.imminent,needEmail:e.data.needEmail}),s)"/auth"===s&&o("authRequirement")&&o("authRequirement")>=this.$moment().format("YMMDD")?this.$router.push(decodeURIComponent(window.location.search.replace(new RegExp("^(?:.*[&\\?]"+encodeURIComponent("redirectTo").replace(/[.+*]/g,"\\$&")+"(?:\\=([^&]*))?)?.*$","i"),"$1"))||"/"):this.$router.push(s+window.location.search);else{const e=decodeURIComponent(window.location.search.replace(new RegExp("^(?:.*[&\\?]"+encodeURIComponent("redirectTo").replace(/[.+*]/g,"\\$&")+"(?:\\=([^&]*))?)?.*$","i"),"$1"));this.$router.push("/index"!==e&&"/signin"!==e&&""!==e?e:"/")}this.loading=!1}).catch(e=>{if(this.loading=!1,e.response&&e.response.data){if(e.response.data.target&&this.$refs[e.response.data.target])switch(e.response.data.target){case"userId":this.userIdError=!0,this.$refs.userId.focus();break;case"password":this.passwordError=!0,this.$refs.password.focus();break;default:break}this.message=e.response.data.message}else this.message="서버에 접속할 수 없습니다. 인터넷 연결을 확인해주세요."})}},focusPassword(){""!==this.password?this.signin():this.$refs.password.focus()}}},d=n,l=(t("6d1e"),t("0c7c")),c=Object(l["a"])(d,r,a,!1,null,null,null);s["default"]=c.exports},"87bb":function(e,s,t){}}]);
//# sourceMappingURL=chunk-77c7c3c5.3280f764.js.map
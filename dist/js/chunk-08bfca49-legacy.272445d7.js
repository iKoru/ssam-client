(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-08bfca49"],{"158c":function(t,r,e){"use strict";var o=e("f94a"),a=e.n(o);a.a},5347:function(t,r,e){"use strict";var o=e("c1df"),a=e.n(o),s={data:function(){return{boardTypeItems:{T:"토픽",L:"라운지",D:"아카이브",X:"게시판",E:"전직교사",N:"예비교사"},webUrl:"https://pedagy.com"}},methods:{uuid:function(){var t=function(){return(65536*(1+Math.random())|0).toString(16).substring(1)};return t()+t()+"-"+t()+"-"+t()+"-"+t()+"-"+t()+t()+t()},dataURItoBlob:function(t){var r;r=t.split(",")[0].indexOf("base64")>=0?atob(t.split(",")[1]):unescape(t.split(",")[1]);for(var e=t.split(",")[0].split(":")[1].split(";")[0],o=new Uint8Array(r.length),a=0;a<r.length;a++)o[a]=r.charCodeAt(a);return new Blob([o],{type:e})},timeParser:function(t){return a()(t,"YYYYMMDDHHmmss").fromNow()}}};r["a"]=s},"5d6d":function(t,r,e){"use strict";e.r(r);var o=function(){var t=this,r=t.$createElement,e=t._self._c||r;return t.board?e("v-container",{attrs:{fluid:"","pt-2":""}},[e("v-card",{staticClass:"mb-2",attrs:{flat:""}},[e("v-card-title",{staticClass:"py-2",attrs:{"primary-title":""}},[e("v-layout",{attrs:{column:""}},[e("v-flex",[e("v-layout",{attrs:{row:"","align-center":""}},[e("v-flex",[e("v-layout",{attrs:{row:"","align-center":""}},[e("span",{staticClass:"title cursor-pointer",on:{click:function(r){t.$route.params.documentId||t.$route.path.endsWith("write")?t.$router.push("/"+t.board.boardId):t.openDialog()}}},[t._v(t._s(t.board.boardName))]),t.reservedContents?e("v-tooltip",{staticClass:"cursor-default",attrs:{bottom:"","close-delay":"500"}},[e("v-icon",{staticClass:"ml-1 vertical-align-middle",attrs:{slot:"activator",color:"primary"},slot:"activator"},[t._v("event_note")]),e("span",{domProps:{innerHTML:t._s(t.reservedContents)}})],1):t._e(),t.childBoardItems.length>1?e("span",{staticClass:"ml-2"},[e("v-select",{staticClass:"hideLine dense childBoardSelector mt-0 pt-0",attrs:{id:"childBoardSelector",flat:"",dense:"",items:t.childBoardItems,"item-text":"boardName","item-value":"boardId","single-line":"","hide-details":""},on:{input:t.childBoardChanged},model:{value:t.childBoardId,callback:function(r){t.childBoardId=r},expression:"childBoardId"}})],1):"T"!==t.board.boardType||"topicBest"===t.board.boardId||t.$store.getters.userBoards.some(function(r){return r.boardId===t.board.boardId})?t._e():e("v-btn",{staticClass:"short my-0",attrs:{small:"",depressed:"",color:"accent"},on:{click:t.openDialog}},[t._v("구독")])],1)],1),e("v-spacer"),e("v-btn",{directives:[{name:"show",rawName:"v-show",value:!t.$route.path.endsWith("write")&&!t.$route.path.endsWith("edit")&&("notice"!==t.$route.params.boardId||t.board&&t.board.isOwner)&&("loungeBest"!==t.$route.params.boardId&&"topicBest"!==t.$route.params.boardId||t.documentBoardId&&t.$route.params.documentId),expression:"!$route.path.endsWith('write') && !$route.path.endsWith('edit') && ($route.params.boardId !== 'notice' || (board && board.isOwner)) && (($route.params.boardId !== 'loungeBest' && $route.params.boardId !== 'topicBest') || (documentBoardId && $route.params.documentId))"}],staticClass:"ma-0",attrs:{depressed:"",color:"primary",icon:"",small:t.$vuetify.breakpoint.xsOnly},on:{click:t.moveToWriteDocument}},[e("v-icon",{attrs:{small:""}},[t._v("edit")])],1)],1)],1),e("v-flex",{directives:[{name:"show",rawName:"v-show",value:t.board.boardDescription,expression:"board.boardDescription"}]},[e("span",{staticClass:"caption"},[t._v("\n            "+t._s(t.board.boardDescription)+"\n            "),e("v-icon",{staticClass:"vertical-align-middle",attrs:{small:""},on:{click:t.openDialog}},[t._v("info")])],1)])],1)],1)],1),e("v-card",{class:{"my-3":t.$route.path.endsWith("write")||t.$route.path.endsWith("edit")},attrs:{flat:""}},[e("router-view",{attrs:{board:t.board,documentBoardId:t.documentBoardId},on:{"update:documentBoardId":function(r){t.documentBoardId=r},"update:document-board-id":function(r){t.documentBoardId=r}}})],1),e("v-card",{directives:[{name:"show",rawName:"v-show",value:!t.$route.path.endsWith("write")&&!t.$route.path.endsWith("edit"),expression:"!$route.path.endsWith('write') && !$route.path.endsWith('edit')"}],attrs:{flat:""}},[e("document-list",{attrs:{board:t.board,hasChildren:!t.board.parentBoardId&&t.childBoardItems.length>1,documentBoardId:t.documentBoardId},on:{write:t.moveToWriteDocument,"update:documentBoardId":function(r){t.documentBoardId=r},"update:document-board-id":function(r){t.documentBoardId=r}}})],1),e("v-dialog",{attrs:{"max-width":"800",lazy:""},model:{value:t.dialog,callback:function(r){t.dialog=r},expression:"dialog"}},[e("board-information",{attrs:{board:t.selected},on:{closeDialog:t.closeDialog}})],1)],1):t._e()},a=[],s=e("a34a"),n=e.n(s),d=e("713b"),i=e("41cb"),c=e("5347");function u(t,r,e,o,a,s,n){try{var d=t[s](n),i=d.value}catch(c){return void e(c)}d.done?r(i):Promise.resolve(i).then(o,a)}function h(t){return function(){var r=this,e=arguments;return new Promise(function(o,a){var s=t.apply(r,e);function n(t){u(s,o,a,n,d,"next",t)}function d(t){u(s,o,a,n,d,"throw",t)}n(void 0)})}}var p={M:"전공",G:"학년",N:"일반",R:"지역",Z:"인증"},l={name:"Board",data:function(){return{board:void 0,writeButton:!0,childBoardId:null,dialog:!1,selected:null,userAuthItems:{N:"예비교사",A:"인증",E:"전직교사",D:"인증제한"},groupItems:[],allGroupAuthItems:{READWRITE:"전체구독허용",READONLY:"읽기공개",NONE:"비공개"},documentBoardId:null}},props:["boardId"],mixins:[c["a"]],components:{DocumentList:function(){return e.e("chunk-11693ce8").then(e.bind(null,"3497"))},BoardInformation:function(){return e.e("chunk-2d21ddd6").then(e.bind(null,"d2b4"))}},computed:{childBoardItems:function(){var t=this;if(this.board.parentBoardId){var r=this.$store.getters.boards.filter(function(r){return r.parentBoardId===t.board.parentBoardId&&r.boardId!==t.boardId});return r.splice(0,0,this.$store.getters.boards.find(function(r){return r.boardId===t.board.parentBoardId})),r.splice(0,0,{boardId:null,boardName:this.childBoardLabel}),r}var e=this.$store.getters.boards.filter(function(r){return r.parentBoardId===t.boardId});return e.splice(0,0,{boardId:null,boardName:this.childBoardLabel}),e},childBoardLabel:function(){return(this.board.parentBoardId?"관련 ":"하위 ")+this.boardTypeItems[this.board.boardType]},reservedContents:function(){var t=this;if(this.board&&this.board.reservedContents){var r=this.board.reservedContents,e=this.$moment(this.board.reservedDate,"YYYYMMDD").format("Y.M.D 이후 아래와 같이 변경될 예정입니다.<br>");for(var o in r)switch(o){case"boardName":e+="".concat(this.boardTypeItems[this.board.boardType]," 이름 : ").concat(r[o],"<br>");break;case"boardDescription":e+="".concat(this.boardTypeItems[this.board.boardType]," 설명 : ").concat(r[o],"<br>");break;case"allowAnonymous":e+="익명글 : ".concat(r[o]?"허용":"비허용","<br>");break;case"useCategory":e+="카테고리 : ".concat(r[o]?"사용":"미사용","<br>");break;case"allGroupAuth":e+="".concat(this.boardTypeItems[this.board.boardType]," 공개/비공개 : ").concat(this.allGroupAuthItems[r[o]],"<br>");break;case"ownerNickName":e+="".concat(this.boardTypeItems[this.board.boardType],"지기 : ").concat(r[o],"<br>");break;case"auth":e+="구독(글쓰기) 권한 : ".concat(r[o].filter(function(r){return t.groupItems.some(function(t){return t.value===r.groupId})}).map(function(r){return t.groupItems.find(function(t){return t.value===r.groupId}).text+("INSERT"===r.command?" 추가":"DELETE"===r.command?" 삭제":"")}).join(", "),"<br>");break;case"status":e+="DELETED"===r[o]?"<b>".concat(this.boardTypeItems[this.board.boardType]," 삭제 예정</b><br>"):"";break}return e}return null}},methods:{moveToWriteDocument:function(){var t=this,r=this.board,e=this.childBoardItems;if("loungeBest"!==r.boardId&&"topicBest"!==r.boardId||!this.documentBoardId||(r=this.$store.getters.boards.find(function(r){return r.boardId===t.documentBoardId}),r||(r=this.board),r.parentBoardId?(e=this.$store.getters.boards.filter(function(r){return r.parentBoardId===t.board.parentBoardId&&r.boardId!==t.boardId}),e.splice(0,0,this.$store.getters.boards.find(function(r){return r.boardId===t.board.parentBoardId})),e.splice(0,0,{boardId:null,boardName:this.childBoardLabel})):(e=this.$store.getters.boards.filter(function(r){return r.parentBoardId===t.boardId}),e.splice(0,0,{boardId:null,boardName:this.childBoardLabel}))),!r.parentBoardId&&e.length>1){var o=this.$store.getters.profile,a=this.$store.getters.userBoards.find(function(t){return t.boardId===r.boardId}),s=this.$store.getters.boards.filter(function(e){return e.parentBoardId===r.boardId&&e.statusAuth.write.includes(o.auth)&&("T"===r.boardType?a&&(!a.writeRestrictDate||t.$moment(a.writeRestrictDate,"YYYYMMDD").isBefore(t.$moment())):e.allowedGroups.some(function(t){return t===o.region||t===o.major||t===o.grade||o.groups.includes(t)})&&(!a||!a.writeRestrictDate||t.$moment(a.writeRestrictDate,"YYYYMMDD").isBefore(t.$moment())))});s.length>0?(this.$router.push("/".concat(s[0].boardId,"/write")),this.$store.dispatch("showSnackbar",{text:"글을 쓸 수 있는 ".concat(s[0].boardName,"에 작성됩니다."),color:"info"})):"T"===this.board.boardType?this.$store.dispatch("showSnackbar",{text:"글을 쓸 토픽을 선택하여 구독해주세요",color:"info"}):(s=this.$store.getters.boards.filter(function(t){return t.parentBoardId===r.boardId&&t.statusAuth.write.includes(o.auth)}),0===s.length?this.$store.dispatch("showSnackbar",{text:"인증 후에 글을 쓸 수 있습니다.",color:"info"}):(s=s.filter(function(t){return t.allowedGroups.some(function(t){return t===o.region||t===o.major||t===o.grade||o.groups.includes(t)})}),0===s.length?this.$store.dispatch("showSnackbar",{text:"현재 소속된 ".concat(this.boardTypeItems[r.boardType],"가 없습니다. ").concat(this.$vuetify.breakpoint.xsOnly?"학년, 전공을 지정해주세요.":"내 계정정보에서 학년, 전공을 지정해주세요."),color:"info"}):this.$store.dispatch("showSnackbar",{text:"현재 ".concat(s[0].boardName,"에 글쓰기가 제한되어있습니다."),color:"info"})))}else{var n=this.$store.getters.profile;if(r.statusAuth.write.includes(n.auth))if("T"===r.boardType)if(this.$store.getters.userBoards.some(function(t){return t.boardId===r.boardId})){var d=this.$store.getters.userBoards.find(function(t){return t.boardId===r.boardId});!d.writeRestrictDate||this.$moment(d.writeRestrictDate,"YYYYMMDD").isBefore(this.$moment())?this.$router.push("/".concat(r.boardId,"/write")):this.$store.dispatch("showSnackbar",{text:"글쓰기가 ".concat(this.$moment(d.writeRestrictDate,"YYYYMMDD").format("Y/M/D"),"까지 제한되었습니다.")})}else"READWRITE"===r.allGroupAuth||r.allowedGroups.some(function(t){return t===n.region||t===n.major||t===n.grade||n.groups.includes(t)})?this.$axios.post("/user/board",{boardId:r.boardId}).then(function(e){t.$store.dispatch("addUserBoard",Object.assign({},r)),t.$store.dispatch("showSnackbar",{text:"".concat(r.boardName," 토픽을 구독하였습니다."),color:"info"}),t.$router.push("/".concat(r.boardId,"/write"))}).catch(function(r){console.log(r),t.$store.dispatch("showSnackbar",{text:"글을 쓰기 위한 구독을 하지 못했습니다.".concat(r&&r.response&&r.response.data?"["+r.response.data.message+"]":""),color:"error"})}):this.$store.dispatch("showSnackbar",{text:"내가 구독할 수 없는 토픽입니다.",color:"info"});else if("READWRITE"===r.allGroupAuth||r.allowedGroups.some(function(t){return t===n.region||t===n.major||t===n.grade||n.groups.includes(t)}))if(this.$store.getters.userBoards.some(function(t){return t.boardId===r.boardId})){var i=this.$store.getters.userBoards.find(function(t){return t.boardId===r.boardId});!i.writeRestrictDate||this.$moment(i.writeRestrictDate,"YYYYMMDD").isBefore(this.$moment())?this.$router.push("/".concat(r.boardId,"/write")):this.$store.dispatch("showSnackbar",{text:"글쓰기가 ".concat(this.$moment(i.writeRestrictDate,"YYYYMMDD").format("Y/M/D"),"까지 제한되었습니다.")})}else this.$router.push("/".concat(r.boardId,"/write"));else this.$store.dispatch("showSnackbar",{text:"현재 소속된 ".concat(this.boardTypeItems[r.boardType],"가 아닙니다."),color:"info"});else this.$store.dispatch("showSnackbar",{text:"".concat(r.statusAuth.write.map(function(r){return t.userAuthItems[r]}).join(", "),"회원만 글을 쓸 수 있습니다."),color:"info"})}},getBoard:function(){var t=h(n.a.mark(function t(r){var e;return n.a.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.$axios.get("/board?boardId=".concat(r));case 3:e=t.sent,t.next=11;break;case 6:return t.prev=6,t.t0=t["catch"](0),console.log(t.t0),this.$store.dispatch("showSnackbar",{text:"".concat(t.t0&&t.t0.response&&t.t0.response.data&&t.t0.response.data.message||"게시판 정보를 가져오지 못했습니다."),color:"error"}),t.abrupt("return",!1);case 11:return this.setBoard(e.data),t.abrupt("return",!0);case 13:case"end":return t.stop()}},t,this,[[0,6]])}));function r(r){return t.apply(this,arguments)}return r}(),writeDocument:function(){this.$router.push("/".concat(this.boardId,"/write"))},setBoard:function(t){this.board=t,document.title=t.boardName?t.boardName+" - Pedagy":"Pedagy",this.$store.dispatch("switchBoardType","T"===this.board.boardType?"T":"L")},childBoardChanged:function(){this.childBoardId&&this.$router.push("/"+this.childBoardId)},subscribe:function(){var t=this;this.$axios.post("/user/board",{boardId:this.board.boardId}).then(function(r){t.$store.dispatch("addUserBoard",Object.assign({},t.board)),t.$store.dispatch("showSnackbar",{text:"".concat(t.board.boardName," 토픽을 구독하였습니다! 구독 기념 글을 작성해보세요."),color:"success"})}).catch(function(r){console.log(r),t.$store.dispatch("showSnackbar",{text:"".concat(r&&r.response&&r.response.data&&r.response.data.message||"".concat(t.board.boardName," 구독을 하지 못했습니다.")),color:"error"})})},openDialog:function(){var t=this;this.selected&&this.selected.boardId===this.board.boardId?this.dialog=!0:this.$axios.get("/board",{params:{boardId:this.board.boardId}}).then(function(r){t.selected=r.data,t.dialog=!0}).catch(function(r){console.log(r),t.$store.dispatch("showSnackbar",{text:"정보를 가져오지 못했습니다.".concat(r&&r.response&&r.response.data?"["+r.response.data.message+"]":""),color:"error"})})},closeDialog:function(){this.dialog=!1}},created:function(){var t=this;this.$emit("update:layout",d["a"]),this.$store.dispatch("setColumnType","HIDE_SM"),this.$store.getters.groups?this.groupItems=this.$store.getters.groups:this.$axios.get("/group",{headers:{silent:!0}}).then(function(r){r.data.forEach(function(t){"N"!==t.groupType&&"D"!==t.groupType&&"E"!==t.groupType||(t.groupType="Z")}),t.groupItems=r.data.sort(function(t,r){return t.groupType<r.groupType?-1:t.groupType===r.groupType?0:1});var e=null,o=0;while(o<t.groupItems.length)e!==t.groupItems[o].groupType&&(e?(e=t.groupItems[o].groupType,t.groupItems.splice(o,0,{divider:!0}),o++):e=t.groupItems[o].groupType,t.groupItems.splice(o,0,{header:p[e]}),o++),o++;t.groupItems=t.groupItems.map(function(t){return t.groupName?{text:t.groupName,value:t.groupId}:t}),t.$store.dispatch("setGroups",t.groupItems)}).catch(function(r){t.$store.dispatch("showSnackbar",{text:"그룹 목록을 가져오지 못했습니다.".concat(r&&r.response&&r.response.data?"["+r.response.data.message+"]":"")})})},beforeRouteUpdate:function(){var t=h(n.a.mark(function t(r,e,o){var a=this;return n.a.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(!this.$store.getters.boards.some(function(t){return t.boardId===r.params.boardId})){t.next=7;break}this.setBoard(this.$store.getters.boards.find(function(t){return t.boardId===r.params.boardId})),this.$store.dispatch("setColumnType","HIDE_SM"),this.$nextTick(function(){return a.childBoardId=null}),o(),t.next=16;break;case 7:return t.next=9,this.getBoard(r.params.boardId);case 9:if(!t.sent){t.next=15;break}this.$store.dispatch("setColumnType","HIDE_SM"),this.$nextTick(function(){return a.childBoardId=null}),o(),t.next=16;break;case 15:o("/error?error=404");case 16:case"end":return t.stop()}},t,this)}));function r(r,e,o){return t.apply(this,arguments)}return r}(),beforeRouteEnter:function(){var t=h(n.a.mark(function t(r,e,o){var a;return n.a.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(!i["a"].app.$store.getters.boards.some(function(t){return t.boardId===r.params.boardId})){t.next=4;break}o(function(t){t.setBoard(i["a"].app.$store.getters.boards.find(function(t){return t.boardId===r.params.boardId}))}),t.next=15;break;case 4:return t.prev=4,t.next=7,i["a"].app.$axios.get("/board",{params:{boardId:r.params.boardId}});case 7:a=t.sent,t.next=14;break;case 10:return t.prev=10,t.t0=t["catch"](4),o("/error?error="+(t.t0.response&&t.t0.response.status||"404")),t.abrupt("return");case 14:o(function(t){t.setBoard(a.data)});case 15:case"end":return t.stop()}},t,this,[[4,10]])}));function r(r,e,o){return t.apply(this,arguments)}return r}()},b=l,m=(e("158c"),e("0c7c")),f=Object(m["a"])(b,o,a,!1,null,null,null);r["default"]=f.exports},f94a:function(t,r,e){}}]);
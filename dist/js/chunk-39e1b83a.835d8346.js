(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-39e1b83a","chunk-452d4511"],{"113b":function(t,e,o){"use strict";o.r(e);var n=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("v-card",{attrs:{flat:""}},[o("v-card-title",{attrs:{"primary-title":""}},[o("v-layout",{attrs:{column:""}},[o("v-layout",{attrs:{row:"",wrap:""}},[t.lounges.length>0?o("v-flex",{class:{"mt-5":t.$vuetify.breakpoint.xsOnly,"pr-2":t.$vuetify.breakpoint.mdAndUp,"ml-auto":!0},attrs:{xs12:"",sm6:"",lg5:""}},[o("v-layout",{staticClass:"titleRow",attrs:{row:""}},[o("span",{staticClass:"title"},[t._v("라운지")])]),o("span",{staticClass:"ellipsis subtitle"},[t._v("신고로 인해 쓰기/읽기가 제한된 라운지만 보여집니다.")]),o("v-divider",{staticClass:"my-3"}),o("v-list",{attrs:{dense:""}},t._l(t.lounges,function(e){return o("v-list-tile",{key:e.boardId},[o("v-layout",{attrs:{row:""}},[o("v-flex",{staticClass:"ellipsis"},[o("div",{staticClass:"vertical-center ellipsis"},[t._v("\n                    "+t._s(e.boardName)+"\n                    "),e.isOwner?o("v-icon",{attrs:{title:"라운지지기"}},[t._v("person")]):t._e()],1)]),o("v-spacer"),e.writeRestrictDate?o("v-tooltip",{attrs:{bottom:""}},[o("v-chip",{attrs:{slot:"activator",color:"red","text-color":"white",small:""},slot:"activator"},[t._v("쓰기제한")]),o("span",[t._v(t._s(t.$moment(e.writeRestrictDate,"YYYYMMDD").format("Y년 M월 D일까지")))])],1):t._e(),e.readRestrictDate?o("v-tooltip",{attrs:{bottom:""}},[o("v-chip",{attrs:{slot:"activator",color:"red","text-color":"white",small:""},slot:"activator"},[t._v("읽기제한")]),o("span",[t._v(t._s(t.$moment(e.readRestrictDate,"YYYYMMDD").format("Y년 M월 D일까지")))])],1):t._e()],1)],1)}),1)],1):t._e(),o("v-flex",{class:{"pl-2":t.$vuetify.breakpoint.mdAndUp,"mr-auto":!0,"ml-auto":0===t.lounges.length},attrs:{xs12:"",sm6:t.lounges.length>0,sm9:0===t.lounges.length,lg5:t.lounges.length>0,lg8:0===t.lounges.length}},[o("v-layout",{class:{titleRow:!0,"mb-2":0===t.lounges.length},attrs:{row:""}},[o("span",{class:{title:t.lounges.length>0,headline:0===t.lounges.length}},[t._v("토픽")]),o("v-spacer"),o("v-btn",{class:{"my-0":!0,"ml-0":!0,"mr-0":t.$vuetify.breakpoint.xsOnly},attrs:{id:"createTopic",small:"",color:"accent",title:"새로운 토픽을 만들 수 있습니다."},on:{click:function(e){t.openDialog(null)}}},[t._v("토픽만들기")]),o("br")],1),o("span",{staticClass:"ellipsis subtitle"},[t._v("드래그하여 순서를 변경할 수 있습니다.")]),o("v-divider",{staticClass:"my-3"}),t.topics.length>0?o("draggable",{model:{value:t.topics,callback:function(e){t.topics=e},expression:"topics"}},[o("transition-group",t._l(t.topics,function(e,n){return o("v-layout",{key:e.boardId,staticClass:"cursor-move align-center",attrs:{row:""}},[o("v-flex",{staticClass:"ellipsis align-center"},[o("div",{staticClass:"align-center ellipsis"},[t._v("\n                    "+t._s(e.boardName)+"\n                    "),e.isOwner?o("v-icon",{staticClass:"vertical-align-middle",attrs:{title:"토픽지기"}},[t._v("person")]):t._e()],1)]),o("v-spacer"),e.readRestrictDate||e.writeRestrictDate?[e.writeRestrictDate?o("v-tooltip",{attrs:{bottom:""}},[o("v-chip",{attrs:{slot:"activator",color:"red","text-color":"white",small:""},slot:"activator"},[t._v("쓰기제한")]),o("span",[t._v(t._s(t.$moment(e.writeRestrictDate,"YYYYMMDD").format("Y년 M월 D일까지")))])],1):t._e(),e.readRestrictDate?o("v-tooltip",{attrs:{bottom:""}},[o("v-chip",{attrs:{slot:"activator",color:"red","text-color":"white",small:""},slot:"activator"},[t._v("읽기제한")]),o("span",[t._v(t._s(t.$moment(e.readRestrictDate,"YYYYMMDD").format("Y년 M월 D일까지")))])],1):t._e()]:[e.isOwner?o("v-btn",{staticClass:"mx-0",attrs:{flat:"",primary:"",small:"",title:"내가 토픽지기인 토픽은 구독해제할 수 없습니다."},on:{click:function(o){t.openDialog(e)}}},[t._v("토픽관리")]):o("v-btn",{staticClass:"mx-0",attrs:{flat:"",primary:"",small:""},on:{click:function(e){t.removeItem(n)}}},[t._v("구독해제")])]],2)}),1)],1):o("v-layout",[o("span",[t._v("아직 구독하고 있는 토픽이 없네요.\n              "),o("br"),o("router-link",{staticClass:"primary--text",attrs:{to:"/searchBoard"}},[t._v("새로운 토픽")]),t._v("을 구독해보세요!\n            ")],1)])],1)],1)],1),o("v-dialog",{attrs:{id:"topicCreatorDialog",fullscreen:t.$vuetify.breakpoint.xsOnly,transition:t.$vuetify.breakpoint.xsOnly?"dialog-bottom-transition":"fade-transition",lazy:"",scrollable:"","max-width":"700px"},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[o("topic-creator",{attrs:{board:t.editItem},on:{closeDialog:t.closeDialog,resetBoard:t.resetBoard}})],1)],1),o("v-card-actions",{attrs:{"pa-3":""}},[o("v-layout",{attrs:{row:t.$vuetify.breakpoint.smAndUp,column:t.$vuetify.breakpoint.xsOnly,wrap:"","text-xs-right":""}},[o("v-btn",{staticClass:"mt-2",attrs:{flat:""},on:{click:t.reset}},[t._v("초기화")]),o("v-spacer"),o("v-btn",{staticClass:"mt-2",attrs:{color:"primary",loading:t.loading},on:{click:t.save}},[t._v("저장")])],1)],1)],1)},r=[],i=o("1516"),a=o.n(i),s=o("f94d"),l={name:"MyBoard",components:{draggable:a.a,TopicCreator:s["default"]},data:function(){return{loading:!1,dialog:!1,topics:[],editItem:{}}},methods:{reset:function(){this.topics=JSON.parse(JSON.stringify(this.originalTopics))},isDirty:function(){if(this.topics.length!==this.originalTopics.length)return!0;var t=0;while(t<this.topics.length){if(this.topics[t].boardId!==this.originalTopics[t].boardId)return!0;t++}return!1},save:function(){var t=this;this.isDirty()?(this.loading=!0,this.$axios.put("/user/board",{boards:this.topics.map(function(t,e){return{orderNumber:e+1,boardId:t.boardId}})}).then(function(e){t.loading=!1,t.$store.dispatch("setUserBoards",JSON.parse(JSON.stringify(t.topics)).concat(t.userBoards.filter(function(t){return"T"!==t.boardType}))),t.$store.dispatch("showSnackbar",{text:"변경 내용을 반영하였습니다.",color:"success"})}).catch(function(e){console.log(e),t.loading=!1,t.$store.dispatch("showSnackbar",{text:e.response?e.response.data.message||"변경 내용을 반영하지 못했습니다.":"변경내용을 반영하지 못했습니다.",color:"error"})})):this.$store.dispatch("showSnackbar",{text:"변경된 내용이 없습니다.",color:"info"})},removeItem:function(t){var e=this,o=this.topics[t];o&&this.$axios.delete("/user/board/"+o.boardId).then(function(n){e.$store.dispatch("removeUserBoard",o.boardId),e.topics.splice(t,1),e.$store.dispatch("showSnackbar",{text:"토픽을 구독 해제하였습니다.",color:"success"})}).catch(function(t){console.log(t.response),e.$store.dispatch("showSnackbar",{text:t.response&&t.response.data.message||"토픽을 구독 해제하지 못했습니다.",color:"error"})})},openDialog:function(t){var e=this;if(null===t){if("A"!==this.$store.getters.profile.auth)return void this.$store.dispatch("showSnackbar",{text:"인증을 받은 회원만 토픽을 만들 수 있습니다.",color:"error"});this.editItem=null,this.dialog=!0}else t&&this.$axios.get("/board",{params:{boardId:t.boardId}}).then(function(t){e.editItem=t.data,e.dialog=!0}).catch(function(t){console.log(t.response),e.$store.dispatch("showSnackbar",{text:t.response&&t.response.data.message||"토픽 정보를 가져오지 못했습니다.",color:"error"})})},closeDialog:function(){this.dialog=!1},resetBoard:function(){var t=this;this.$axios.get("/user/board").then(function(e){t.$store.dispatch("setUserBoards",e.data),t.$nextTick(t.reset)}).catch(function(e){console.log(e),t.$store.dispatch("showSnackbar",{text:e.response&&e.response.data.message||"구독 토픽 목록을 불러오지 못했습니다.",color:"error"})})}},computed:{originalTopics:function(){var t=this;return this.userBoards.filter(function(t){return"T"===t.boardType}).map(function(e){return e.readRestrictDate&&t.$moment(e.readRestrictDate,"YYYYMMDD").isValid()&&!t.$moment(e.readRestrictDate,"YYYYMMDD").isBefore(t.$moment())||delete e.readRestrictDate,e.writeRestrictDate&&t.$moment(e.writeRestrictDate,"YYYYMMDD").isValid()&&!t.$moment(e.writeRestrictDate,"YYYYMMDD").isBefore(t.$moment())||delete e.writeRestrictDate,e})},lounges:function(){var t=this;return this.userBoards.map(function(e){return e.readRestrictDate&&t.$moment(e.readRestrictDate,"YYYYMMDD").isValid()&&!t.$moment(e.readRestrictDate,"YYYYMMDD").isBefore(t.$moment())||delete e.readRestrictDate,e.writeRestrictDate&&t.$moment(e.writeRestrictDate,"YYYYMMDD").isValid()&&!t.$moment(e.writeRestrictDate,"YYYYMMDD").isBefore(t.$moment())||delete e.writeRestrictDate,e}).filter(function(t){return"T"!==t.boardType&&(t.writeRestrictDate||t.readRestrictDate)})},userBoards:function(){return this.$store.getters.userBoards}},mounted:function(){this.reset()},watch:{userBoards:function(){this.reset()},dialog:function(t){document.body.style.position=t?"fixed":"initial"}},render:function(t){return t("myBoard",{attrs:{id:"app"}},this.draggable)}},c=l,d=(o("1917"),o("0c7c")),u=Object(d["a"])(c,n,r,!1,null,null,null);e["default"]=u.exports},1516:function(t,e,o){"use strict";"function"===typeof Symbol&&Symbol.iterator;var n=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var o=arguments[e];for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(t[n]=o[n])}return t};function r(t){if(Array.isArray(t)){for(var e=0,o=Array(t.length);e<t.length;e++)o[e]=t[e];return o}return Array.from(t)}(function(){function e(t,e,o){return void 0==o?t:(t=null==t?{}:t,t[e]=o,t)}function i(t){function o(t){t.parentElement.removeChild(t)}function i(t,e,o){var n=0===o?t.children[0]:t.children[o-1].nextSibling;t.insertBefore(e,n)}function a(t,e){return t.map(function(t){return t.elm}).indexOf(e)}function s(t,e,o){if(!t)return[];var n=t.map(function(t){return t.elm}),i=[].concat(r(e)).map(function(t){return n.indexOf(t)});return o?i.filter(function(t){return-1!==t}):i}function l(t,e){var o=this;this.$nextTick(function(){return o.$emit(t.toLowerCase(),e)})}function c(t){var e=this;return function(o){null!==e.realList&&e["onDrag"+t](o),l.call(e,t,o)}}var d=["Start","Add","Remove","Update","End"],u=["Choose","Sort","Filter","Clone"],h=["Move"].concat(d,u).map(function(t){return"on"+t}),p=null,f={options:Object,list:{type:Array,required:!1,default:null},value:{type:Array,required:!1,default:null},noTransitionOnDrag:{type:Boolean,default:!1},clone:{type:Function,default:function(t){return t}},element:{type:String,default:"div"},move:{type:Function,default:null},componentData:{type:Object,required:!1,default:null}},m={name:"draggable",props:f,data:function(){return{transitionMode:!1,noneFunctionalComponentMode:!1,init:!1}},render:function(t){var o=this.$slots.default;if(o&&1===o.length){var n=o[0];n.componentOptions&&"transition-group"===n.componentOptions.tag&&(this.transitionMode=!0)}var i=0,a=o,s=this.$slots,l=s.header,c=s.footer;l&&(i=l.length,a=a?[].concat(r(l),r(a)):[].concat(r(l))),c&&(a=a?[].concat(r(a),r(c)):[].concat(r(c))),this.headerOffset=i;var d=null,u=function(t,o){d=e(d,t,o)};if(u("attrs",this.$attrs),this.componentData){var h=this.componentData,p=h.on,f=h.props;u("on",p),u("props",f)}return t(this.element,d,a)},mounted:function(){var e=this;if(this.noneFunctionalComponentMode=this.element.toLowerCase()!==this.$el.nodeName.toLowerCase(),this.noneFunctionalComponentMode&&this.transitionMode)throw new Error("Transition-group inside component is not supported. Please alter element value or remove transition-group. Current element value: "+this.element);var o={};d.forEach(function(t){o["on"+t]=c.call(e,t)}),u.forEach(function(t){o["on"+t]=l.bind(e,t)});var r=n({},this.options,o,{onMove:function(t,o){return e.onDragMove(t,o)}});!("draggable"in r)&&(r.draggable=">*"),this._sortable=new t(this.rootContainer,r),this.computeIndexes()},beforeDestroy:function(){void 0!==this._sortable&&this._sortable.destroy()},computed:{rootContainer:function(){return this.transitionMode?this.$el.children[0]:this.$el},isCloning:function(){return!!this.options&&!!this.options.group&&"clone"===this.options.group.pull},realList:function(){return this.list?this.list:this.value}},watch:{options:{handler:function(t){for(var e in t)-1==h.indexOf(e)&&this._sortable.option(e,t[e])},deep:!0},realList:function(){this.computeIndexes()}},methods:{getChildrenNodes:function(){if(this.init||(this.noneFunctionalComponentMode=this.noneFunctionalComponentMode&&1==this.$children.length,this.init=!0),this.noneFunctionalComponentMode)return this.$children[0].$slots.default;var t=this.$slots.default;return this.transitionMode?t[0].child.$slots.default:t},computeIndexes:function(){var t=this;this.$nextTick(function(){t.visibleIndexes=s(t.getChildrenNodes(),t.rootContainer.children,t.transitionMode)})},getUnderlyingVm:function(t){var e=a(this.getChildrenNodes()||[],t);if(-1===e)return null;var o=this.realList[e];return{index:e,element:o}},getUnderlyingPotencialDraggableComponent:function(t){var e=t.__vue__;return e&&e.$options&&"transition-group"===e.$options._componentTag?e.$parent:e},emitChanges:function(t){var e=this;this.$nextTick(function(){e.$emit("change",t)})},alterList:function(t){if(this.list)t(this.list);else{var e=[].concat(r(this.value));t(e),this.$emit("input",e)}},spliceList:function(){var t=arguments,e=function(e){return e.splice.apply(e,t)};this.alterList(e)},updatePosition:function(t,e){var o=function(o){return o.splice(e,0,o.splice(t,1)[0])};this.alterList(o)},getRelatedContextFromMoveEvent:function(t){var e=t.to,o=t.related,r=this.getUnderlyingPotencialDraggableComponent(e);if(!r)return{component:r};var i=r.realList,a={list:i,component:r};if(e!==o&&i&&r.getUnderlyingVm){var s=r.getUnderlyingVm(o);if(s)return n(s,a)}return a},getVmIndex:function(t){var e=this.visibleIndexes,o=e.length;return t>o-1?o:e[t]},getComponent:function(){return this.$slots.default[0].componentInstance},resetTransitionData:function(t){if(this.noTransitionOnDrag&&this.transitionMode){var e=this.getChildrenNodes();e[t].data=null;var o=this.getComponent();o.children=[],o.kept=void 0}},onDragStart:function(t){this.context=this.getUnderlyingVm(t.item),t.item._underlying_vm_=this.clone(this.context.element),p=t.item},onDragAdd:function(t){this.updateEvenemt(t);var e=t.item._underlying_vm_;if(void 0!==e){o(t.item);var n=this.getVmIndex(t.newIndex);this.spliceList(n,0,e),this.computeIndexes();var r={element:e,newIndex:n};this.emitChanges({added:r})}},onDragRemove:function(t){if(this.updateEvenemt(t),i(this.rootContainer,t.item,t.oldIndex),this.isCloning)o(t.clone);else{var e=this.context.index;this.spliceList(e,1);var n={element:this.context.element,oldIndex:e};this.resetTransitionData(e),this.emitChanges({removed:n})}},onDragUpdate:function(t){this.updateEvenemt(t),o(t.item),i(t.from,t.item,t.oldIndex);var e=this.context.index,n=this.getVmIndex(t.newIndex);this.updatePosition(e,n);var r={element:this.context.element,oldIndex:e,newIndex:n};this.emitChanges({moved:r})},updateEvenemt:function(t){this.updateProperty(t,"newIndex"),this.updateProperty(t,"oldIndex")},updateProperty:function(t,e){t.hasOwnProperty(e)&&(t[e]+=this.headerOffset)},computeFutureIndex:function(t,e){if(!t.element)return 0;var o=[].concat(r(e.to.children)).filter(function(t){return"none"!==t.style["display"]}),n=o.indexOf(e.related),i=t.component.getVmIndex(n),a=-1!=o.indexOf(p);return a||!e.willInsertAfter?i:i+1},onDragMove:function(t,e){var o=this.move;if(!o||!this.realList)return!0;var r=this.getRelatedContextFromMoveEvent(t),i=this.context,a=this.computeFutureIndex(r,t);return n(i,{futureIndex:a}),n(t,{relatedContext:r,draggedContext:i}),o(t,e)},onDragEnd:function(t){this.computeIndexes(),p=null}}};return m}Array.from||(Array.from=function(t){return[].slice.call(t)});var a=o("53fe");t.exports=i(a)})()},1917:function(t,e,o){"use strict";var n=o("5e58"),r=o.n(n);r.a},"53fe":function(t,e,o){var n,r;
/**!
 * Sortable
 * @author	RubaXa   <trash@rubaxa.org>
 * @author	owenm    <owen23355@gmail.com>
 * @license MIT
 */
/**!
 * Sortable
 * @author	RubaXa   <trash@rubaxa.org>
 * @author	owenm    <owen23355@gmail.com>
 * @license MIT
 */
(function(i){"use strict";n=i,r="function"===typeof n?n.call(e,o,e,t):n,void 0===r||(t.exports=r)})(function(){"use strict";if("undefined"===typeof window||!window.document)return function(){throw new Error("Sortable.js requires a window with a document")};var t,e,o,n,r,i,a,s,l,c,d,u,h,p,f,m,v,g,b,y,w,D,x,_,C,I=[],k=!1,T=!1,N=!1,E=[],S=!1,$=!1,A=/\s+/g,Y="Sortable"+(new Date).getTime(),M=window,R=M.document,O=M.parseInt,B=M.setTimeout,P=M.jQuery||M.Zepto,G=M.Polymer,L={capture:!1,passive:!1},X=!!navigator.userAgent.match(/(?:Trident.*rv[ :]?11\.|msie|iemobile)/i),H=!!navigator.userAgent.match(/Edge/i),F=H||X?"cssFloat":"float",U="draggable"in R.createElement("div"),W=function(){if(X)return!1;var t=R.createElement("x");return t.style.cssText="pointer-events:auto","auto"===t.style.pointerEvents}(),V=!1,j=!1,z=Math.abs,q=Math.min,J=[],Z=function(t,e){var o=yt(t),n=O(o.width),r=kt(t,0,e),i=kt(t,1,e),a=r&&yt(r),s=i&&yt(i),l=a&&O(a.marginLeft)+O(a.marginRight)+Xt(r).width,c=s&&O(s.marginLeft)+O(s.marginRight)+Xt(i).width;return"flex"===o.display?"column"===o.flexDirection||"column-reverse"===o.flexDirection?"vertical":"horizontal":r&&("block"===a.display||"flex"===a.display||"table"===a.display||"grid"===a.display||l>=n&&"none"===o[F]||i&&"none"===o[F]&&l+c>n)?"vertical":"horizontal"},K=function(t,e){for(var o=0;o<E.length;o++)if(!E[o].children.length){var n=Xt(E[o]),r=E[o][Y].options.emptyInsertThreshold,i=t>=n.left-r&&t<=n.right+r,a=e>=n.top-r&&e<=n.bottom+r;if(i&&a)return E[o]}},Q=function(t,e,o,n,r){var i=Xt(o),a="vertical"===n?i.left:i.top,s="vertical"===n?i.right:i.bottom,l="vertical"===n?t:e;return a<l&&l<s},tt=function(e,o,n){var r=e===t&&C||Xt(e),i=o===t&&C||Xt(o),a="vertical"===n?r.left:r.top,s="vertical"===n?r.right:r.bottom,l="vertical"===n?r.width:r.height,c="vertical"===n?i.left:i.top,d="vertical"===n?i.right:i.bottom,u="vertical"===n?i.width:i.height;return a===c||s===d||a+l/2===c+u/2},et=function(t,e){if(!t||!t.getBoundingClientRect)return M;var o=t,n=!1;do{if(o.clientWidth<o.scrollWidth||o.clientHeight<o.scrollHeight){var r=yt(o);if(o.clientWidth<o.scrollWidth&&("auto"==r.overflowX||"scroll"==r.overflowX)||o.clientHeight<o.scrollHeight&&("auto"==r.overflowY||"scroll"==r.overflowY)){if(!o||!o.getBoundingClientRect||o===R.body)return M;if(n||e)return o;n=!0}}}while(o=o.parentNode);return M},ot=Mt(function(t,e,o,n){if(e.scroll){var r=o?o[Y]:window,i=e.scrollSensitivity,a=e.scrollSpeed,d=t.clientX,u=t.clientY,h=(window.innerWidth,window.innerHeight,!1);l!==o&&(nt(),s=e.scroll,c=e.scrollFn,!0===s&&(s=et(o,!0),l=s));var p=0,f=s;do{var m,v,g,y,w,D,x,_,C,T=f,N=Xt(T),E=N.top,S=N.bottom,$=N.left,A=N.right,O=N.width,B=N.height;if(T!==M?(m=T.scrollWidth,v=T.scrollHeight,g=yt(T),D=O<m&&("auto"===g.overflowX||"scroll"===g.overflowX),x=B<v&&("auto"===g.overflowY||"scroll"===g.overflowY),_=T.scrollLeft,C=T.scrollTop):(m=R.documentElement.scrollWidth,v=R.documentElement.scrollHeight,g=yt(R.documentElement),D=O<m&&("auto"===g.overflowX||"scroll"===g.overflowX||"visible"===g.overflowX),x=B<v&&("auto"===g.overflowY||"scroll"===g.overflowY||"visible"===g.overflowY),_=R.documentElement.scrollLeft,C=R.documentElement.scrollTop),y=D&&(z(A-d)<=i&&_+O<m)-(z($-d)<=i&&!!_),w=x&&(z(S-u)<=i&&C+B<v)-(z(E-u)<=i&&!!C),!I[p])for(var P=0;P<=p;P++)I[P]||(I[P]={});I[p].vx==y&&I[p].vy==w&&I[p].el===T||(I[p].el=T,I[p].vx=y,I[p].vy=w,clearInterval(I[p].pid),!T||0==y&&0==w||(h=!0,I[p].pid=setInterval(function(){n&&0===this.layer&&ht.active._emulateDragOver(!0);var e=I[this.layer].vy?I[this.layer].vy*a:0,o=I[this.layer].vx?I[this.layer].vx*a:0;"function"===typeof c&&"continue"!==c.call(r,o,e,t,b,I[this.layer].el)||(I[this.layer].el===M?M.scrollTo(M.pageXOffset+o,M.pageYOffset+e):(I[this.layer].el.scrollTop+=e,I[this.layer].el.scrollLeft+=o))}.bind({layer:p}),24))),p++}while(e.bubbleScroll&&f!==M&&(f=et(f,!1)));k=h}},30),nt=function(){I.forEach(function(t){clearInterval(t.pid)}),I=[]},rt=function(t){function e(t,o){return function(n,r,i,a){var s=n.options.group.name&&r.options.group.name&&n.options.group.name===r.options.group.name;if(null==t&&(o||s))return!0;if(null==t||!1===t)return!1;if(o&&"clone"===t)return t;if("function"===typeof t)return e(t(n,r,i,a),o)(n,r,i,a);var l=(o?n:r).options.group.name;return!0===t||"string"===typeof t&&t===l||t.join&&t.indexOf(l)>-1}}var o={},n=t.group;n&&"object"==typeof n||(n={name:n}),o.name=n.name,o.checkPull=e(n.pull,!0),o.checkPut=e(n.put),o.revertClone=n.revertClone,t.group=o},it=function(e){t&&t.parentNode&&t.parentNode[Y]&&t.parentNode[Y]._computeIsAligned(e)},at=function(t,e){var o=e;while(!o[Y])o=o.parentNode;return t===o},st=function(t,e,o){var n=t.parentNode;while(n&&!n[Y])n=n.parentNode;n&&n[Y][o](Ot(e,{artificialBubble:!0}))},lt=function(){!W&&o&&yt(o,"display","none")},ct=function(){!W&&o&&yt(o,"display","")};R.addEventListener("click",function(t){if(N)return t.preventDefault(),t.stopPropagation&&t.stopPropagation(),t.stopImmediatePropagation&&t.stopImmediatePropagation(),N=!1,!1},!0);var dt,ut=function(e){if(t){var o=K(e.clientX,e.clientY);o&&o[Y]._onDragOver({clientX:e.clientX,clientY:e.clientY,target:o,rootEl:o})}};function ht(t,e){if(!t||!t.nodeType||1!==t.nodeType)throw"Sortable: `el` must be HTMLElement, not "+{}.toString.call(t);this.el=t,this.options=e=Ot({},e),t[Y]=this;var o={group:null,sort:!0,disabled:!1,store:null,handle:null,scroll:!0,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0,draggable:/[uo]l/i.test(t.nodeName)?"li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return Z(t,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(t,e){t.setData("Text",e.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,touchStartThreshold:O(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:!1!==ht.supportPointer&&("PointerEvent"in window||window.navigator&&"msPointerEnabled"in window.navigator),emptyInsertThreshold:5};for(var n in o)!(n in e)&&(e[n]=o[n]);for(var r in rt(e),this)"_"===r.charAt(0)&&"function"===typeof this[r]&&(this[r]=this[r].bind(this));this.nativeDraggable=!e.forceFallback&&U,e.supportPointer?vt(t,"pointerdown",this._onTapStart):(vt(t,"mousedown",this._onTapStart),vt(t,"touchstart",this._onTapStart)),this.nativeDraggable&&(vt(t,"dragover",this),vt(t,"dragenter",this)),E.push(this.el),e.store&&e.store.get&&this.sort(e.store.get(this)||[])}function pt(t,e,o,n){if(t){o=o||R;do{if(">*"===e&&t.parentNode===o||Yt(t,e)||n&&t===o)return t;if(t===o)break}while(t=ft(t))}return null}function ft(t){return t.host&&t!==R&&t.host.nodeType?t.host:t.parentNode}function mt(t){t.dataTransfer&&(t.dataTransfer.dropEffect="move"),t.cancelable&&t.preventDefault()}function vt(t,e,o){t.addEventListener(e,o,L)}function gt(t,e,o){t.removeEventListener(e,o,L)}function bt(t,e,o){if(t&&e)if(t.classList)t.classList[o?"add":"remove"](e);else{var n=(" "+t.className+" ").replace(A," ").replace(" "+e+" "," ");t.className=(n+(o?" "+e:"")).replace(A," ")}}function yt(t,e,o){var n=t&&t.style;if(n){if(void 0===o)return R.defaultView&&R.defaultView.getComputedStyle?o=R.defaultView.getComputedStyle(t,""):t.currentStyle&&(o=t.currentStyle),void 0===e?o:o[e];e in n||-1!==e.indexOf("webkit")||(e="-webkit-"+e),n[e]=o+("string"===typeof o?"":"px")}}function wt(t){var e="";do{var o=yt(t,"transform");o&&"none"!==o&&(e=o+" "+e)}while(t=t.parentNode);return window.DOMMatrix?new DOMMatrix(e):window.WebKitCSSMatrix?new WebKitCSSMatrix(e):window.CSSMatrix?new CSSMatrix(e):void 0}function Dt(t,e,o){if(t){var n=t.getElementsByTagName(e),r=0,i=n.length;if(o)for(;r<i;r++)o(n[r],r);return n}return[]}function xt(t,e,o,r,i,a,s,l,c){t=t||e[Y];var d,u=t.options,h="on"+o.charAt(0).toUpperCase()+o.substr(1);!window.CustomEvent||X||H?(d=R.createEvent("Event"),d.initEvent(o,!0,!0)):d=new CustomEvent(o,{bubbles:!0,cancelable:!0}),d.to=i||e,d.from=a||e,d.item=r||e,d.clone=n,d.oldIndex=s,d.newIndex=l,d.originalEvent=c,e&&e.dispatchEvent(d),u[h]&&u[h].call(t,d)}function _t(t,e,o,n,r,i,a,s){var l,c,d=t[Y],u=d.options.onMove;return!window.CustomEvent||X||H?(l=R.createEvent("Event"),l.initEvent("move",!0,!0)):l=new CustomEvent("move",{bubbles:!0,cancelable:!0}),l.to=e,l.from=t,l.dragged=o,l.draggedRect=n,l.related=r||e,l.relatedRect=i||Xt(e),l.willInsertAfter=s,l.originalEvent=a,t.dispatchEvent(l),u&&(c=u.call(d,l,a)),c}function Ct(t){t.draggable=!1}function It(){V=!1}function kt(e,n,r){var i=0,a=0,s=e.children;while(a<s.length){if("none"!==s[a].style.display&&s[a]!==o&&s[a]!==t&&pt(s[a],r.draggable,e,!1)){if(i===n)return s[a];i++}a++}return null}function Tt(t){var e=t.lastElementChild;return e===o&&(e=t.children[t.childElementCount-2]),e||null}function Nt(t,e,o){var n=Xt(Tt(o)),r="vertical"===e?t.clientY:t.clientX,i="vertical"===e?t.clientX:t.clientY,a="vertical"===e?n.bottom:n.right,s="vertical"===e?n.left:n.top,l="vertical"===e?n.right:n.bottom;return i>s&&i<l&&r>a}function Et(e,o,n,r,i,a,s){var l=Xt(o),c="vertical"===n?e.clientY:e.clientX,d="vertical"===n?l.height:l.width,u="vertical"===n?l.top:l.left,h="vertical"===n?l.bottom:l.right,p=Xt(t),f=!1;if(!a)if(s&&_<d*r)if(!S&&(1===D?c>u+d*i/2:c<h-d*i/2)&&(S=!0),S)f=!0;else{"vertical"===n?p.top:p.left,"vertical"===n?p.bottom:p.right;if(1===D?c<u+_:c>h-_)return-1*D}else if(c>u+d*(1-r)/2&&c<h-d*(1-r)/2)return c>u+d/2?-1:1;return f=f||a,f&&(c<u+d*i/2||c>h-d*i/2)?c>u+d/2?1:-1:0}function St(e,o){var n=At(t,o.draggable),r=At(e,o.draggable);return n<r?1:-1}function $t(t){var e=t.tagName+t.className+t.src+t.href+t.textContent,o=e.length,n=0;while(o--)n+=e.charCodeAt(o);return n.toString(36)}function At(t,e){var o=0;if(!t||!t.parentNode)return-1;while(t&&(t=t.previousElementSibling))"TEMPLATE"!==t.nodeName.toUpperCase()&&t!==n&&o++;return o}function Yt(t,e){if(t)try{if(t.matches)return t.matches(e);if(t.msMatchesSelector)return t.msMatchesSelector(e);if(t.webkitMatchesSelector)return t.webkitMatchesSelector(e)}catch(o){return!1}return!1}function Mt(t,e){return function(){if(!dt){var o=arguments,n=this;dt=B(function(){1===o.length?t.call(n,o[0]):t.apply(n,o),dt=void 0},e)}}}function Rt(){clearTimeout(dt),dt=void 0}function Ot(t,e){if(t&&e)for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o]);return t}function Bt(t){return G&&G.dom?G.dom(t).cloneNode(!0):P?P(t).clone(!0)[0]:t.cloneNode(!0)}function Pt(t){J.length=0;var e=t.getElementsByTagName("input"),o=e.length;while(o--){var n=e[o];n.checked&&J.push(n)}}function Gt(t){return B(t,0)}function Lt(t){return clearTimeout(t)}function Xt(t,e,o){if(t.getBoundingClientRect||t===M){var n,r,i,a,s,l,c;if(t!==M?(n=t.getBoundingClientRect(),r=n.top,i=n.left,a=n.bottom,s=n.right,l=n.height,c=n.width):(r=0,i=0,a=window.innerHeight,s=window.innerWidth,l=window.innerHeight,c=window.innerWidth),o&&t!==M){if(e=e||t.parentNode,!X)do{if(e&&e.getBoundingClientRect&&"none"!==yt(e,"transform")){var d=e.getBoundingClientRect();r-=d.top+O(yt(e,"border-top-width")),i-=d.left+O(yt(e,"border-left-width")),a=r+n.height,s=i+n.width;break}}while(e=e.parentNode);var u=wt(t),h=u&&u.a,p=u&&u.d;u&&(r/=p,i/=h,c/=h,l/=p,a=r+l,s=i+c)}return{top:r,left:i,bottom:a,right:s,width:c,height:l}}}function Ht(t,e){var o=et(o,!0),n=Xt(t)[e];while(o){var r,i=Xt(o)[e];if(r="top"===e||"left"===e?n>=i:n<=i,!r)return!0;if(o===M)break;o=et(o,!1)}return!1}return R.addEventListener("dragover",ut),R.addEventListener("mousemove",ut),ht.prototype={constructor:ht,_computeIsAligned:function(e){var n;if(o&&!W?(lt(),n=R.elementFromPoint(e.clientX,e.clientY),ct()):n=e.target,n=pt(n,this.options.draggable,this.el,!1),!j&&t&&t.parentNode===this.el){for(var r=this.el.children,i=0;i<r.length;i++)pt(r[i],this.options.draggable,this.el,!1)&&r[i]!==n&&(r[i].sortableMouseAligned=Q(e.clientX,e.clientY,r[i],this._getDirection(e,null),this.options));pt(n,this.options.draggable,this.el,!0)||(w=null),j=!0,B(function(){j=!1},30)}},_getDirection:function(e,o){return"function"===typeof this.options.direction?this.options.direction.call(this,e,o,t):this.options.direction},_onTapStart:function(e){if(e.cancelable){var o,n=this,r=this.el,i=this.options,s=i.preventOnFilter,l=e.type,c=e.touches&&e.touches[0],d=(c||e).target,u=e.target.shadowRoot&&(e.path&&e.path[0]||e.composedPath&&e.composedPath()[0])||d,h=i.filter;if(Pt(r),(!X||e.artificialBubble||at(r,d))&&!t&&!(/mousedown|pointerdown/.test(l)&&0!==e.button||i.disabled)&&!u.isContentEditable)if(d=pt(d,i.draggable,r,!1),d){if(a!==d){if(o=At(d,i.draggable),"function"===typeof h){if(h.call(this,e,d,this))return xt(n,u,"filter",d,r,r,o),void(s&&e.cancelable&&e.preventDefault())}else if(h&&(h=h.split(",").some(function(t){if(t=pt(u,t.trim(),r,!1),t)return xt(n,t,"filter",d,r,r,o),!0}),h))return void(s&&e.cancelable&&e.preventDefault());i.handle&&!pt(u,i.handle,r,!1)||this._prepareDragStart(e,c,d,o)}}else X&&st(r,e,"_onTapStart")}},_handleAutoScroll:function(e,o){if(t&&this.options.scroll){var n=e.clientX,r=e.clientY,i=R.elementFromPoint(n,r),a=this;if(o||H||X){ot(e,a.options,i,o);var s=et(i,!0);!k||f&&n===m&&r===v||(f&&clearInterval(f),f=setInterval(function(){if(t){var i=et(R.elementFromPoint(n,r),!0);i!==s&&(s=i,nt(),ot(e,a.options,s,o))}},10),m=n,v=r)}else{if(!a.options.bubbleScroll||et(i,!0)===window)return void nt();ot(e,a.options,et(i,!1),!1)}}},_prepareDragStart:function(o,n,s,l){var c,u=this,p=u.el,f=u.options,m=p.ownerDocument;s&&!t&&s.parentNode===p&&(r=p,t=s,e=t.parentNode,i=t.nextSibling,a=s,h=f.group,d=l,g={target:t,clientX:(n||o).clientX,clientY:(n||o).clientY},this._lastX=(n||o).clientX,this._lastY=(n||o).clientY,t.style["will-change"]="all",t.style.transition="",t.style.transform="",c=function(){u._disableDelayedDrag(),t.draggable=u.nativeDraggable,u._triggerDragStart(o,n),xt(u,r,"choose",t,r,r,d),bt(t,f.chosenClass,!0)},f.ignore.split(",").forEach(function(e){Dt(t,e.trim(),Ct)}),f.supportPointer?(vt(m,"pointerup",u._onDrop),vt(m,"pointercancel",u._onDrop)):(vt(m,"mouseup",u._onDrop),vt(m,"touchend",u._onDrop),vt(m,"touchcancel",u._onDrop)),f.delay?(vt(m,"mouseup",u._disableDelayedDrag),vt(m,"touchend",u._disableDelayedDrag),vt(m,"touchcancel",u._disableDelayedDrag),vt(m,"mousemove",u._delayedDragTouchMoveHandler),vt(m,"touchmove",u._delayedDragTouchMoveHandler),f.supportPointer&&vt(m,"pointermove",u._delayedDragTouchMoveHandler),u._dragStartTimer=B(c,f.delay)):c())},_delayedDragTouchMoveHandler:function(t){var e=t.touches?t.touches[0]:t;q(z(e.clientX-this._lastX),z(e.clientY-this._lastY))>=this.options.touchStartThreshold&&this._disableDelayedDrag()},_disableDelayedDrag:function(){var t=this.el.ownerDocument;clearTimeout(this._dragStartTimer),gt(t,"mouseup",this._disableDelayedDrag),gt(t,"touchend",this._disableDelayedDrag),gt(t,"touchcancel",this._disableDelayedDrag),gt(t,"mousemove",this._delayedDragTouchMoveHandler),gt(t,"touchmove",this._delayedDragTouchMoveHandler),gt(t,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(e,o){o=o||("touch"==e.pointerType?e:null),!this.nativeDraggable||o?this.options.supportPointer?vt(R,"pointermove",this._onTouchMove):vt(R,o?"touchmove":"mousemove",this._onTouchMove):(vt(t,"dragend",this),vt(r,"dragstart",this._onDragStart));try{R.selection?Gt(function(){R.selection.empty()}):window.getSelection().removeAllRanges()}catch(n){}},_dragStarted:function(e){if(T=!1,r&&t){this.nativeDraggable&&(vt(R,"dragover",this._handleAutoScroll),vt(R,"dragover",it));var o=this.options;!e&&bt(t,o.dragClass,!1),bt(t,o.ghostClass,!0),yt(t,"transform",""),ht.active=this,e&&this._appendGhost(),xt(this,r,"start",t,r,r,d)}else this._nulling()},_emulateDragOver:function(e){if(b){if(this._lastX===b.clientX&&this._lastY===b.clientY&&!e)return;this._lastX=b.clientX,this._lastY=b.clientY,lt();var o=R.elementFromPoint(b.clientX,b.clientY),n=o;while(o&&o.shadowRoot)o=o.shadowRoot.elementFromPoint(b.clientX,b.clientY),n=o;if(n)do{var r;if(n[Y])if(r=n[Y]._onDragOver({clientX:b.clientX,clientY:b.clientY,target:o,rootEl:n}),r&&!this.options.dragoverBubble)break;o=n}while(n=n.parentNode);t.parentNode[Y]._computeIsAligned(b),ct()}},_onTouchMove:function(t){if(g){if(!t.cancelable)return;var e=this.options,n=e.fallbackTolerance,r=e.fallbackOffset,i=t.touches?t.touches[0]:t,a=o&&wt(o),s=o&&a&&a.a,l=o&&a&&a.d,c=(i.clientX-g.clientX+r.x)/(s||1),d=(i.clientY-g.clientY+r.y)/(l||1),u=t.touches?"translate3d("+c+"px,"+d+"px,0)":"translate("+c+"px,"+d+"px)";if(!ht.active&&!T){if(n&&q(z(i.clientX-this._lastX),z(i.clientY-this._lastY))<n)return;this._onDragStart(t,!0)}this._handleAutoScroll(i,!0),y=!0,b=i,yt(o,"webkitTransform",u),yt(o,"mozTransform",u),yt(o,"msTransform",u),yt(o,"transform",u),t.cancelable&&t.preventDefault()}},_appendGhost:function(){if(!o){var e=Xt(t,this.options.fallbackOnBody?R.body:r,!0),n=(yt(t),this.options);o=t.cloneNode(!0),bt(o,n.ghostClass,!1),bt(o,n.fallbackClass,!0),bt(o,n.dragClass,!0),yt(o,"box-sizing","border-box"),yt(o,"margin",0),yt(o,"top",e.top),yt(o,"left",e.left),yt(o,"width",e.width),yt(o,"height",e.height),yt(o,"opacity","0.8"),yt(o,"position","fixed"),yt(o,"zIndex","100000"),yt(o,"pointerEvents","none"),n.fallbackOnBody&&R.body.appendChild(o)||r.appendChild(o)}},_onDragStart:function(e,o){var i=this,a=e.dataTransfer,s=i.options;n=Bt(t),n.draggable=!1,n.style["will-change"]="",this._hideClone(),bt(n,i.options.chosenClass,!1),i._cloneId=Gt(function(){i.options.removeCloneOnHide||r.insertBefore(n,t),xt(i,r,"clone",t)}),!o&&bt(t,s.dragClass,!0),o?(N=!0,i._loopId=setInterval(i._emulateDragOver,50)):(gt(R,"mouseup",i._onDrop),gt(R,"touchend",i._onDrop),gt(R,"touchcancel",i._onDrop),gt(R,"pointercancel",i._onDrop),a&&(a.effectAllowed="move",s.setData&&s.setData.call(i,a,t)),vt(R,"drop",i),yt(t,"transform","translateZ(0)")),T=!0,i._dragStartId=Gt(i._dragStarted.bind(i,o)),vt(R,"selectstart",i)},_onDragOver:function(n){var a,s,l,c=this.el,u=n.target,f=this.options,m=f.group,v=ht.active,g=h===m,b=f.sort,I=this;if(!V&&(!X||n.rootEl||n.artificialBubble||at(c,u))){if(void 0!==n.preventDefault&&n.cancelable&&n.preventDefault(),y=!0,u=pt(u,f.draggable,c,!0),pt(n.target,null,t,!0)||u.animated)return F();if(u!==t&&(N=!1),v&&!f.disabled&&(g?b||(l=!r.contains(t)):p===this||(this.lastPutMode=h.checkPull(this,v,t,n))&&m.checkPut(this,v,t,n))){var T=this._getDirection(n,u);if(a=Xt(t),l)return this._hideClone(),e=r,i?r.insertBefore(t,i):r.appendChild(t),F();if(0===c.children.length||c.children[0]===o||Nt(n,T,c)&&!t.animated){if(0!==c.children.length&&c.children[0]!==o&&c===n.target&&(u=Tt(c)),u&&(s=Xt(u)),g?v._hideClone():v._showClone(this),!1!==_t(r,c,t,a,u,s,n,!!u))return c.appendChild(t),e=c,C=null,U(),this._animate(a,t),u&&this._animate(s,u),F()}else if(u&&u!==t&&void 0!==u.parentNode[Y]&&u!==c){var E,A=0,M=u.sortableMouseAligned,O=t.parentNode!==c,P=Ht(u,"vertical"===T?"top":"left");if(w!==u&&(x=null,E=Xt(u)["vertical"===T?"top":"left"],S=!1),tt(t,u,T)&&M||O||P||f.invertSwap||"insert"===x||"swap"===x?("swap"!==x&&($=f.invertSwap||O||k||P),A=Et(n,u,T,f.swapThreshold,null==f.invertedSwapThreshold?f.swapThreshold:f.invertedSwapThreshold,$,w===u),x="swap"):(A=St(u,f),x="insert"),0===A)return F();C=null,w=u,D=A,s=Xt(u);var G=u.nextElementSibling,L=!1;L=1===A;var H=_t(r,c,t,a,u,s,n,L);if(!1!==H)return 1!==H&&-1!==H||(L=1===H),V=!0,B(It,30),g?v._hideClone():v._showClone(this),L&&!G?c.appendChild(t):u.parentNode.insertBefore(t,L?G:u),e=t.parentNode,void 0===E||$||(_=z(E-Xt(u)["vertical"===T?"top":"left"])),U(),!O&&this._animate(s,u),this._animate(a,t),F()}if(c.contains(t))return F()}return X&&!n.rootEl&&st(c,n,"_onDragOver"),!1}function F(){return v&&(bt(t,p?p.options.ghostClass:v.options.ghostClass,!1),bt(t,f.ghostClass,!0)),p!==I&&I!==ht.active?p=I:I===ht.active&&(p=null),(u===t&&!t.animated||u===c&&!u.animated)&&(w=null),f.dragoverBubble||n.rootEl||u===R||(I._handleAutoScroll(n),t.parentNode[Y]._computeIsAligned(n)),!f.dragoverBubble&&n.stopPropagation&&n.stopPropagation(),!0}function U(){xt(I,r,"change",u,c,r,d,At(t,f.draggable),n)}},_animate:function(e,o){var n=this.options.animation;if(n){var r=Xt(o);if(o===t&&(C=r),1===e.nodeType&&(e=Xt(e)),e.left+e.width/2!==r.left+r.width/2||e.top+e.height/2!==r.top+r.height/2){var i=wt(this.el),a=i&&i.a,s=i&&i.d;yt(o,"transition","none"),yt(o,"transform","translate3d("+(e.left-r.left)/(a||1)+"px,"+(e.top-r.top)/(s||1)+"px,0)"),o.offsetWidth,yt(o,"transition","transform "+n+"ms"+(this.options.easing?" "+this.options.easing:"")),yt(o,"transform","translate3d(0,0,0)")}"number"===typeof o.animated&&clearTimeout(o.animated),o.animated=B(function(){yt(o,"transition",""),yt(o,"transform",""),o.animated=!1},n)}},_offUpEvents:function(){var t=this.el.ownerDocument;gt(R,"touchmove",this._onTouchMove),gt(R,"pointermove",this._onTouchMove),gt(t,"mouseup",this._onDrop),gt(t,"touchend",this._onDrop),gt(t,"pointerup",this._onDrop),gt(t,"touchcancel",this._onDrop),gt(t,"pointercancel",this._onDrop),gt(R,"selectstart",this)},_onDrop:function(a){var s=this.el,l=this.options;T=!1,k=!1,$=!1,S=!1,clearInterval(this._loopId),clearInterval(f),nt(),Rt(),clearTimeout(this._dragStartTimer),Lt(this._cloneId),Lt(this._dragStartId),gt(R,"mousemove",this._onTouchMove),this.nativeDraggable&&(gt(R,"drop",this),gt(s,"dragstart",this._onDragStart),gt(R,"dragover",this._handleAutoScroll),gt(R,"dragover",it)),this._offUpEvents(),a&&(y&&(a.cancelable&&a.preventDefault(),!l.dropBubble&&a.stopPropagation()),o&&o.parentNode&&o.parentNode.removeChild(o),(r===e||p&&"clone"!==p.lastPutMode)&&n&&n.parentNode&&n.parentNode.removeChild(n),t&&(this.nativeDraggable&&gt(t,"dragend",this),Ct(t),t.style["will-change"]="",bt(t,p?p.options.ghostClass:this.options.ghostClass,!1),bt(t,this.options.chosenClass,!1),xt(this,r,"unchoose",t,e,r,d,null,a),r!==e?(u=At(t,l.draggable),u>=0&&(xt(null,e,"add",t,e,r,d,u,a),xt(this,r,"remove",t,e,r,d,u,a),xt(null,e,"sort",t,e,r,d,u,a),xt(this,r,"sort",t,e,r,d,u,a)),p&&p.save()):t.nextSibling!==i&&(u=At(t,l.draggable),u>=0&&(xt(this,r,"update",t,e,r,d,u,a),xt(this,r,"sort",t,e,r,d,u,a))),ht.active&&(null!=u&&-1!==u||(u=d),xt(this,r,"end",t,e,r,d,u,a),this.save()))),this._nulling()},_nulling:function(){r=t=e=o=i=n=a=s=l=I.length=f=m=v=g=b=y=u=d=w=D=C=p=h=ht.active=null,J.forEach(function(t){t.checked=!0}),J.length=0},handleEvent:function(e){switch(e.type){case"drop":case"dragend":this._onDrop(e);break;case"dragenter":case"dragover":t&&(this._onDragOver(e),mt(e));break;case"selectstart":e.preventDefault();break}},toArray:function(){for(var t,e=[],o=this.el.children,n=0,r=o.length,i=this.options;n<r;n++)t=o[n],pt(t,i.draggable,this.el,!1)&&e.push(t.getAttribute(i.dataIdAttr)||$t(t));return e},sort:function(t){var e={},o=this.el;this.toArray().forEach(function(t,n){var r=o.children[n];pt(r,this.options.draggable,o,!1)&&(e[t]=r)},this),t.forEach(function(t){e[t]&&(o.removeChild(e[t]),o.appendChild(e[t]))})},save:function(){var t=this.options.store;t&&t.set&&t.set(this)},closest:function(t,e){return pt(t,e||this.options.draggable,this.el,!1)},option:function(t,e){var o=this.options;if(void 0===e)return o[t];o[t]=e,"group"===t&&rt(o)},destroy:function(){var t=this.el;t[Y]=null,gt(t,"mousedown",this._onTapStart),gt(t,"touchstart",this._onTapStart),gt(t,"pointerdown",this._onTapStart),this.nativeDraggable&&(gt(t,"dragover",this),gt(t,"dragenter",this)),Array.prototype.forEach.call(t.querySelectorAll("[draggable]"),function(t){t.removeAttribute("draggable")}),this._onDrop(),E.splice(E.indexOf(this.el),1),this.el=t=null},_hideClone:function(){n.cloneHidden||(yt(n,"display","none"),n.cloneHidden=!0,n.parentNode&&this.options.removeCloneOnHide&&n.parentNode.removeChild(n))},_showClone:function(e){"clone"===e.lastPutMode?n.cloneHidden&&(r.contains(t)&&!this.options.group.revertClone?r.insertBefore(n,t):i?r.insertBefore(n,i):r.appendChild(n),this.options.group.revertClone&&this._animate(t,n),yt(n,"display",""),n.cloneHidden=!1):this._hideClone()}},vt(R,"touchmove",function(t){(ht.active||T)&&t.cancelable&&t.preventDefault()}),ht.utils={on:vt,off:gt,css:yt,find:Dt,is:function(t,e){return!!pt(t,e,t,!1)},extend:Ot,throttle:Mt,closest:pt,toggleClass:bt,clone:Bt,index:At,nextTick:Gt,cancelNextTick:Lt,detectDirection:Z,getChild:kt},ht.create=function(t,e){return new ht(t,e)},ht.version="1.8.1",ht})},"5e58":function(t,e,o){},7862:function(t,e,o){"use strict";var n=o("fd44"),r=o.n(n);r.a},f94d:function(t,e,o){"use strict";o.r(e);var n=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("v-card",{attrs:{tile:""}},[o("v-toolbar",{attrs:{card:"",color:"white"}},[o("v-toolbar-title",[t._v(t._s(t.board?"토픽 관리":"새로운 토픽 만들기"))]),o("v-spacer"),o("v-toolbar-items",[o("v-btn",{attrs:{icon:""},on:{click:function(e){t.$emit("closeDialog",null)}}},[o("v-icon",[t._v("close")])],1)],1)],1),o("v-card-text",[o("v-form",{ref:"form"},[o("v-layout",{attrs:{row:"",xs12:"",wrap:""}},[o("v-flex",{staticClass:"mb-1",attrs:{xs6:""}},[t.board?o("v-text-field",{staticClass:"dense",attrs:{readonly:"",label:"토픽ID",hint:"pedagy.com/<b>seoul</b>과 같이 URL주소에 들어가는 문구입니다."},model:{value:t.boardId,callback:function(e){t.boardId=e},expression:"boardId"}}):o("v-text-field",{staticClass:"dense",attrs:{rules:t.boardIdRules,"error-messages":t.boardIdErrors,maxlength:"15",label:"토픽ID",hint:"pedagy.com/<b>seoul</b>과 같이 URL주소에 들어갈 문구입니다.",placeholder:"비워두면 임의로 생성됩니다.","validate-on-blur":""},on:{blur:t.checkBoardId},model:{value:t.boardId,callback:function(e){t.boardId=e},expression:"boardId"}})],1),o("v-flex",{staticClass:"mb-1",attrs:{xs6:""}},[o("v-text-field",{staticClass:"dense",attrs:{rules:t.boardNameRules,maxlength:"200",label:"토픽 이름",required:"",hint:"토픽 목록에 표시되는 이름입니다.","validate-on-blur":""},model:{value:t.boardName,callback:function(e){t.boardName=e},expression:"boardName"}})],1),o("v-flex",{attrs:{xs12:""}},[o("v-textarea",{ref:"boardDescription",attrs:{rows:3,maxlength:"1000",height:"80px",label:"토픽 소개",hint:"토픽 이름 아래에 작게 표시되는 설명입니다.","validate-on-blur":""},model:{value:t.boardDescription,callback:function(e){t.boardDescription=e},expression:"boardDescription"}})],1),o("v-flex",{attrs:{xs6:""}},[o("v-checkbox",{ref:"allowAnonymous",staticClass:"dense mt-2",attrs:{label:"익명글 허용","hide-details":""},model:{value:t.allowAnonymous,callback:function(e){t.allowAnonymous=e},expression:"allowAnonymous"}})],1),o("v-flex",{attrs:{xs6:""}},[o("v-tooltip",{attrs:{bottom:""}},[o("v-checkbox",{ref:"useCategory",staticClass:"dense mt-2",attrs:{slot:"activator",label:"카테고리 분류 사용","hide-details":""},slot:"activator",model:{value:t.useCategory,callback:function(e){t.useCategory=e},expression:"useCategory"}}),o("span",[t._v("글을 작성할 때 작성자가 기본/정보/질문 중 하나의 카테고리를 지정할 수 있습니다.")])],1)],1),o("v-flex",{staticClass:"mt-3",attrs:{xs6:""}},[o("v-select",{attrs:{items:t.allGroupAuthItems,label:"토픽 공개 여부",dense:""},model:{value:t.allGroupAuth,callback:function(e){t.allGroupAuth=e},expression:"allGroupAuth"}})],1),o("v-flex",{staticClass:"mt-3",attrs:{xs6:""}},[o("v-layout",{attrs:{"align-center":"","fill-height":""}},[o(t.$vuetify.breakpoint.xsOnly?"small":"div",{tag:"component",domProps:{innerHTML:t._s(t.allGroupAuthDescription)}})],1)],1),o("v-flex",{attrs:{xs12:""}},[o(t.$vuetify.breakpoint.xsOnly?"v-select":"v-autocomplete",{tag:"component",attrs:{name:"allowedGroups",chips:"",multiple:"","item-text":"text",dense:"","item-value":"value",disabled:"READWRITE"===t.allGroupAuth,items:t.groupItems,label:"구독 권한",hint:"내가 구독할 수 있도록 선택해야 합니다."+(""!==t.myGroup?" 나의 구독가능 정보 : "+t.myGroup:""),"persistent-hint":"","menu-props":{closeOnContentClick:t.$vuetify.breakpoint.xsOnly}},scopedSlots:t._u([{key:"selection",fn:function(e){return[o("v-chip",{key:e.item.value,attrs:{close:"",small:"",selected:e.selected},on:{input:function(o){t.removeChip(e,e.item,t.allowedGroups)}}},[t._v(t._s(e.item.text))])]}},{key:"item",fn:function(e){return[o("v-list-tile-content",[o("v-list-tile-title",{domProps:{innerHTML:t._s(e.item.text)}})],1)]}}]),model:{value:t.allowedGroups,callback:function(e){t.allowedGroups=e},expression:"allowedGroups"}})],1),t.board?o("v-flex",{staticClass:"mt-2",attrs:{xs12:""}},[o("v-select",{attrs:{name:"ownerNickName",dense:"",items:t.boardMemberItems,label:"토픽지기 양도",hint:"선택한 회원에게 토픽지기가 양도됩니다.","persistent-hint":""},model:{value:t.ownerNickName,callback:function(e){t.ownerNickName=e},expression:"ownerNickName"}})],1):t._e(),t.board&&t.board.reservedDate?o("v-flex",{staticClass:"mt-3",attrs:{xs12:""}},[o("v-textarea",{ref:"reservedContents",attrs:{rows:3,readonly:"",height:"80px",label:"변경 예약("+t.$moment(t.board.reservedDate,"YYYYMMDD").format("Y.M.D")+" 반영 예정) 내용",hint:"변경이 예약된 토픽의 내용입니다."},model:{value:t.reservedContents,callback:function(e){t.reservedContents=e},expression:"reservedContents"}})],1):t._e()],1),o("v-divider",{staticClass:"my-2"}),o("v-layout",{attrs:{row:""}},[o("v-btn",{attrs:{flat:""},on:{click:function(e){t.reset(!0)}}},[t._v("초기화")]),t.board?o("v-btn",{attrs:{color:"error"},on:{click:t.deleteBoard}},[t._v("삭제")]):t._e(),o("v-spacer"),o("v-btn",{attrs:{color:"primary",loading:t.loading},on:{click:t.save}},[t._v("등록")])],1)],1)],1)],1)},r=[];function i(t){return i="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i(t)}var a=["document","documents","profile","profiles","auth","user","users","comment","comments","vote","votes","report","reports","index","scraps","scrap","board","boards","manage","manages","chat","chats","message","messages","group","groups","event","events","signup","signin","signout","resetPassword","notification","notifications","survey","list","admin","ADMIN","ADMINISTRATOR","administrator","attach","profiles","animal","loungeBest","topicBest","lounge","topic","type","best","sanction","userId","nickName","myPage","myBoard","myCommunity","pedagy","myPedagy","Pedagy"],s=[/^(?:[a-zA-Z]+)(?:[a-zA-Z0-9\-_]{0,15})$/,/^((?!(--|__)).)*$/],l={M:"전공",G:"학년",N:"일반",R:"지역",Z:"인증"},c={name:"topicCreator",data:function(){return{loading:!1,boardId:null,boardName:null,boardDescription:null,allGroupAuth:"READONLY",allowAnonymous:!0,useCategory:!1,allowedGroups:[],allGroupAuthItems:[{value:"READWRITE",text:"전체구독허용"},{value:"READONLY",text:"읽기공개"},{value:"NONE",text:"비공개"}],ownerNickName:null,groupItems:[],boardIdRules:[function(t){return!a.includes(t)||"사용할 수 없는 ID입니다."},function(t){return!t||t.length>3&&t.length<16||"4~15자로 입력해주세요."},function(t){return s[0].test(t)||"토픽ID의 길이가 너무 길거나, 알파벳이 아닌 문자가 있습니다."},function(t){return s[1].test(t)||"토픽ID에 연속된 [_, -]가 있습니다."}],boardNameRules:[function(t){return!!t||"토픽 이름을 입력해주세요."}],boardMemberItems:[],boardIdErrors:[]}},props:["board"],computed:{myGroup:function(){var t=this.$store.getters.profile;return this.groupItems.filter(function(e){return t.groups.some(function(t){return t===e.value})}).map(function(t){return t.text}).join(", ")},allGroupAuthDescription:function(){switch(this.allGroupAuth){case"READONLY":return"구독자만 글을 쓸 수 있지만,<br>구독하지 않아도 글을 볼 수 있습니다.<br>그 대신 핫토픽에 글이 노출됩니다.";case"NONE":return"구독자만 글을 읽고 쓸 수 있습니다.<br>핫토픽에는 글이 노출되지 않습니다.";case"READWRITE":return"모든 회원이 토픽을 구독할 수 있습니다.<br>구독하지 않아도 글을 볼 수 있습니다.<br>핫토픽에 글이 노출됩니다."}},reservedContents:function(){var t=this;if(!this.board||!this.board.reservedContents)return null;var e=function(){var e=t.board.reservedContents,o="",n=function(n){switch(n){case"boardName":o+="토픽 이름 : ".concat(e[n],"\n");break;case"boardDescription":o+="토픽 설명 : ".concat(e[n],"\n");break;case"allowAnonymous":o+="익명글 허용 여부 : ".concat(e[n]?"허용":"비허용","\n");break;case"useCategory":o+="카테고리 : ".concat(e[n]?"사용":"미사용","\n");break;case"allGroupAuth":o+="토픽 공개/비공개 : ".concat(t.allGroupAuthItems.some(function(t){return t.value===e[n]})?t.allGroupAuthItems.find(function(t){return t.value===e[n]}).text:"(알 수 없음)","\n");break;case"ownerNickName":o+="토픽지기 : ".concat(e[n],"\n");break;case"auth":o+="구독 권한 : ".concat(e[n].filter(function(e){return t.groupItems.some(function(t){return t.value===e.groupId})}).map(function(e){return t.groupItems.find(function(t){return t.value===e.groupId}).text+("INSERT"===e.command?" 추가":"DELETE"===e.command?" 삭제":"")}).join(", "));break;case"status":o+="DELETED"===e[n]?"토픽 삭제 예정":"";break}};for(var r in e)n(r);return{v:o}}();return"object"===i(e)?e.v:void 0}},methods:{reset:function(t){var e=this;this.board?(t||(this.loading=!0,this.$axios.get("/board/member",{params:{boardId:this.board.boardId},headers:{silent:!0}}).then(function(t){var o=e.$store.getters.profile.topicNickName;e.boardMemberItems=t.data.filter(function(t){return t.nickName!==o}).map(function(t){return t.nickName}),e.loading=!1}).catch(function(t){console.log(t.response),e.loading=!1,e.$store.dispatch("showSnackbar",{text:t.response?t.response.data.message:"토픽 구성원을 불러오지 못했습니다.",color:"error"})})),this.boardId=this.board.boardId,this.boardName=this.board.boardName,this.boardDescription=this.board.boardDescription,this.allGroupAuth=this.board.allGroupAuth,this.allowAnonymous=this.board.allowAnonymous,this.useCategory=!!this.board.categories&&this.board.categories.filter(function(t){return t}).length>0,this.allowedGroups=this.board.boardAuth.map(function(t){return t.groupId}),this.ownerNickName=this.board.ownerNickName):(this.boardId=null,this.boardName=null,this.boardDescription=null,this.allGroupAuth="READONLY",this.allowAnonymous=!0,this.useCategory=!1,this.allowedGroups=[],this.ownerNickName=null)},removeChip:function(t,e,o){t.parent.selectedItems.splice(t.parent.selectedItems.indexOf(e.value),1),o.splice(o.indexOf(e.value),1)},checkBoardId:function(t){var e=this;this.boardId&&0===this.boardIdErrors.length?this.$axios.get("/boardId",{params:{boardId:this.boardId},headers:{silent:!0}}).then(function(o){e.boardIdErrors=[],"function"===typeof t&&t.call(e)}).catch(function(o){e.boardIdErrors=[o&&o.response&&o.response.data.message],"function"===typeof t&&t.call(e)}):"function"===typeof t&&t.call(this)},save:function(){var t=this;this.board?this.$refs.form.validate()&&0===this.boardIdErrors.length?confirm("변경 내용은 1개월 뒤에 반영됩니다. 계속하시겠습니까?")&&(this.loading=!0,this.$axios.put("/board",{boardId:this.boardId,boardName:this.boardName,boardDescription:this.boardDescription||void 0,allGroupAuth:this.allGroupAuth,allowAnonymous:this.allowAnonymous,allowedGroups:this.allowedGroups.map(function(t){return{groupId:t,authType:"READWRITE"}}),useCategory:this.useCategory,ownerNickName:this.ownerNickName||void 0}).then(function(e){t.loading=!1,t.$emit("resetBoard"),t.$emit("closeDialog"),t.$store.dispatch("showSnackbar",{text:"토픽 정보를 변경 예약하였습니다.",color:"success"})}).catch(function(e){console.log(e.response),t.loading=!1,t.$store.dispatch("showSnackbar",{text:e.response?e.response.data.message:"토픽을 만들지 못했습니다.",color:"error"})})):this.$store.dispatch("showSnackbar",{text:"토픽 정보를 정확히 입력해주세요.",color:"error"}):this.checkBoardId(function(){t.$refs.form.validate()&&0===t.boardIdErrors.length?(t.loading=!0,t.$axios.post("/board",{boardId:t.boardId,boardName:t.boardName,boardType:"T",boardDescription:t.boardDescription||void 0,allGroupAuth:t.allGroupAuth,allowAnonymous:t.allowAnonymous,allowedGroups:t.allowedGroups.map(function(t){return{groupId:t,authType:"READWRITE"}}),useCategory:t.useCategory}).then(function(e){t.loading=!1,t.$store.dispatch("addBoard",{boardId:t.boardId,boardName:t.boardName,boardType:"T",boardDescription:t.boardDescription||void 0,allGroupAuth:t.allGroupAuth,allowAnonymous:t.allowAnonymous}),t.$store.dispatch("addUserBoard",{boardId:t.boardId,boardName:t.boardName,boardType:"T",boardDescription:t.boardDescription||void 0,allGroupAuth:t.allGroupAuth,allowAnonymous:t.allowAnonymous}),t.$emit("resetBoard"),t.$emit("closeDialog"),t.reset(),t.$store.dispatch("showSnackbar",{text:"새로운 토픽을 만들었습니다.",color:"success"})}).catch(function(e){console.log(e.response),t.loading=!1,t.$store.dispatch("showSnackbar",{text:e.response?e.response.data.message:"토픽을 만들지 못했습니다.",color:"error"})})):t.$store.dispatch("showSnackbar",{text:"토픽 정보를 정확히 입력해주세요.",color:"error"})})},deleteBoard:function(){var t=this;confirm("토픽 삭제는 1개월 유예기간 후에 이루어지고,\n삭제 후에는 모든 글에 접근이 불가능합니다. 계속하시겠습니까?")&&this.$axios.put("/board",{boardId:this.boardId,status:"DELETED"}).then(function(e){t.$emit("resetBoard"),t.$emit("closeDialog"),t.$store.dispatch("showSnackbar",{text:"토픽 삭제를 예약하였습니다.",color:"success"})}).catch(function(e){console.log(e.response),t.$store.dispatch("showSnackbar",{text:e.response?e.response.data.message:"토픽을 만들지 못했습니다.",color:"error"})})}},created:function(){var t=this;this.$store.getters.groups?this.groupItems=this.$store.getters.groups:this.$axios.get("/group",{headers:{silent:!0}}).then(function(e){e.data.forEach(function(t){"N"!==t.groupType&&"D"!==t.groupType&&"E"!==t.groupType||(t.groupType="Z")}),t.groupItems=e.data.sort(function(t,e){return t.groupType<e.groupType?-1:t.groupType===e.groupType?0:1});var o=null,n=0;while(n<t.groupItems.length)o!==t.groupItems[n].groupType&&(o?(o=t.groupItems[n].groupType,t.groupItems.splice(n,0,{divider:!0}),n++):o=t.groupItems[n].groupType,t.groupItems.splice(n,0,{header:l[o]}),n++),n++;t.groupItems=t.groupItems.map(function(t){return t.groupName?{text:t.groupName,value:t.groupId}:t}),t.$store.dispatch("setGroups",t.groupItems)}).catch(function(e){t.$store.dispatch("showSnackbar",{text:"그룹 목록을 가져오지 못했습니다.".concat(e&&e.response&&e.response.data?"["+e.response.data.message+"]":"")})}),this.reset()},watch:{boardId:function(){this.boardIdErrors.length>0&&(this.boardIdErrors=[])},board:{handler:function(){this.reset()},deep:!0}}},d=c,u=(o("7862"),o("0c7c")),h=Object(u["a"])(d,n,r,!1,null,null,null);e["default"]=h.exports},fd44:function(t,e,o){}}]);
//# sourceMappingURL=chunk-39e1b83a.835d8346.js.map
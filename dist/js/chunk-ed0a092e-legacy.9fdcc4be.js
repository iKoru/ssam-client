(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-ed0a092e"],{"2fef":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s(e.$vuetify.breakpoint.smAndUp?"v-container":"div",{tag:"component"},[s("v-layout",{attrs:{row:"",height:"200px","justify-center":"","align-center":""}},[s("v-card",{attrs:{width:"100%",flat:""}},[s("v-img",{attrs:{src:a("cc1f"),"aspect-ratio":"2.75","max-height":e.$vuetify.breakpoint.xsOnly?"200px":"calc(100vh - 535px)"}}),s("v-card-title",{attrs:{"primary-title":""}},[s("v-flex",{attrs:{xs12:""}},[s("h3",{staticClass:"headline mb-0"},[e._v("교사 인증")]),s("div",{staticClass:"text-xs-center justify-center align-center pa-3"},[e.$store.getters.auth.needEmail?s("div",[s("p",[e._v("\n                선생님들의 노다지, Pedagy에 오신 것을 환영합니다.\n                "),s("br"),e._v("교사임을 인증하여 지역·학년·전공별 라운지, 학습자료가 모인 아카이브, 관심사별 토픽을 이용해보세요.\n                "),s("br"),e._v("아래에서 NEIS 이메일을 등록하여 인증하시거나,\n                "),s("span",[e._v("webmaster@pedagy.com")]),e._v("으로 정교사 자격증을 보내어 인증하실 수 있습니다.\n              ")]),s("v-form",{ref:"form",attrs:{"lazy-validation":""}},[s("v-layout",{attrs:{row:"",xs12:"",wrap:""}},[s("v-flex",{attrs:{xs6:""}},[s("v-text-field",{ref:"email",staticClass:"dense",attrs:{rules:e.emailRules,"error-messages":e.emailErrors,maxlength:"90",label:"이메일",hint:"최대 90자","validate-on-blur":"",placeholder:"NEIS 이메일계정"},on:{blur:e.checkEmail},model:{value:e.email,callback:function(t){e.email=t},expression:"email"}})],1),s("v-flex",{attrs:{xs6:""}},[s("v-autocomplete",{ref:"emailHost",staticClass:"dense",attrs:{items:e.emailHostItems,"error-messages":e.emailHostErrors,dense:"","prepend-icon":"alternate_email",label:"NEIS 이메일 뒷자리","validate-on-blur":""},on:{blur:e.checkEmail},model:{value:e.emailHost,callback:function(t){e.emailHost=t},expression:"emailHost"}})],1)],1)],1)],1):e.$store.getters.auth.imminent?s("p",[e._v(e._s(e.$store.getters.profile.loungeNickName)+"님, 이메일을 통한 정기 인증 기간의 만료일이 "+e._s(e.$store.getters.profile.emailVerifiedDate?e.$moment(e.$store.getters.profile.emailVerifiedDate,"YYYYMMDD").add(1,"years").format("Y년 M월 D일까지로 "):"")+"얼마 남지 않았습니다.\n              "),s("br"),e._v("인증 메일 전송 버튼을 눌러 인증을 연장해주세요.\n            ")]):s("p",[e._v(e._s(e.$store.getters.profile.loungeNickName)+"님, 이메일을 통한 정기 인증이 "+e._s(e.$store.getters.profile.emailVerifiedDate?e.$moment(e.$store.getters.profile.emailVerifiedDate,"YYYYMMDD").add(1,"years").format("Y년 M월 D일까지로 "):"")+"만료되었습니다.\n              "),s("br"),e._v("아래에서 인증 메일을 전송하여 다시 인증해주세요.\n            ")])])])],1),s("v-card-actions",{attrs:{"pa-3":""}},[s("v-layout",{attrs:{row:e.$vuetify.breakpoint.smAndUp,column:e.$vuetify.breakpoint.xsOnly,wrap:"","text-xs-right":""}},["E"===e.$store.getters.profile.auth&&e.$store.getters.profile.emailVerifiedDate?[s("v-btn",{staticClass:"mt-2",attrs:{flat:""},on:{click:e.notAnymore}},[e._v("더이상 보지 않기")]),e.$vuetify.breakpoint.xsOnly?s("div"):e._e()]:e._e(),"E"!==e.$store.getters.profile.auth||e.$store.getters.profile.emailVerifiedDate?[s("v-btn",{staticClass:"mt-2",on:{click:e.notToday}},[e._v("오늘 더이상 보지 않기")]),e.$vuetify.breakpoint.xsOnly?s("div"):e._e()]:e._e(),s("v-btn",{staticClass:"mt-2",on:{click:e.goNext}},[e._v("다음에 인증하기")]),s("v-spacer"),s("v-btn",{staticClass:"mt-2",attrs:{color:"primary",loading:e.loading},on:{click:e.sendAuth}},[e._v(e._s(e.$store.getters.auth.needEmail?"이메일 등록 및 ":"")+"인증메일 보내기")])],2)],1)],1)],1)],1)},r=[],i=a("713b");function o(e,t,a){var s="";if(a){var r=new Date;r.setTime(r.getTime()+24*a*60*60*1e3),s="; expires="+r.toUTCString()}document.cookie=e+"="+(t||"")+s+"; path=/"}var n={name:"Auth",created:function(){this.$emit("update:layout",i["a"]),this.$store.dispatch("setColumnType","HIDE_ALWAYS")},data:function(){return{loading:!1,email:null,emailHost:null,emailErrors:[],emailHostErrors:[],emailHostItems:["sen.go.kr","goe.go.kr","ice.go.kr","gwe.go.kr","cbe.go.kr","cne.go.kr","dje.go.kr","sje.go.kr","jbe.go.kr","jne.go.kr","gen.go.kr","gbe.go.kr","gne.go.kr","use.go.kr","pen.go.kr","jje.go.kr"],emailRules:[function(e){return!!e||"이메일을 입력해주세요"},function(e){return!e||/[a-z0-9!#$%&'*+\/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+\/=?^_`{|}~-]+)*/.test(e)||"이메일이 올바르지 않습니다."}]}},methods:{goNext:function(){var e=decodeURIComponent(window.location.search.replace(new RegExp("^(?:.*[&\\?]"+encodeURIComponent("redirectTo").replace(/[.+*]/g,"\\$&")+"(?:\\=([^&]*))?)?.*$","i"),"$1"));this.$router.push(e&&"/auth"!==e?e:"/")},notToday:function(){o("authRequirement",this.$moment(new Date).format("YMMDD"),1),this.goNext()},notAnymore:function(){var e=this;confirm("더이상 인증을 하지 않으면 다양한 라운지와 아카이브, 그리고 토픽을 이용할 수 없습니다.\n정말 더이상 인증을 하지 않으시겠습니까?")&&(this.$axios.put("/user",{emailVerifiedDate:null}).then(function(t){e.$store.dispatch("updateProfile",{emailVerifiedDate:null})}).catch(function(t){console.log(t),t.response&&e.$store.dispatch("showSnackbar",{text:t.response.data.message||"다시보지 않기 처리를 하지 못했습니다.",color:"error"})}),this.goNext())},sendAuth:function(){var e=this;if(this.loading=!0,this.$store.getters.auth.needEmail&&(!this.$refs.form.validate()||0!==this.emailErrors.length||0!==this.emailHostErrors.length))return this.$store.dispatch("showSnackbar",{text:"인증 메일을 받을 이메일 주소를 입력해주세요.",color:"error"}),void(this.loading=!1);var t=decodeURIComponent(window.location.search.replace(new RegExp("^(?:.*[&\\?]"+encodeURIComponent("redirectTo").replace(/[.+*]/g,"\\$&")+"(?:\\=([^&]*))?)?.*$","i"),"$1"));this.$axios.post("/auth",this.$store.getters.auth.needEmail?{email:this.email+"@"+this.emailHost}:null,{headers:{silent:!0}}).then(function(a){e.$store.dispatch("showSnackbar",{text:"등록된 메일주소로 인증 메일을 보냈습니다. 메일을 확인해주세요.",color:"info"}),e.$router.push(t&&"/auth"!==t?t:"/")}).catch(function(a){a.response&&e.$store.dispatch("showSnackbar",{text:a.response.data.message||"인증 메일을 보내지 못했습니다.",color:"error"}),e.$store.getters.auth.needEmail||e.$router.push(t&&"/auth"!==t?t:"/")})},checkEmail:function(e){var t=this;if(!(e instanceof MouseEvent)){if(this.email&&this.email.length>0&&this.emailHost)return this.$axios.get("/email",{params:{email:this.email+"@"+this.emailHost},headers:{silent:!0}}).then(function(){"function"===typeof e&&e.call(t)}).catch(function(a){if(a&&a.response)switch(a.response.data.target){case"emailHost":t.emailHostErrors=[a.response.data.message];break;case"email":default:t.emailErrors=[a.response.data.message||"이메일을 정확히 입력해주세요."];break}"function"===typeof e&&e.call(t)}),this.emailErrors=[],this.$refs.email.resetValidation(),this.emailHostErrors=[],void this.$refs.emailHost.resetValidation();!this.email&&this.emailHost?this.emailErrors=["이메일을 입력해주세요."]:this.email&&!this.emailHost?this.emailHostErrors=["이메일 뒷자리를 선택해주세요."]:(this.emailErrors=[],this.$refs.email.resetValidation(),this.emailHostErrors=[],this.$refs.emailHost.resetValidation()),"function"===typeof e&&e.call(this)}}}},l=n,c=a("0c7c"),m=Object(c["a"])(l,s,r,!1,null,null,null);t["default"]=m.exports},cc1f:function(e,t,a){e.exports=a.p+"img/index.14a5fda2.jpg"}}]);
//# sourceMappingURL=chunk-ed0a092e-legacy.9fdcc4be.js.map
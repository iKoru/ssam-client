(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-01798c39","chunk-2d22db79"],{"113b":function(t,e,o){"use strict";o.r(e);var r=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("v-card",{attrs:{flat:""}},[o("v-card-title",{attrs:{"primary-title":""}},[o("v-layout",{attrs:{column:""}},[o("v-layout",{attrs:{row:"",wrap:""}},[t.lounges.length>0?o("v-flex",{class:{"mt-5":t.$vuetify.breakpoint.xsOnly,"pr-2":t.$vuetify.breakpoint.mdAndUp,"ml-auto":!0},attrs:{xs12:"",sm6:"",lg5:""}},[o("v-layout",{staticClass:"titleRow",attrs:{row:""}},[o("span",{staticClass:"title"},[t._v("라운지")])]),o("span",{staticClass:"ellipsis subtitle"},[t._v("신고로 인해 쓰기/읽기가 제한된 라운지만 보여집니다.")]),o("v-divider",{staticClass:"my-3"}),o("v-list",{attrs:{dense:""}},t._l(t.lounges,function(e){return o("v-list-tile",{key:e.boardId},[o("v-layout",{attrs:{row:""}},[o("v-flex",{staticClass:"ellipsis"},[o("div",{staticClass:"vertical-center ellipsis"},[t._v("\n                    "+t._s(e.boardName)+"\n                    "),e.isOwner?o("v-icon",{attrs:{title:"라운지지기"}},[t._v("person")]):t._e()],1)]),o("v-spacer"),e.writeRestrictDate?o("v-tooltip",{attrs:{bottom:""}},[o("v-chip",{attrs:{slot:"activator",color:"red","text-color":"white",small:""},slot:"activator"},[t._v("쓰기제한")]),o("span",[t._v(t._s(t.$moment(e.writeRestrictDate,"YYYYMMDD").format("Y년 M월 D일까지")))])],1):t._e(),e.readRestrictDate?o("v-tooltip",{attrs:{bottom:""}},[o("v-chip",{attrs:{slot:"activator",color:"red","text-color":"white",small:""},slot:"activator"},[t._v("읽기제한")]),o("span",[t._v(t._s(t.$moment(e.readRestrictDate,"YYYYMMDD").format("Y년 M월 D일까지")))])],1):t._e()],1)],1)}),1)],1):t._e(),o("v-flex",{class:{"pl-2":t.$vuetify.breakpoint.mdAndUp,"mr-auto":!0,"ml-auto":0===t.lounges.length},attrs:{xs12:"",sm6:t.lounges.length>0,sm9:0===t.lounges.length,lg5:t.lounges.length>0,lg8:0===t.lounges.length}},[o("v-layout",{class:{titleRow:!0,"mb-2":0===t.lounges.length},attrs:{row:""}},[o("span",{class:{title:t.lounges.length>0,headline:0===t.lounges.length}},[t._v("토픽")]),o("v-spacer"),o("v-btn",{class:{"my-0":!0,"ml-0":!0,"mr-0":t.$vuetify.breakpoint.xsOnly},attrs:{id:"createTopic",small:"",color:"accent",title:"새로운 토픽을 만들 수 있습니다."},on:{click:function(e){return t.openDialog(null)}}},[t._v("토픽만들기")]),o("br")],1),o("span",{staticClass:"ellipsis subtitle"},[t._v("드래그하여 순서를 변경할 수 있습니다.")]),o("v-divider",{staticClass:"my-3"}),t.topics.length>0?o("draggable",{model:{value:t.topics,callback:function(e){t.topics=e},expression:"topics"}},[o("transition-group",t._l(t.topics,function(e,r){return o("v-layout",{key:e.boardId,staticClass:"cursor-move align-center",attrs:{row:""}},[o("v-flex",{staticClass:"ellipsis align-center"},[o("div",{staticClass:"align-center ellipsis"},[t._v("\n                    "+t._s(e.boardName)+"\n                    "),e.isOwner?o("v-icon",{staticClass:"vertical-align-middle",attrs:{title:"토픽지기"}},[t._v("person")]):t._e()],1)]),o("v-spacer"),e.readRestrictDate||e.writeRestrictDate?[e.writeRestrictDate?o("v-tooltip",{attrs:{bottom:""}},[o("v-chip",{attrs:{slot:"activator",color:"red","text-color":"white",small:""},slot:"activator"},[t._v("쓰기제한")]),o("span",[t._v(t._s(t.$moment(e.writeRestrictDate,"YYYYMMDD").format("Y년 M월 D일까지")))])],1):t._e(),e.readRestrictDate?o("v-tooltip",{attrs:{bottom:""}},[o("v-chip",{attrs:{slot:"activator",color:"red","text-color":"white",small:""},slot:"activator"},[t._v("읽기제한")]),o("span",[t._v(t._s(t.$moment(e.readRestrictDate,"YYYYMMDD").format("Y년 M월 D일까지")))])],1):t._e()]:[e.isOwner?o("v-btn",{staticClass:"mx-0",attrs:{flat:"",primary:"",small:"",title:"내가 토픽지기인 토픽은 구독해제할 수 없습니다."},on:{click:function(o){return t.openDialog(e)}}},[t._v("토픽관리")]):o("v-btn",{staticClass:"mx-0",attrs:{flat:"",primary:"",small:""},on:{click:function(e){return t.removeItem(r)}}},[t._v("구독해제")])]],2)}),1)],1):o("v-layout",[o("span",[t._v("아직 구독하고 있는 토픽이 없네요.\n              "),o("br"),o("router-link",{staticClass:"primary--text",attrs:{to:"/searchBoard"}},[t._v("새로운 토픽")]),t._v("을 구독해보세요!\n            ")],1)])],1)],1)],1),o("v-dialog",{attrs:{id:"topicCreatorDialog",fullscreen:t.$vuetify.breakpoint.xsOnly,transition:t.$vuetify.breakpoint.xsOnly?"dialog-bottom-transition":"fade-transition",lazy:"",scrollable:"","max-width":"700px"},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[o("topic-creator",{attrs:{board:t.editItem},on:{closeDialog:t.closeDialog,resetBoard:t.resetBoard}})],1)],1),o("v-card-actions",{attrs:{"pa-3":""}},[o("v-layout",{attrs:{row:t.$vuetify.breakpoint.smAndUp,column:t.$vuetify.breakpoint.xsOnly,wrap:"","text-xs-right":""}},[o("v-btn",{staticClass:"mt-2",attrs:{flat:""},on:{click:t.reset}},[t._v("초기화")]),o("v-spacer"),o("v-btn",{staticClass:"mt-2",attrs:{color:"primary",loading:t.loading},on:{click:t.save}},[t._v("저장")])],1)],1)],1)},i=[],n=o("1516"),a=o.n(n),s=o("f94d"),l={name:"MyBoard",components:{draggable:a.a,TopicCreator:s["default"]},data(){return{loading:!1,dialog:!1,topics:[],editItem:{}}},methods:{reset(){this.topics=JSON.parse(JSON.stringify(this.originalTopics))},isDirty(){if(this.topics.length!==this.originalTopics.length)return!0;let t=0;while(t<this.topics.length){if(this.topics[t].boardId!==this.originalTopics[t].boardId)return!0;t++}return!1},save(){this.isDirty()?(this.loading=!0,this.$axios.put("/user/board",{boards:this.topics.map((t,e)=>({orderNumber:e+1,boardId:t.boardId}))}).then(t=>{this.loading=!1,this.$store.dispatch("setUserBoards",JSON.parse(JSON.stringify(this.topics)).concat(this.userBoards.filter(t=>"T"!==t.boardType))),this.$store.dispatch("showSnackbar",{text:"변경 내용을 반영하였습니다.",color:"success"})}).catch(t=>{console.log(t),this.loading=!1,this.$store.dispatch("showSnackbar",{text:t.response?t.response.data.message||"변경 내용을 반영하지 못했습니다.":"변경내용을 반영하지 못했습니다.",color:"error"})})):this.$store.dispatch("showSnackbar",{text:"변경된 내용이 없습니다.",color:"info"})},removeItem(t){const e=this.topics[t];e&&this.$axios.delete("/user/board/"+e.boardId).then(o=>{this.$store.dispatch("removeUserBoard",e.boardId),this.topics.splice(t,1),this.$store.dispatch("showSnackbar",{text:"토픽을 구독 해제하였습니다.",color:"success"})}).catch(t=>{console.log(t.response),this.$store.dispatch("showSnackbar",{text:t.response&&t.response.data.message||"토픽을 구독 해제하지 못했습니다.",color:"error"})})},openDialog(t){if(null===t){if("A"!==this.$store.getters.profile.auth)return void this.$store.dispatch("showSnackbar",{text:"인증을 받은 회원만 토픽을 만들 수 있습니다.",color:"error"});this.editItem=null,this.dialog=!0}else t&&this.$axios.get("/board",{params:{boardId:t.boardId}}).then(t=>{this.editItem=t.data,this.dialog=!0}).catch(t=>{console.log(t.response),this.$store.dispatch("showSnackbar",{text:t.response&&t.response.data.message||"토픽 정보를 가져오지 못했습니다.",color:"error"})})},closeDialog(){this.dialog=!1},resetBoard(){this.$axios.get("/user/board").then(t=>{this.$store.dispatch("setUserBoards",t.data),this.$nextTick(this.reset)}).catch(t=>{console.log(t),this.$store.dispatch("showSnackbar",{text:t.response&&t.response.data.message||"구독 토픽 목록을 불러오지 못했습니다.",color:"error"})})}},computed:{originalTopics(){return this.userBoards.filter(t=>"T"===t.boardType).map(t=>{return t.readRestrictDate&&this.$moment(t.readRestrictDate,"YYYYMMDD").isValid()&&!this.$moment(t.readRestrictDate,"YYYYMMDD").isBefore(this.$moment())||delete t.readRestrictDate,t.writeRestrictDate&&this.$moment(t.writeRestrictDate,"YYYYMMDD").isValid()&&!this.$moment(t.writeRestrictDate,"YYYYMMDD").isBefore(this.$moment())||delete t.writeRestrictDate,t})},lounges(){return this.userBoards.map(t=>{return t.readRestrictDate&&this.$moment(t.readRestrictDate,"YYYYMMDD").isValid()&&!this.$moment(t.readRestrictDate,"YYYYMMDD").isBefore(this.$moment())||delete t.readRestrictDate,t.writeRestrictDate&&this.$moment(t.writeRestrictDate,"YYYYMMDD").isValid()&&!this.$moment(t.writeRestrictDate,"YYYYMMDD").isBefore(this.$moment())||delete t.writeRestrictDate,t}).filter(t=>"T"!==t.boardType&&(t.writeRestrictDate||t.readRestrictDate))},userBoards(){return this.$store.getters.userBoards}},mounted(){this.reset()},watch:{userBoards(){this.reset()},dialog(t){document.body.style.position=t?"fixed":"initial"}},render(t){return t("myBoard",{attrs:{id:"app"}},this.draggable)}},c=l,d=(o("1917"),o("0c7c")),h=Object(d["a"])(c,r,i,!1,null,null,null);e["default"]=h.exports},1516:function(t,e,o){"use strict";"function"===typeof Symbol&&Symbol.iterator;var r=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var o=arguments[e];for(var r in o)Object.prototype.hasOwnProperty.call(o,r)&&(t[r]=o[r])}return t};function i(t){if(Array.isArray(t)){for(var e=0,o=Array(t.length);e<t.length;e++)o[e]=t[e];return o}return Array.from(t)}(function(){function e(t,e,o){return void 0==o?t:(t=null==t?{}:t,t[e]=o,t)}function n(t){function o(t){t.parentElement.removeChild(t)}function n(t,e,o){var r=0===o?t.children[0]:t.children[o-1].nextSibling;t.insertBefore(e,r)}function a(t,e){return t.map(function(t){return t.elm}).indexOf(e)}function s(t,e,o){if(!t)return[];var r=t.map(function(t){return t.elm}),n=[].concat(i(e)).map(function(t){return r.indexOf(t)});return o?n.filter(function(t){return-1!==t}):n}function l(t,e){var o=this;this.$nextTick(function(){return o.$emit(t.toLowerCase(),e)})}function c(t){var e=this;return function(o){null!==e.realList&&e["onDrag"+t](o),l.call(e,t,o)}}var d=["Start","Add","Remove","Update","End"],h=["Choose","Sort","Filter","Clone"],u=["Move"].concat(d,h).map(function(t){return"on"+t}),p=null,m={options:Object,list:{type:Array,required:!1,default:null},value:{type:Array,required:!1,default:null},noTransitionOnDrag:{type:Boolean,default:!1},clone:{type:Function,default:function(t){return t}},element:{type:String,default:"div"},move:{type:Function,default:null},componentData:{type:Object,required:!1,default:null}},f={name:"draggable",props:m,data:function(){return{transitionMode:!1,noneFunctionalComponentMode:!1,init:!1}},render:function(t){var o=this.$slots.default;if(o&&1===o.length){var r=o[0];r.componentOptions&&"transition-group"===r.componentOptions.tag&&(this.transitionMode=!0)}var n=0,a=o,s=this.$slots,l=s.header,c=s.footer;l&&(n=l.length,a=a?[].concat(i(l),i(a)):[].concat(i(l))),c&&(a=a?[].concat(i(a),i(c)):[].concat(i(c))),this.headerOffset=n;var d=null,h=function(t,o){d=e(d,t,o)};if(h("attrs",this.$attrs),this.componentData){var u=this.componentData,p=u.on,m=u.props;h("on",p),h("props",m)}return t(this.element,d,a)},mounted:function(){var e=this;if(this.noneFunctionalComponentMode=this.element.toLowerCase()!==this.$el.nodeName.toLowerCase(),this.noneFunctionalComponentMode&&this.transitionMode)throw new Error("Transition-group inside component is not supported. Please alter element value or remove transition-group. Current element value: "+this.element);var o={};d.forEach(function(t){o["on"+t]=c.call(e,t)}),h.forEach(function(t){o["on"+t]=l.bind(e,t)});var i=r({},this.options,o,{onMove:function(t,o){return e.onDragMove(t,o)}});!("draggable"in i)&&(i.draggable=">*"),this._sortable=new t(this.rootContainer,i),this.computeIndexes()},beforeDestroy:function(){void 0!==this._sortable&&this._sortable.destroy()},computed:{rootContainer:function(){return this.transitionMode?this.$el.children[0]:this.$el},isCloning:function(){return!!this.options&&!!this.options.group&&"clone"===this.options.group.pull},realList:function(){return this.list?this.list:this.value}},watch:{options:{handler:function(t){for(var e in t)-1==u.indexOf(e)&&this._sortable.option(e,t[e])},deep:!0},realList:function(){this.computeIndexes()}},methods:{getChildrenNodes:function(){if(this.init||(this.noneFunctionalComponentMode=this.noneFunctionalComponentMode&&1==this.$children.length,this.init=!0),this.noneFunctionalComponentMode)return this.$children[0].$slots.default;var t=this.$slots.default;return this.transitionMode?t[0].child.$slots.default:t},computeIndexes:function(){var t=this;this.$nextTick(function(){t.visibleIndexes=s(t.getChildrenNodes(),t.rootContainer.children,t.transitionMode)})},getUnderlyingVm:function(t){var e=a(this.getChildrenNodes()||[],t);if(-1===e)return null;var o=this.realList[e];return{index:e,element:o}},getUnderlyingPotencialDraggableComponent:function(t){var e=t.__vue__;return e&&e.$options&&"transition-group"===e.$options._componentTag?e.$parent:e},emitChanges:function(t){var e=this;this.$nextTick(function(){e.$emit("change",t)})},alterList:function(t){if(this.list)t(this.list);else{var e=[].concat(i(this.value));t(e),this.$emit("input",e)}},spliceList:function(){var t=arguments,e=function(e){return e.splice.apply(e,t)};this.alterList(e)},updatePosition:function(t,e){var o=function(o){return o.splice(e,0,o.splice(t,1)[0])};this.alterList(o)},getRelatedContextFromMoveEvent:function(t){var e=t.to,o=t.related,i=this.getUnderlyingPotencialDraggableComponent(e);if(!i)return{component:i};var n=i.realList,a={list:n,component:i};if(e!==o&&n&&i.getUnderlyingVm){var s=i.getUnderlyingVm(o);if(s)return r(s,a)}return a},getVmIndex:function(t){var e=this.visibleIndexes,o=e.length;return t>o-1?o:e[t]},getComponent:function(){return this.$slots.default[0].componentInstance},resetTransitionData:function(t){if(this.noTransitionOnDrag&&this.transitionMode){var e=this.getChildrenNodes();e[t].data=null;var o=this.getComponent();o.children=[],o.kept=void 0}},onDragStart:function(t){this.context=this.getUnderlyingVm(t.item),t.item._underlying_vm_=this.clone(this.context.element),p=t.item},onDragAdd:function(t){this.updateEvenemt(t);var e=t.item._underlying_vm_;if(void 0!==e){o(t.item);var r=this.getVmIndex(t.newIndex);this.spliceList(r,0,e),this.computeIndexes();var i={element:e,newIndex:r};this.emitChanges({added:i})}},onDragRemove:function(t){if(this.updateEvenemt(t),n(this.rootContainer,t.item,t.oldIndex),this.isCloning)o(t.clone);else{var e=this.context.index;this.spliceList(e,1);var r={element:this.context.element,oldIndex:e};this.resetTransitionData(e),this.emitChanges({removed:r})}},onDragUpdate:function(t){this.updateEvenemt(t),o(t.item),n(t.from,t.item,t.oldIndex);var e=this.context.index,r=this.getVmIndex(t.newIndex);this.updatePosition(e,r);var i={element:this.context.element,oldIndex:e,newIndex:r};this.emitChanges({moved:i})},updateEvenemt:function(t){this.updateProperty(t,"newIndex"),this.updateProperty(t,"oldIndex")},updateProperty:function(t,e){t.hasOwnProperty(e)&&(t[e]+=this.headerOffset)},computeFutureIndex:function(t,e){if(!t.element)return 0;var o=[].concat(i(e.to.children)).filter(function(t){return"none"!==t.style["display"]}),r=o.indexOf(e.related),n=t.component.getVmIndex(r),a=-1!=o.indexOf(p);return a||!e.willInsertAfter?n:n+1},onDragMove:function(t,e){var o=this.move;if(!o||!this.realList)return!0;var i=this.getRelatedContextFromMoveEvent(t),n=this.context,a=this.computeFutureIndex(i,t);return r(n,{futureIndex:a}),r(t,{relatedContext:i,draggedContext:n}),o(t,e)},onDragEnd:function(t){this.computeIndexes(),p=null}}};return f}Array.from||(Array.from=function(t){return[].slice.call(t)});var a=o("53fe");t.exports=n(a)})()},1917:function(t,e,o){"use strict";var r=o("5e58"),i=o.n(r);i.a},"53fe":function(t,e,o){var r,i;
/**!
 * Sortable
 * @author	RubaXa   <trash@rubaxa.org>
 * @author	owenm    <owen23355@gmail.com>
 * @license MIT
 */
/**!
 * Sortable
 * @author	RubaXa   <trash@rubaxa.org>
 * @author	owenm    <owen23355@gmail.com>
 * @license MIT
 */
(function(n){"use strict";r=n,i="function"===typeof r?r.call(e,o,e,t):r,void 0===i||(t.exports=i)})(function(){"use strict";if("undefined"===typeof window||!window.document)return function(){throw new Error("Sortable.js requires a window with a document")};var t,e,o,r,i,n,a,s,l,c,d,h,u,p,m,f,v,g,b,w,y,D,x,_,C,I=[],k=!1,T=!1,N=!1,$=[],E=!1,S=!1,A=/\s+/g,Y="Sortable"+(new Date).getTime(),M=window,R=M.document,O=M.parseInt,B=M.setTimeout,P=M.jQuery||M.Zepto,G=M.Polymer,L={capture:!1,passive:!1},X=!!navigator.userAgent.match(/(?:Trident.*rv[ :]?11\.|msie|iemobile)/i),H=!!navigator.userAgent.match(/Edge/i),F=H||X?"cssFloat":"float",U="draggable"in R.createElement("div"),W=function(){if(X)return!1;var t=R.createElement("x");return t.style.cssText="pointer-events:auto","auto"===t.style.pointerEvents}(),V=!1,j=!1,z=Math.abs,q=Math.min,J=[],Z=function(t,e){var o=wt(t),r=O(o.width),i=kt(t,0,e),n=kt(t,1,e),a=i&&wt(i),s=n&&wt(n),l=a&&O(a.marginLeft)+O(a.marginRight)+Xt(i).width,c=s&&O(s.marginLeft)+O(s.marginRight)+Xt(n).width;return"flex"===o.display?"column"===o.flexDirection||"column-reverse"===o.flexDirection?"vertical":"horizontal":i&&("block"===a.display||"flex"===a.display||"table"===a.display||"grid"===a.display||l>=r&&"none"===o[F]||n&&"none"===o[F]&&l+c>r)?"vertical":"horizontal"},K=function(t,e){for(var o=0;o<$.length;o++)if(!$[o].children.length){var r=Xt($[o]),i=$[o][Y].options.emptyInsertThreshold,n=t>=r.left-i&&t<=r.right+i,a=e>=r.top-i&&e<=r.bottom+i;if(n&&a)return $[o]}},Q=function(t,e,o,r,i){var n=Xt(o),a="vertical"===r?n.left:n.top,s="vertical"===r?n.right:n.bottom,l="vertical"===r?t:e;return a<l&&l<s},tt=function(e,o,r){var i=e===t&&C||Xt(e),n=o===t&&C||Xt(o),a="vertical"===r?i.left:i.top,s="vertical"===r?i.right:i.bottom,l="vertical"===r?i.width:i.height,c="vertical"===r?n.left:n.top,d="vertical"===r?n.right:n.bottom,h="vertical"===r?n.width:n.height;return a===c||s===d||a+l/2===c+h/2},et=function(t,e){if(!t||!t.getBoundingClientRect)return M;var o=t,r=!1;do{if(o.clientWidth<o.scrollWidth||o.clientHeight<o.scrollHeight){var i=wt(o);if(o.clientWidth<o.scrollWidth&&("auto"==i.overflowX||"scroll"==i.overflowX)||o.clientHeight<o.scrollHeight&&("auto"==i.overflowY||"scroll"==i.overflowY)){if(!o||!o.getBoundingClientRect||o===R.body)return M;if(r||e)return o;r=!0}}}while(o=o.parentNode);return M},ot=Mt(function(t,e,o,r){if(e.scroll){var i=o?o[Y]:window,n=e.scrollSensitivity,a=e.scrollSpeed,d=t.clientX,h=t.clientY,u=(window.innerWidth,window.innerHeight,!1);l!==o&&(rt(),s=e.scroll,c=e.scrollFn,!0===s&&(s=et(o,!0),l=s));var p=0,m=s;do{var f,v,g,w,y,D,x,_,C,T=m,N=Xt(T),$=N.top,E=N.bottom,S=N.left,A=N.right,O=N.width,B=N.height;if(T!==M?(f=T.scrollWidth,v=T.scrollHeight,g=wt(T),D=O<f&&("auto"===g.overflowX||"scroll"===g.overflowX),x=B<v&&("auto"===g.overflowY||"scroll"===g.overflowY),_=T.scrollLeft,C=T.scrollTop):(f=R.documentElement.scrollWidth,v=R.documentElement.scrollHeight,g=wt(R.documentElement),D=O<f&&("auto"===g.overflowX||"scroll"===g.overflowX||"visible"===g.overflowX),x=B<v&&("auto"===g.overflowY||"scroll"===g.overflowY||"visible"===g.overflowY),_=R.documentElement.scrollLeft,C=R.documentElement.scrollTop),w=D&&(z(A-d)<=n&&_+O<f)-(z(S-d)<=n&&!!_),y=x&&(z(E-h)<=n&&C+B<v)-(z($-h)<=n&&!!C),!I[p])for(var P=0;P<=p;P++)I[P]||(I[P]={});I[p].vx==w&&I[p].vy==y&&I[p].el===T||(I[p].el=T,I[p].vx=w,I[p].vy=y,clearInterval(I[p].pid),!T||0==w&&0==y||(u=!0,I[p].pid=setInterval(function(){r&&0===this.layer&&ut.active._emulateDragOver(!0);var e=I[this.layer].vy?I[this.layer].vy*a:0,o=I[this.layer].vx?I[this.layer].vx*a:0;"function"===typeof c&&"continue"!==c.call(i,o,e,t,b,I[this.layer].el)||(I[this.layer].el===M?M.scrollTo(M.pageXOffset+o,M.pageYOffset+e):(I[this.layer].el.scrollTop+=e,I[this.layer].el.scrollLeft+=o))}.bind({layer:p}),24))),p++}while(e.bubbleScroll&&m!==M&&(m=et(m,!1)));k=u}},30),rt=function(){I.forEach(function(t){clearInterval(t.pid)}),I=[]},it=function(t){function e(t,o){return function(r,i,n,a){var s=r.options.group.name&&i.options.group.name&&r.options.group.name===i.options.group.name;if(null==t&&(o||s))return!0;if(null==t||!1===t)return!1;if(o&&"clone"===t)return t;if("function"===typeof t)return e(t(r,i,n,a),o)(r,i,n,a);var l=(o?r:i).options.group.name;return!0===t||"string"===typeof t&&t===l||t.join&&t.indexOf(l)>-1}}var o={},r=t.group;r&&"object"==typeof r||(r={name:r}),o.name=r.name,o.checkPull=e(r.pull,!0),o.checkPut=e(r.put),o.revertClone=r.revertClone,t.group=o},nt=function(e){t&&t.parentNode&&t.parentNode[Y]&&t.parentNode[Y]._computeIsAligned(e)},at=function(t,e){var o=e;while(!o[Y])o=o.parentNode;return t===o},st=function(t,e,o){var r=t.parentNode;while(r&&!r[Y])r=r.parentNode;r&&r[Y][o](Ot(e,{artificialBubble:!0}))},lt=function(){!W&&o&&wt(o,"display","none")},ct=function(){!W&&o&&wt(o,"display","")};R.addEventListener("click",function(t){if(N)return t.preventDefault(),t.stopPropagation&&t.stopPropagation(),t.stopImmediatePropagation&&t.stopImmediatePropagation(),N=!1,!1},!0);var dt,ht=function(e){if(t){var o=K(e.clientX,e.clientY);o&&o[Y]._onDragOver({clientX:e.clientX,clientY:e.clientY,target:o,rootEl:o})}};function ut(t,e){if(!t||!t.nodeType||1!==t.nodeType)throw"Sortable: `el` must be HTMLElement, not "+{}.toString.call(t);this.el=t,this.options=e=Ot({},e),t[Y]=this;var o={group:null,sort:!0,disabled:!1,store:null,handle:null,scroll:!0,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0,draggable:/[uo]l/i.test(t.nodeName)?"li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return Z(t,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(t,e){t.setData("Text",e.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,touchStartThreshold:O(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:!1!==ut.supportPointer&&("PointerEvent"in window||window.navigator&&"msPointerEnabled"in window.navigator),emptyInsertThreshold:5};for(var r in o)!(r in e)&&(e[r]=o[r]);for(var i in it(e),this)"_"===i.charAt(0)&&"function"===typeof this[i]&&(this[i]=this[i].bind(this));this.nativeDraggable=!e.forceFallback&&U,e.supportPointer?vt(t,"pointerdown",this._onTapStart):(vt(t,"mousedown",this._onTapStart),vt(t,"touchstart",this._onTapStart)),this.nativeDraggable&&(vt(t,"dragover",this),vt(t,"dragenter",this)),$.push(this.el),e.store&&e.store.get&&this.sort(e.store.get(this)||[])}function pt(t,e,o,r){if(t){o=o||R;do{if(">*"===e&&t.parentNode===o||Yt(t,e)||r&&t===o)return t;if(t===o)break}while(t=mt(t))}return null}function mt(t){return t.host&&t!==R&&t.host.nodeType?t.host:t.parentNode}function ft(t){t.dataTransfer&&(t.dataTransfer.dropEffect="move"),t.cancelable&&t.preventDefault()}function vt(t,e,o){t.addEventListener(e,o,L)}function gt(t,e,o){t.removeEventListener(e,o,L)}function bt(t,e,o){if(t&&e)if(t.classList)t.classList[o?"add":"remove"](e);else{var r=(" "+t.className+" ").replace(A," ").replace(" "+e+" "," ");t.className=(r+(o?" "+e:"")).replace(A," ")}}function wt(t,e,o){var r=t&&t.style;if(r){if(void 0===o)return R.defaultView&&R.defaultView.getComputedStyle?o=R.defaultView.getComputedStyle(t,""):t.currentStyle&&(o=t.currentStyle),void 0===e?o:o[e];e in r||-1!==e.indexOf("webkit")||(e="-webkit-"+e),r[e]=o+("string"===typeof o?"":"px")}}function yt(t){var e="";do{var o=wt(t,"transform");o&&"none"!==o&&(e=o+" "+e)}while(t=t.parentNode);return window.DOMMatrix?new DOMMatrix(e):window.WebKitCSSMatrix?new WebKitCSSMatrix(e):window.CSSMatrix?new CSSMatrix(e):void 0}function Dt(t,e,o){if(t){var r=t.getElementsByTagName(e),i=0,n=r.length;if(o)for(;i<n;i++)o(r[i],i);return r}return[]}function xt(t,e,o,i,n,a,s,l,c){t=t||e[Y];var d,h=t.options,u="on"+o.charAt(0).toUpperCase()+o.substr(1);!window.CustomEvent||X||H?(d=R.createEvent("Event"),d.initEvent(o,!0,!0)):d=new CustomEvent(o,{bubbles:!0,cancelable:!0}),d.to=n||e,d.from=a||e,d.item=i||e,d.clone=r,d.oldIndex=s,d.newIndex=l,d.originalEvent=c,e&&e.dispatchEvent(d),h[u]&&h[u].call(t,d)}function _t(t,e,o,r,i,n,a,s){var l,c,d=t[Y],h=d.options.onMove;return!window.CustomEvent||X||H?(l=R.createEvent("Event"),l.initEvent("move",!0,!0)):l=new CustomEvent("move",{bubbles:!0,cancelable:!0}),l.to=e,l.from=t,l.dragged=o,l.draggedRect=r,l.related=i||e,l.relatedRect=n||Xt(e),l.willInsertAfter=s,l.originalEvent=a,t.dispatchEvent(l),h&&(c=h.call(d,l,a)),c}function Ct(t){t.draggable=!1}function It(){V=!1}function kt(e,r,i){var n=0,a=0,s=e.children;while(a<s.length){if("none"!==s[a].style.display&&s[a]!==o&&s[a]!==t&&pt(s[a],i.draggable,e,!1)){if(n===r)return s[a];n++}a++}return null}function Tt(t){var e=t.lastElementChild;return e===o&&(e=t.children[t.childElementCount-2]),e||null}function Nt(t,e,o){var r=Xt(Tt(o)),i="vertical"===e?t.clientY:t.clientX,n="vertical"===e?t.clientX:t.clientY,a="vertical"===e?r.bottom:r.right,s="vertical"===e?r.left:r.top,l="vertical"===e?r.right:r.bottom;return n>s&&n<l&&i>a}function $t(e,o,r,i,n,a,s){var l=Xt(o),c="vertical"===r?e.clientY:e.clientX,d="vertical"===r?l.height:l.width,h="vertical"===r?l.top:l.left,u="vertical"===r?l.bottom:l.right,p=Xt(t),m=!1;if(!a)if(s&&_<d*i)if(!E&&(1===D?c>h+d*n/2:c<u-d*n/2)&&(E=!0),E)m=!0;else{"vertical"===r?p.top:p.left,"vertical"===r?p.bottom:p.right;if(1===D?c<h+_:c>u-_)return-1*D}else if(c>h+d*(1-i)/2&&c<u-d*(1-i)/2)return c>h+d/2?-1:1;return m=m||a,m&&(c<h+d*n/2||c>u-d*n/2)?c>h+d/2?1:-1:0}function Et(e,o){var r=At(t,o.draggable),i=At(e,o.draggable);return r<i?1:-1}function St(t){var e=t.tagName+t.className+t.src+t.href+t.textContent,o=e.length,r=0;while(o--)r+=e.charCodeAt(o);return r.toString(36)}function At(t,e){var o=0;if(!t||!t.parentNode)return-1;while(t&&(t=t.previousElementSibling))"TEMPLATE"!==t.nodeName.toUpperCase()&&t!==r&&o++;return o}function Yt(t,e){if(t)try{if(t.matches)return t.matches(e);if(t.msMatchesSelector)return t.msMatchesSelector(e);if(t.webkitMatchesSelector)return t.webkitMatchesSelector(e)}catch(o){return!1}return!1}function Mt(t,e){return function(){if(!dt){var o=arguments,r=this;dt=B(function(){1===o.length?t.call(r,o[0]):t.apply(r,o),dt=void 0},e)}}}function Rt(){clearTimeout(dt),dt=void 0}function Ot(t,e){if(t&&e)for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o]);return t}function Bt(t){return G&&G.dom?G.dom(t).cloneNode(!0):P?P(t).clone(!0)[0]:t.cloneNode(!0)}function Pt(t){J.length=0;var e=t.getElementsByTagName("input"),o=e.length;while(o--){var r=e[o];r.checked&&J.push(r)}}function Gt(t){return B(t,0)}function Lt(t){return clearTimeout(t)}function Xt(t,e,o){if(t.getBoundingClientRect||t===M){var r,i,n,a,s,l,c;if(t!==M?(r=t.getBoundingClientRect(),i=r.top,n=r.left,a=r.bottom,s=r.right,l=r.height,c=r.width):(i=0,n=0,a=window.innerHeight,s=window.innerWidth,l=window.innerHeight,c=window.innerWidth),o&&t!==M){if(e=e||t.parentNode,!X)do{if(e&&e.getBoundingClientRect&&"none"!==wt(e,"transform")){var d=e.getBoundingClientRect();i-=d.top+O(wt(e,"border-top-width")),n-=d.left+O(wt(e,"border-left-width")),a=i+r.height,s=n+r.width;break}}while(e=e.parentNode);var h=yt(t),u=h&&h.a,p=h&&h.d;h&&(i/=p,n/=u,c/=u,l/=p,a=i+l,s=n+c)}return{top:i,left:n,bottom:a,right:s,width:c,height:l}}}function Ht(t,e){var o=et(o,!0),r=Xt(t)[e];while(o){var i,n=Xt(o)[e];if(i="top"===e||"left"===e?r>=n:r<=n,!i)return!0;if(o===M)break;o=et(o,!1)}return!1}return R.addEventListener("dragover",ht),R.addEventListener("mousemove",ht),ut.prototype={constructor:ut,_computeIsAligned:function(e){var r;if(o&&!W?(lt(),r=R.elementFromPoint(e.clientX,e.clientY),ct()):r=e.target,r=pt(r,this.options.draggable,this.el,!1),!j&&t&&t.parentNode===this.el){for(var i=this.el.children,n=0;n<i.length;n++)pt(i[n],this.options.draggable,this.el,!1)&&i[n]!==r&&(i[n].sortableMouseAligned=Q(e.clientX,e.clientY,i[n],this._getDirection(e,null),this.options));pt(r,this.options.draggable,this.el,!0)||(y=null),j=!0,B(function(){j=!1},30)}},_getDirection:function(e,o){return"function"===typeof this.options.direction?this.options.direction.call(this,e,o,t):this.options.direction},_onTapStart:function(e){if(e.cancelable){var o,r=this,i=this.el,n=this.options,s=n.preventOnFilter,l=e.type,c=e.touches&&e.touches[0],d=(c||e).target,h=e.target.shadowRoot&&(e.path&&e.path[0]||e.composedPath&&e.composedPath()[0])||d,u=n.filter;if(Pt(i),(!X||e.artificialBubble||at(i,d))&&!t&&!(/mousedown|pointerdown/.test(l)&&0!==e.button||n.disabled)&&!h.isContentEditable)if(d=pt(d,n.draggable,i,!1),d){if(a!==d){if(o=At(d,n.draggable),"function"===typeof u){if(u.call(this,e,d,this))return xt(r,h,"filter",d,i,i,o),void(s&&e.cancelable&&e.preventDefault())}else if(u&&(u=u.split(",").some(function(t){if(t=pt(h,t.trim(),i,!1),t)return xt(r,t,"filter",d,i,i,o),!0}),u))return void(s&&e.cancelable&&e.preventDefault());n.handle&&!pt(h,n.handle,i,!1)||this._prepareDragStart(e,c,d,o)}}else X&&st(i,e,"_onTapStart")}},_handleAutoScroll:function(e,o){if(t&&this.options.scroll){var r=e.clientX,i=e.clientY,n=R.elementFromPoint(r,i),a=this;if(o||H||X){ot(e,a.options,n,o);var s=et(n,!0);!k||m&&r===f&&i===v||(m&&clearInterval(m),m=setInterval(function(){if(t){var n=et(R.elementFromPoint(r,i),!0);n!==s&&(s=n,rt(),ot(e,a.options,s,o))}},10),f=r,v=i)}else{if(!a.options.bubbleScroll||et(n,!0)===window)return void rt();ot(e,a.options,et(n,!1),!1)}}},_prepareDragStart:function(o,r,s,l){var c,h=this,p=h.el,m=h.options,f=p.ownerDocument;s&&!t&&s.parentNode===p&&(i=p,t=s,e=t.parentNode,n=t.nextSibling,a=s,u=m.group,d=l,g={target:t,clientX:(r||o).clientX,clientY:(r||o).clientY},this._lastX=(r||o).clientX,this._lastY=(r||o).clientY,t.style["will-change"]="all",t.style.transition="",t.style.transform="",c=function(){h._disableDelayedDrag(),t.draggable=h.nativeDraggable,h._triggerDragStart(o,r),xt(h,i,"choose",t,i,i,d),bt(t,m.chosenClass,!0)},m.ignore.split(",").forEach(function(e){Dt(t,e.trim(),Ct)}),m.supportPointer?(vt(f,"pointerup",h._onDrop),vt(f,"pointercancel",h._onDrop)):(vt(f,"mouseup",h._onDrop),vt(f,"touchend",h._onDrop),vt(f,"touchcancel",h._onDrop)),m.delay?(vt(f,"mouseup",h._disableDelayedDrag),vt(f,"touchend",h._disableDelayedDrag),vt(f,"touchcancel",h._disableDelayedDrag),vt(f,"mousemove",h._delayedDragTouchMoveHandler),vt(f,"touchmove",h._delayedDragTouchMoveHandler),m.supportPointer&&vt(f,"pointermove",h._delayedDragTouchMoveHandler),h._dragStartTimer=B(c,m.delay)):c())},_delayedDragTouchMoveHandler:function(t){var e=t.touches?t.touches[0]:t;q(z(e.clientX-this._lastX),z(e.clientY-this._lastY))>=this.options.touchStartThreshold&&this._disableDelayedDrag()},_disableDelayedDrag:function(){var t=this.el.ownerDocument;clearTimeout(this._dragStartTimer),gt(t,"mouseup",this._disableDelayedDrag),gt(t,"touchend",this._disableDelayedDrag),gt(t,"touchcancel",this._disableDelayedDrag),gt(t,"mousemove",this._delayedDragTouchMoveHandler),gt(t,"touchmove",this._delayedDragTouchMoveHandler),gt(t,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(e,o){o=o||("touch"==e.pointerType?e:null),!this.nativeDraggable||o?this.options.supportPointer?vt(R,"pointermove",this._onTouchMove):vt(R,o?"touchmove":"mousemove",this._onTouchMove):(vt(t,"dragend",this),vt(i,"dragstart",this._onDragStart));try{R.selection?Gt(function(){R.selection.empty()}):window.getSelection().removeAllRanges()}catch(r){}},_dragStarted:function(e){if(T=!1,i&&t){this.nativeDraggable&&(vt(R,"dragover",this._handleAutoScroll),vt(R,"dragover",nt));var o=this.options;!e&&bt(t,o.dragClass,!1),bt(t,o.ghostClass,!0),wt(t,"transform",""),ut.active=this,e&&this._appendGhost(),xt(this,i,"start",t,i,i,d)}else this._nulling()},_emulateDragOver:function(e){if(b){if(this._lastX===b.clientX&&this._lastY===b.clientY&&!e)return;this._lastX=b.clientX,this._lastY=b.clientY,lt();var o=R.elementFromPoint(b.clientX,b.clientY),r=o;while(o&&o.shadowRoot)o=o.shadowRoot.elementFromPoint(b.clientX,b.clientY),r=o;if(r)do{var i;if(r[Y])if(i=r[Y]._onDragOver({clientX:b.clientX,clientY:b.clientY,target:o,rootEl:r}),i&&!this.options.dragoverBubble)break;o=r}while(r=r.parentNode);t.parentNode[Y]._computeIsAligned(b),ct()}},_onTouchMove:function(t){if(g){if(!t.cancelable)return;var e=this.options,r=e.fallbackTolerance,i=e.fallbackOffset,n=t.touches?t.touches[0]:t,a=o&&yt(o),s=o&&a&&a.a,l=o&&a&&a.d,c=(n.clientX-g.clientX+i.x)/(s||1),d=(n.clientY-g.clientY+i.y)/(l||1),h=t.touches?"translate3d("+c+"px,"+d+"px,0)":"translate("+c+"px,"+d+"px)";if(!ut.active&&!T){if(r&&q(z(n.clientX-this._lastX),z(n.clientY-this._lastY))<r)return;this._onDragStart(t,!0)}this._handleAutoScroll(n,!0),w=!0,b=n,wt(o,"webkitTransform",h),wt(o,"mozTransform",h),wt(o,"msTransform",h),wt(o,"transform",h),t.cancelable&&t.preventDefault()}},_appendGhost:function(){if(!o){var e=Xt(t,this.options.fallbackOnBody?R.body:i,!0),r=(wt(t),this.options);o=t.cloneNode(!0),bt(o,r.ghostClass,!1),bt(o,r.fallbackClass,!0),bt(o,r.dragClass,!0),wt(o,"box-sizing","border-box"),wt(o,"margin",0),wt(o,"top",e.top),wt(o,"left",e.left),wt(o,"width",e.width),wt(o,"height",e.height),wt(o,"opacity","0.8"),wt(o,"position","fixed"),wt(o,"zIndex","100000"),wt(o,"pointerEvents","none"),r.fallbackOnBody&&R.body.appendChild(o)||i.appendChild(o)}},_onDragStart:function(e,o){var n=this,a=e.dataTransfer,s=n.options;r=Bt(t),r.draggable=!1,r.style["will-change"]="",this._hideClone(),bt(r,n.options.chosenClass,!1),n._cloneId=Gt(function(){n.options.removeCloneOnHide||i.insertBefore(r,t),xt(n,i,"clone",t)}),!o&&bt(t,s.dragClass,!0),o?(N=!0,n._loopId=setInterval(n._emulateDragOver,50)):(gt(R,"mouseup",n._onDrop),gt(R,"touchend",n._onDrop),gt(R,"touchcancel",n._onDrop),gt(R,"pointercancel",n._onDrop),a&&(a.effectAllowed="move",s.setData&&s.setData.call(n,a,t)),vt(R,"drop",n),wt(t,"transform","translateZ(0)")),T=!0,n._dragStartId=Gt(n._dragStarted.bind(n,o)),vt(R,"selectstart",n)},_onDragOver:function(r){var a,s,l,c=this.el,h=r.target,m=this.options,f=m.group,v=ut.active,g=u===f,b=m.sort,I=this;if(!V&&(!X||r.rootEl||r.artificialBubble||at(c,h))){if(void 0!==r.preventDefault&&r.cancelable&&r.preventDefault(),w=!0,h=pt(h,m.draggable,c,!0),pt(r.target,null,t,!0)||h.animated)return F();if(h!==t&&(N=!1),v&&!m.disabled&&(g?b||(l=!i.contains(t)):p===this||(this.lastPutMode=u.checkPull(this,v,t,r))&&f.checkPut(this,v,t,r))){var T=this._getDirection(r,h);if(a=Xt(t),l)return this._hideClone(),e=i,n?i.insertBefore(t,n):i.appendChild(t),F();if(0===c.children.length||c.children[0]===o||Nt(r,T,c)&&!t.animated){if(0!==c.children.length&&c.children[0]!==o&&c===r.target&&(h=Tt(c)),h&&(s=Xt(h)),g?v._hideClone():v._showClone(this),!1!==_t(i,c,t,a,h,s,r,!!h))return c.appendChild(t),e=c,C=null,U(),this._animate(a,t),h&&this._animate(s,h),F()}else if(h&&h!==t&&void 0!==h.parentNode[Y]&&h!==c){var $,A=0,M=h.sortableMouseAligned,O=t.parentNode!==c,P=Ht(h,"vertical"===T?"top":"left");if(y!==h&&(x=null,$=Xt(h)["vertical"===T?"top":"left"],E=!1),tt(t,h,T)&&M||O||P||m.invertSwap||"insert"===x||"swap"===x?("swap"!==x&&(S=m.invertSwap||O||k||P),A=$t(r,h,T,m.swapThreshold,null==m.invertedSwapThreshold?m.swapThreshold:m.invertedSwapThreshold,S,y===h),x="swap"):(A=Et(h,m),x="insert"),0===A)return F();C=null,y=h,D=A,s=Xt(h);var G=h.nextElementSibling,L=!1;L=1===A;var H=_t(i,c,t,a,h,s,r,L);if(!1!==H)return 1!==H&&-1!==H||(L=1===H),V=!0,B(It,30),g?v._hideClone():v._showClone(this),L&&!G?c.appendChild(t):h.parentNode.insertBefore(t,L?G:h),e=t.parentNode,void 0===$||S||(_=z($-Xt(h)["vertical"===T?"top":"left"])),U(),!O&&this._animate(s,h),this._animate(a,t),F()}if(c.contains(t))return F()}return X&&!r.rootEl&&st(c,r,"_onDragOver"),!1}function F(){return v&&(bt(t,p?p.options.ghostClass:v.options.ghostClass,!1),bt(t,m.ghostClass,!0)),p!==I&&I!==ut.active?p=I:I===ut.active&&(p=null),(h===t&&!t.animated||h===c&&!h.animated)&&(y=null),m.dragoverBubble||r.rootEl||h===R||(I._handleAutoScroll(r),t.parentNode[Y]._computeIsAligned(r)),!m.dragoverBubble&&r.stopPropagation&&r.stopPropagation(),!0}function U(){xt(I,i,"change",h,c,i,d,At(t,m.draggable),r)}},_animate:function(e,o){var r=this.options.animation;if(r){var i=Xt(o);if(o===t&&(C=i),1===e.nodeType&&(e=Xt(e)),e.left+e.width/2!==i.left+i.width/2||e.top+e.height/2!==i.top+i.height/2){var n=yt(this.el),a=n&&n.a,s=n&&n.d;wt(o,"transition","none"),wt(o,"transform","translate3d("+(e.left-i.left)/(a||1)+"px,"+(e.top-i.top)/(s||1)+"px,0)"),o.offsetWidth,wt(o,"transition","transform "+r+"ms"+(this.options.easing?" "+this.options.easing:"")),wt(o,"transform","translate3d(0,0,0)")}"number"===typeof o.animated&&clearTimeout(o.animated),o.animated=B(function(){wt(o,"transition",""),wt(o,"transform",""),o.animated=!1},r)}},_offUpEvents:function(){var t=this.el.ownerDocument;gt(R,"touchmove",this._onTouchMove),gt(R,"pointermove",this._onTouchMove),gt(t,"mouseup",this._onDrop),gt(t,"touchend",this._onDrop),gt(t,"pointerup",this._onDrop),gt(t,"touchcancel",this._onDrop),gt(t,"pointercancel",this._onDrop),gt(R,"selectstart",this)},_onDrop:function(a){var s=this.el,l=this.options;T=!1,k=!1,S=!1,E=!1,clearInterval(this._loopId),clearInterval(m),rt(),Rt(),clearTimeout(this._dragStartTimer),Lt(this._cloneId),Lt(this._dragStartId),gt(R,"mousemove",this._onTouchMove),this.nativeDraggable&&(gt(R,"drop",this),gt(s,"dragstart",this._onDragStart),gt(R,"dragover",this._handleAutoScroll),gt(R,"dragover",nt)),this._offUpEvents(),a&&(w&&(a.cancelable&&a.preventDefault(),!l.dropBubble&&a.stopPropagation()),o&&o.parentNode&&o.parentNode.removeChild(o),(i===e||p&&"clone"!==p.lastPutMode)&&r&&r.parentNode&&r.parentNode.removeChild(r),t&&(this.nativeDraggable&&gt(t,"dragend",this),Ct(t),t.style["will-change"]="",bt(t,p?p.options.ghostClass:this.options.ghostClass,!1),bt(t,this.options.chosenClass,!1),xt(this,i,"unchoose",t,e,i,d,null,a),i!==e?(h=At(t,l.draggable),h>=0&&(xt(null,e,"add",t,e,i,d,h,a),xt(this,i,"remove",t,e,i,d,h,a),xt(null,e,"sort",t,e,i,d,h,a),xt(this,i,"sort",t,e,i,d,h,a)),p&&p.save()):t.nextSibling!==n&&(h=At(t,l.draggable),h>=0&&(xt(this,i,"update",t,e,i,d,h,a),xt(this,i,"sort",t,e,i,d,h,a))),ut.active&&(null!=h&&-1!==h||(h=d),xt(this,i,"end",t,e,i,d,h,a),this.save()))),this._nulling()},_nulling:function(){i=t=e=o=n=r=a=s=l=I.length=m=f=v=g=b=w=h=d=y=D=C=p=u=ut.active=null,J.forEach(function(t){t.checked=!0}),J.length=0},handleEvent:function(e){switch(e.type){case"drop":case"dragend":this._onDrop(e);break;case"dragenter":case"dragover":t&&(this._onDragOver(e),ft(e));break;case"selectstart":e.preventDefault();break}},toArray:function(){for(var t,e=[],o=this.el.children,r=0,i=o.length,n=this.options;r<i;r++)t=o[r],pt(t,n.draggable,this.el,!1)&&e.push(t.getAttribute(n.dataIdAttr)||St(t));return e},sort:function(t){var e={},o=this.el;this.toArray().forEach(function(t,r){var i=o.children[r];pt(i,this.options.draggable,o,!1)&&(e[t]=i)},this),t.forEach(function(t){e[t]&&(o.removeChild(e[t]),o.appendChild(e[t]))})},save:function(){var t=this.options.store;t&&t.set&&t.set(this)},closest:function(t,e){return pt(t,e||this.options.draggable,this.el,!1)},option:function(t,e){var o=this.options;if(void 0===e)return o[t];o[t]=e,"group"===t&&it(o)},destroy:function(){var t=this.el;t[Y]=null,gt(t,"mousedown",this._onTapStart),gt(t,"touchstart",this._onTapStart),gt(t,"pointerdown",this._onTapStart),this.nativeDraggable&&(gt(t,"dragover",this),gt(t,"dragenter",this)),Array.prototype.forEach.call(t.querySelectorAll("[draggable]"),function(t){t.removeAttribute("draggable")}),this._onDrop(),$.splice($.indexOf(this.el),1),this.el=t=null},_hideClone:function(){r.cloneHidden||(wt(r,"display","none"),r.cloneHidden=!0,r.parentNode&&this.options.removeCloneOnHide&&r.parentNode.removeChild(r))},_showClone:function(e){"clone"===e.lastPutMode?r.cloneHidden&&(i.contains(t)&&!this.options.group.revertClone?i.insertBefore(r,t):n?i.insertBefore(r,n):i.appendChild(r),this.options.group.revertClone&&this._animate(t,r),wt(r,"display",""),r.cloneHidden=!1):this._hideClone()}},vt(R,"touchmove",function(t){(ut.active||T)&&t.cancelable&&t.preventDefault()}),ut.utils={on:vt,off:gt,css:wt,find:Dt,is:function(t,e){return!!pt(t,e,t,!1)},extend:Ot,throttle:Mt,closest:pt,toggleClass:bt,clone:Bt,index:At,nextTick:Gt,cancelNextTick:Lt,detectDirection:Z,getChild:kt},ut.create=function(t,e){return new ut(t,e)},ut.version="1.8.1",ut})},"5e58":function(t,e,o){},f94d:function(t,e,o){"use strict";o.r(e);var r=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("v-card",{attrs:{tile:""}},[o("v-toolbar",{attrs:{card:"",color:"white"}},[o("v-toolbar-title",[t._v(t._s(t.board?"토픽 관리":"새로운 토픽 만들기"))]),o("v-spacer"),o("v-toolbar-items",[o("v-btn",{attrs:{icon:""},on:{click:function(e){return t.$emit("closeDialog",null)}}},[o("v-icon",[t._v("close")])],1)],1)],1),o("v-card-text",[o("v-form",{ref:"form"},[o("v-layout",{attrs:{row:"",xs12:"",wrap:""}},[o("v-flex",{staticClass:"mb-1",attrs:{xs6:""}},[t.board?o("v-text-field",{staticClass:"dense",attrs:{readonly:"",label:"토픽ID",hint:"pedagy.com/<b>seoul</b>과 같이 URL주소에 들어가는 문구입니다."},model:{value:t.boardId,callback:function(e){t.boardId=e},expression:"boardId"}}):o("v-text-field",{staticClass:"dense",attrs:{rules:t.boardIdRules,"error-messages":t.boardIdErrors,maxlength:"15",label:"토픽ID",hint:"pedagy.com/<b>seoul</b>과 같이 URL주소에 들어갈 문구입니다.",placeholder:"비워두면 임의로 생성됩니다.","validate-on-blur":""},on:{blur:t.checkBoardId},model:{value:t.boardId,callback:function(e){t.boardId=e},expression:"boardId"}})],1),o("v-flex",{staticClass:"mb-1",attrs:{xs6:""}},[o("v-text-field",{staticClass:"dense",attrs:{rules:t.boardNameRules,maxlength:"200",label:"토픽 이름",required:"",hint:"토픽 목록에 표시되는 이름입니다.","validate-on-blur":""},model:{value:t.boardName,callback:function(e){t.boardName=e},expression:"boardName"}})],1),o("v-flex",{attrs:{xs12:""}},[o("v-textarea",{ref:"boardDescription",attrs:{rows:3,maxlength:"1000",height:"80px",label:"토픽 소개",hint:"토픽 이름 아래에 작게 표시되는 설명입니다.","validate-on-blur":""},model:{value:t.boardDescription,callback:function(e){t.boardDescription=e},expression:"boardDescription"}})],1),o("v-flex",{attrs:{xs6:""}},[o("v-checkbox",{ref:"allowAnonymous",staticClass:"dense mt-2",attrs:{label:"익명글 허용","hide-details":""},model:{value:t.allowAnonymous,callback:function(e){t.allowAnonymous=e},expression:"allowAnonymous"}})],1),o("v-flex",{attrs:{xs6:""}},[o("v-tooltip",{attrs:{bottom:""}},[o("v-checkbox",{ref:"useCategory",staticClass:"dense mt-2",attrs:{slot:"activator",label:"카테고리 분류 사용","hide-details":""},slot:"activator",model:{value:t.useCategory,callback:function(e){t.useCategory=e},expression:"useCategory"}}),o("span",[t._v("글을 작성할 때 작성자가 기본/정보/질문 중 하나의 카테고리를 지정할 수 있습니다.")])],1)],1),o("v-flex",{staticClass:"mt-3",attrs:{xs6:""}},[o("v-select",{attrs:{items:t.allGroupAuthItems,label:"토픽 공개 여부",dense:""},model:{value:t.allGroupAuth,callback:function(e){t.allGroupAuth=e},expression:"allGroupAuth"}})],1),o("v-flex",{staticClass:"mt-3",attrs:{xs6:""}},[o("v-layout",{attrs:{"align-center":"","fill-height":""}},[o(t.$vuetify.breakpoint.xsOnly?"small":"div",{tag:"component",domProps:{innerHTML:t._s(t.allGroupAuthDescription)}})],1)],1),o("v-flex",{attrs:{xs12:""}},[o(t.$vuetify.breakpoint.xsOnly?"v-select":"v-autocomplete",{tag:"component",attrs:{name:"allowedGroups",chips:"",multiple:"","item-text":"text",dense:"","item-value":"value",disabled:"READWRITE"===t.allGroupAuth,items:t.groupItems,label:"구독 권한",hint:"내가 구독할 수 있도록 선택해야 합니다."+(""!==t.myGroup?" 나의 구독가능 정보 : "+t.myGroup:""),"persistent-hint":"","menu-props":{closeOnContentClick:t.$vuetify.breakpoint.xsOnly}},scopedSlots:t._u([{key:"selection",fn:function(e){return[o("v-chip",{key:e.item.value,attrs:{close:"",small:"",selected:e.selected},on:{input:function(o){return t.removeChip(e,e.item,t.allowedGroups)}}},[t._v(t._s(e.item.text))])]}},{key:"item",fn:function(e){return[o("v-list-tile-content",[o("v-list-tile-title",{domProps:{innerHTML:t._s(e.item.text)}})],1)]}}]),model:{value:t.allowedGroups,callback:function(e){t.allowedGroups=e},expression:"allowedGroups"}})],1),t.board?o("v-flex",{staticClass:"mt-2",attrs:{xs12:""}},[o("v-select",{attrs:{name:"ownerNickName",dense:"",items:t.boardMemberItems,label:"토픽지기 양도",hint:"선택한 회원에게 토픽지기가 양도됩니다.","persistent-hint":""},model:{value:t.ownerNickName,callback:function(e){t.ownerNickName=e},expression:"ownerNickName"}})],1):t._e(),t.board&&t.board.reservedDate?o("v-flex",{staticClass:"mt-3",attrs:{xs12:""}},[o("v-textarea",{ref:"reservedContents",attrs:{rows:3,readonly:"",height:"80px",label:"변경 예약("+t.$moment(t.board.reservedDate,"YYYYMMDD").format("Y.M.D")+" 반영 예정) 내용",hint:"변경이 예약된 토픽의 내용입니다."},model:{value:t.reservedContents,callback:function(e){t.reservedContents=e},expression:"reservedContents"}})],1):t._e()],1),o("v-divider",{staticClass:"my-2"}),o("v-layout",{attrs:{row:""}},[o("v-btn",{attrs:{flat:""},on:{click:function(e){return t.reset(!0)}}},[t._v("초기화")]),t.board?o("v-btn",{attrs:{color:"error"},on:{click:t.deleteBoard}},[t._v("삭제")]):t._e(),o("v-spacer"),o("v-btn",{attrs:{color:"primary",loading:t.loading},on:{click:t.save}},[t._v("등록")])],1)],1)],1)],1)},i=[];const n=["document","documents","profile","profiles","auth","user","users","comment","comments","vote","votes","report","reports","index","scraps","scrap","board","boards","manage","manages","chat","chats","message","messages","group","groups","event","events","signup","signin","signout","resetPassword","notification","notifications","survey","list","admin","ADMIN","ADMINISTRATOR","administrator","attach","profiles","animal","loungeBest","topicBest","lounge","topic","type","best","sanction","userId","nickName","myPage","myBoard","myCommunity","pedagy","myPedagy","Pedagy"],a=[/^(?:[a-zA-Z]+)(?:[a-zA-Z0-9\-_]{0,15})$/,/^((?!(--|__)).)*$/],s={M:"전공",G:"학년",N:"일반",R:"지역",Z:"인증"};var l={name:"topicCreator",data(){return{loading:!1,boardId:null,boardName:null,boardDescription:null,allGroupAuth:"READONLY",allowAnonymous:!0,useCategory:!1,allowedGroups:[],allGroupAuthItems:[{value:"READWRITE",text:"전체구독허용"},{value:"READONLY",text:"읽기공개"},{value:"NONE",text:"비공개"}],ownerNickName:null,groupItems:[],boardIdRules:[t=>!n.includes(t)||"사용할 수 없는 ID입니다.",t=>!t||t.length>3&&t.length<16||"4~15자로 입력해주세요.",t=>a[0].test(t)||"토픽ID의 길이가 너무 길거나, 알파벳이 아닌 문자가 있습니다.",t=>a[1].test(t)||"토픽ID에 연속된 [_, -]가 있습니다."],boardNameRules:[t=>!!t||"토픽 이름을 입력해주세요."],boardMemberItems:[],boardIdErrors:[]}},props:["board"],computed:{myGroup(){const t=this.$store.getters.profile;return this.groupItems.filter(e=>t.groups.some(t=>t===e.value)).map(t=>t.text).join(", ")},allGroupAuthDescription(){switch(this.allGroupAuth){case"READONLY":return"구독자만 글을 쓸 수 있지만,<br>구독하지 않아도 글을 볼 수 있습니다.<br>그 대신 핫토픽에 글이 노출됩니다.";case"NONE":return"구독자만 글을 읽고 쓸 수 있습니다.<br>핫토픽에는 글이 노출되지 않습니다.";case"READWRITE":return"모든 회원이 토픽을 구독할 수 있습니다.<br>구독하지 않아도 글을 볼 수 있습니다.<br>핫토픽에 글이 노출됩니다."}},reservedContents(){if(this.board&&this.board.reservedContents){let t=this.board.reservedContents,e="";for(let o in t)switch(o){case"boardName":e+=`토픽 이름 : ${t[o]}\n`;break;case"boardDescription":e+=`토픽 설명 : ${t[o]}\n`;break;case"allowAnonymous":e+=`익명글 허용 여부 : ${t[o]?"허용":"비허용"}\n`;break;case"useCategory":e+=`카테고리 : ${t[o]?"사용":"미사용"}\n`;break;case"allGroupAuth":e+=`토픽 공개/비공개 : ${this.allGroupAuthItems.some(e=>e.value===t[o])?this.allGroupAuthItems.find(e=>e.value===t[o]).text:"(알 수 없음)"}\n`;break;case"ownerNickName":e+=`토픽지기 : ${t[o]}\n`;break;case"auth":e+=`구독 권한 : ${t[o].filter(t=>this.groupItems.some(e=>e.value===t.groupId)).map(t=>this.groupItems.find(e=>e.value===t.groupId).text+("INSERT"===t.command?" 추가":"DELETE"===t.command?" 삭제":"")).join(", ")}`;break;case"status":e+="DELETED"===t[o]?"토픽 삭제 예정":"";break}return e}return null}},methods:{reset(t){this.board?(t||(this.loading=!0,this.$axios.get("/board/member",{params:{boardId:this.board.boardId},headers:{silent:!0}}).then(t=>{const e=this.$store.getters.profile.topicNickName;this.boardMemberItems=t.data.filter(t=>t.nickName!==e).map(t=>t.nickName),this.loading=!1}).catch(t=>{console.log(t.response),this.loading=!1,this.$store.dispatch("showSnackbar",{text:t.response?t.response.data.message:"토픽 구성원을 불러오지 못했습니다.",color:"error"})})),this.boardId=this.board.boardId,this.boardName=this.board.boardName,this.boardDescription=this.board.boardDescription,this.allGroupAuth=this.board.allGroupAuth,this.allowAnonymous=this.board.allowAnonymous,this.useCategory=!!this.board.categories&&this.board.categories.filter(t=>t).length>0,this.allowedGroups=this.board.boardAuth.map(t=>t.groupId),this.ownerNickName=this.board.ownerNickName):(this.boardId=null,this.boardName=null,this.boardDescription=null,this.allGroupAuth="READONLY",this.allowAnonymous=!0,this.useCategory=!1,this.allowedGroups=[],this.ownerNickName=null)},removeChip(t,e,o){t.parent.selectedItems.splice(t.parent.selectedItems.indexOf(e.value),1),o.splice(o.indexOf(e.value),1)},checkBoardId(t){this.boardId&&0===this.boardIdErrors.length?this.$axios.get("/boardId",{params:{boardId:this.boardId},headers:{silent:!0}}).then(e=>{this.boardIdErrors=[],"function"===typeof t&&t.call(this)}).catch(e=>{this.boardIdErrors=[e&&e.response&&e.response.data.message],"function"===typeof t&&t.call(this)}):"function"===typeof t&&t.call(this)},save(){this.board?this.$refs.form.validate()&&0===this.boardIdErrors.length?confirm("변경 내용은 1개월 뒤에 반영됩니다. 계속하시겠습니까?")&&(this.loading=!0,this.$axios.put("/board",{boardId:this.boardId,boardName:this.boardName,boardDescription:this.boardDescription||void 0,allGroupAuth:this.allGroupAuth,allowAnonymous:this.allowAnonymous,allowedGroups:this.allowedGroups.map(t=>({groupId:t,authType:"READWRITE"})),useCategory:this.useCategory,ownerNickName:this.ownerNickName||void 0}).then(t=>{this.loading=!1,this.$emit("resetBoard"),this.$emit("closeDialog"),this.$store.dispatch("showSnackbar",{text:"토픽 정보를 변경 예약하였습니다.",color:"success"})}).catch(t=>{console.log(t.response),this.loading=!1,this.$store.dispatch("showSnackbar",{text:t.response?t.response.data.message:"토픽을 만들지 못했습니다.",color:"error"})})):this.$store.dispatch("showSnackbar",{text:"토픽 정보를 정확히 입력해주세요.",color:"error"}):this.checkBoardId(()=>{this.$refs.form.validate()&&0===this.boardIdErrors.length?(this.loading=!0,this.$axios.post("/board",{boardId:this.boardId,boardName:this.boardName,boardType:"T",boardDescription:this.boardDescription||void 0,allGroupAuth:this.allGroupAuth,allowAnonymous:this.allowAnonymous,allowedGroups:this.allowedGroups.map(t=>({groupId:t,authType:"READWRITE"})),useCategory:this.useCategory}).then(t=>{this.loading=!1,this.$store.dispatch("addBoard",{boardId:this.boardId,boardName:this.boardName,boardType:"T",boardDescription:this.boardDescription||void 0,allGroupAuth:this.allGroupAuth,allowAnonymous:this.allowAnonymous}),this.$store.dispatch("addUserBoard",{boardId:this.boardId,boardName:this.boardName,boardType:"T",boardDescription:this.boardDescription||void 0,allGroupAuth:this.allGroupAuth,allowAnonymous:this.allowAnonymous}),this.$emit("resetBoard"),this.$emit("closeDialog"),this.reset(),this.$store.dispatch("showSnackbar",{text:"새로운 토픽을 만들었습니다.",color:"success"})}).catch(t=>{console.log(t.response),this.loading=!1,this.$store.dispatch("showSnackbar",{text:t.response?t.response.data.message:"토픽을 만들지 못했습니다.",color:"error"})})):this.$store.dispatch("showSnackbar",{text:"토픽 정보를 정확히 입력해주세요.",color:"error"})})},deleteBoard(){confirm("토픽 삭제는 1개월 유예기간 후에 이루어지고,\n삭제 후에는 모든 글에 접근이 불가능합니다. 계속하시겠습니까?")&&this.$axios.put("/board",{boardId:this.boardId,status:"DELETED"}).then(t=>{this.$emit("resetBoard"),this.$emit("closeDialog"),this.$store.dispatch("showSnackbar",{text:"토픽 삭제를 예약하였습니다.",color:"success"})}).catch(t=>{console.log(t.response),this.$store.dispatch("showSnackbar",{text:t.response?t.response.data.message:"토픽을 만들지 못했습니다.",color:"error"})})}},created(){this.$store.getters.groups?this.groupItems=this.$store.getters.groups:this.$axios.get("/group",{headers:{silent:!0}}).then(t=>{t.data.forEach(t=>{"N"!==t.groupType&&"D"!==t.groupType&&"E"!==t.groupType||(t.groupType="Z")}),this.groupItems=t.data.sort((t,e)=>t.groupType<e.groupType?-1:t.groupType===e.groupType?0:1);let e=null,o=0;while(o<this.groupItems.length)e!==this.groupItems[o].groupType&&(e?(e=this.groupItems[o].groupType,this.groupItems.splice(o,0,{divider:!0}),o++):e=this.groupItems[o].groupType,this.groupItems.splice(o,0,{header:s[e]}),o++),o++;this.groupItems=this.groupItems.map(t=>t.groupName?{text:t.groupName,value:t.groupId}:t),this.$store.dispatch("setGroups",this.groupItems)}).catch(t=>{this.$store.dispatch("showSnackbar",{text:`그룹 목록을 가져오지 못했습니다.${t&&t.response&&t.response.data?"["+t.response.data.message+"]":""}`})}),this.reset()},watch:{boardId(){this.boardIdErrors.length>0&&(this.boardIdErrors=[])},board:{handler(){this.reset()},deep:!0}}},c=l,d=o("0c7c"),h=Object(d["a"])(c,r,i,!1,null,null,null);e["default"]=h.exports}}]);
//# sourceMappingURL=chunk-01798c39.05acc21e.js.map
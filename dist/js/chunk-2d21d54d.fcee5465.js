(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d21d54d"],{d19c:function(t,i,o){"use strict";o.r(i);var e=function(){var t=this,i=t.$createElement,o=t._self._c||i;return o("v-card",[t.$vuetify.breakpoint.xsOnly?o("v-toolbar",{attrs:{card:"",dark:"",color:"primary"}},[o("v-btn",{attrs:{icon:"",dark:""},on:{click:t.closeDialog}},[o("v-icon",[t._v("close")])],1),o("v-toolbar-title",[t._v("알림내역")]),o("v-spacer")],1):t._e(),o("v-list",{attrs:{dense:""}},[t.notifications.length>0?[t._l(t.notifications,function(i){return o("v-list-tile",{key:i.notificationId,on:{click:function(o){return t.notificationClicked(i)}}},[o("v-list-tile-title",[t._v(t._s(i.message))]),o("div",{staticClass:"nowrap"},[o("v-list-tile-sub-title",[t._v(t._s(i.createdDateTime.fromNow()))])],1)],1)}),t.$vuetify.breakpoint.xsOnly||t.notifications.length<t.notifications[0].totalCount?o("v-list-tile",[o("v-layout",{attrs:{row:""}},[t.$vuetify.breakpoint.xsOnly?o("v-btn",{class:{"mr-1":t.notifications.length<t.notifications[0].totalCount},attrs:{block:"",disabled:0===t.notifications.length},on:{click:t.clearNotification}},[t._v("모두 삭제")]):t._e(),t.notifications.length<t.notifications[0].totalCount?o("v-btn",{class:{"ml-1":t.$vuetify.breakpoint.xsOnly},attrs:{block:"",flat:"",loading:t.loading},on:{click:t.moreNotification}},[t._v("더보기")]):t._e()],1)],1):t._e()]:o("v-list-tile",[o("v-list-tile-title",[t._v("새로운 알림이 없습니다.")])],1)],2),t.$vuetify.breakpoint.smAndUp?[o("v-divider"),o("v-card-actions",[o("v-btn",{attrs:{disabled:0===t.notifications.length},on:{click:t.clearNotification}},[t._v("모두 삭제")]),o("v-spacer"),o("v-btn",{attrs:{flat:"",color:"primary"},on:{click:t.closeDialog}},[t._v("닫기")])],1)]:t._e()],2)},n=[];function a(t){for(var i=1;i<arguments.length;i++){var o=null!=arguments[i]?arguments[i]:{},e=Object.keys(o);"function"===typeof Object.getOwnPropertySymbols&&(e=e.concat(Object.getOwnPropertySymbols(o).filter(function(t){return Object.getOwnPropertyDescriptor(o,t).enumerable}))),e.forEach(function(i){s(t,i,o[i])})}return t}function s(t,i,o){return i in t?Object.defineProperty(t,i,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[i]=o,t}var c={name:"NotificationCenter",props:["dialog"],data(){return{loading:!1}},methods:{notificationClicked(t){this.$axios.delete("/notification/"+t.notificationId,{headers:{silent:!0}}).then(i=>{this.$store.dispatch("markNotification",t.notificationId)}).catch(t=>{console.log(t)}),t.href&&this.$router.push(t.href),this.$emit("closeDialog",null)},moreNotification(){this.loading=!0,this.$axios.get("/notification",{params:{dateTimeBefore:this.$moment(this.notifications[this.notifications.length-1].createdDateTime).format("YMMDDHHmmss")},headers:{silent:!0}}).then(t=>{this.loading=!1,this.$store.dispatch("addNotifications",t.data)}).catch(t=>{this.loading=!1,this.$store.dispatch("showSnackbar",{text:`${t.response?t.response.data.message:"새로운 알림을 불러오지 못했습니다."}`,color:"error"})})},closeDialog(){this.$emit("closeDialog",null)},clearNotification(){this.$axios.put("/notification",{clearNotification:!0}).then(t=>{this.$store.dispatch("setNotifications",[]),this.$emit("closeDialog",null)}).catch(t=>{this.$store.dispatch("showSnackbar",{text:`${t.response?t.response.data.message:"알림을 읽음 표시하지 못했습니다."}`,color:"error"})})}},computed:{notifications(){return this.$store.getters.notifications.map(t=>a({},t,{createdDateTime:this.$moment(t.createdDateTime,"YYYYMMDDHHmmss")}))}}},r=c,l=o("0c7c"),f=Object(l["a"])(r,e,n,!1,null,null,null);i["default"]=f.exports}}]);
//# sourceMappingURL=chunk-2d21d54d.fcee5465.js.map
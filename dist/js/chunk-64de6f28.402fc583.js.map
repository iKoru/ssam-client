{"version":3,"sources":["webpack:///./src/components/board/survey/Survey.vue?ab10","webpack:///./src/components/mixins/BoardMixins.js","webpack:///./src/components/board/survey/Survey.vue?6913","webpack:///src/components/board/survey/Survey.vue","webpack:///./src/components/board/survey/Survey.vue?559f","webpack:///./src/components/board/survey/Survey.vue","webpack:///./src/components/board/editor/Editor.vue?d428","webpack:///./src/components/board/survey/SurveyMaker.vue?3594","webpack:///./src/components/board/editor/Editor.vue?868d","webpack:///./src/components/board/survey/SurveyMaker.vue?c1e6","webpack:///src/components/board/survey/SurveyMaker.vue","webpack:///./src/components/board/survey/SurveyMaker.vue?8351","webpack:///./src/components/board/survey/SurveyMaker.vue","webpack:///src/components/board/editor/Editor.vue","webpack:///./src/components/board/editor/Editor.vue?3c5c","webpack:///./src/components/board/editor/Editor.vue"],"names":["_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_dist_cjs_js_ref_6_oneOf_1_1_node_modules_vue_cli_service_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_cli_service_node_modules_vue_loader_lib_index_js_vue_loader_options_Survey_vue_vue_type_style_index_0_lang_css___WEBPACK_IMPORTED_MODULE_0__","__webpack_require__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_dist_cjs_js_ref_6_oneOf_1_1_node_modules_vue_cli_service_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_cli_service_node_modules_vue_loader_lib_index_js_vue_loader_options_Survey_vue_vue_type_style_index_0_lang_css___WEBPACK_IMPORTED_MODULE_0___default","n","moment__WEBPACK_IMPORTED_MODULE_0__","moment__WEBPACK_IMPORTED_MODULE_0___default","BoardMixins","data","boardTypeItems","T","L","D","X","E","N","webUrl","process","methods","uuid","partialUUID","Math","random","toString","substring","dataURItoBlob","dataURI","byteString","split","indexOf","atob","unescape","mimeString","ia","Uint8Array","length","i","charCodeAt","Blob","type","timeParser","timestamp","moment","fromNow","render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","column","row","align-center","mx-2","_v","directives","name","rawName","value","expression","staticStyle","white-space","_s","survey","participants","_l","surveyContents","item","index","key","id","title","_e","choice","answerIndex","class","ans-voted final multi-row","selected","font-weight-bold","mostVotes","votes","percent","text","style","width","ans-no-vote multi-row","active","on","click","$event","handleVote","questions","participated","onlyView","justify-center","my-2","small","showSurveyResult","color","disabled","finalResults","completeSurvey","staticRenderFns","Surveyvue_type_script_lang_js_","props","[object Object]","formatSurvey","currentSurvey","computed","otherAnswers","surveyAnswers","forEach","q","qIndex","objectArray","max","totalVotes","choices","choiceIndex","push","isNaN","round","parseInt","answers","allowMultipleChoice","answerArray","c","cIndex","findIndex","every","question","some","$store","dispatch","answer","getAnswerArray","$axios","post","documentId","$route","params","then","response","console","log","get","boardId","catch","error","status","message","questionIndex","a","survey_Surveyvue_type_script_lang_js_","component","Object","componentNormalizer","__webpack_exports__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_dist_cjs_js_ref_6_oneOf_1_1_node_modules_vue_cli_service_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_cli_service_node_modules_vue_loader_lib_index_js_vue_loader_options_Editor_vue_vue_type_style_index_0_lang_css___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_dist_cjs_js_ref_6_oneOf_1_1_node_modules_vue_cli_service_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_cli_service_node_modules_vue_loader_lib_index_js_vue_loader_options_Editor_vue_vue_type_style_index_0_lang_css___WEBPACK_IMPORTED_MODULE_0___default","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_dist_cjs_js_ref_6_oneOf_1_1_node_modules_vue_cli_service_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_cli_service_node_modules_vue_loader_lib_index_js_vue_loader_options_SurveyMaker_vue_vue_type_style_index_0_lang_css___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_dist_cjs_js_ref_6_oneOf_1_1_node_modules_vue_cli_service_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_cli_service_node_modules_vue_loader_lib_index_js_vue_loader_options_SurveyMaker_vue_vue_type_style_index_0_lang_css___WEBPACK_IMPORTED_MODULE_0___default","mx-1","$vuetify","breakpoint","smAndUp","mt-1","placeholder","flat","xsOnly","readonly","solo","hide-details","model","callback","$$v","xs12","ref","options","editorOption","content","slot","savedContent","max-width","fullscreen","scrollable","surveyDialog","isSurveyDeletable","dialog","deleteSurvey","closeSurvey","extractSurvey","pt-1","pl-2","surveyButtonClick","selectImage","openFileDialog","multiple","accept","capture","$refs","fileInput","change","onFileChange","attachedFilenames","wrap","xs6","md4","px-2","removeFile","board","py-2","ml-3","label","isAnonymous","disallowAnonymous","mt-3","text-xs-center","$router","go","SurveyMakervue_type_template_id_e676e572_render","icon","$emit","single-line","dense","append-outer-icon","click:append-outer","deleteQuestion","$set","box","append-icon","click:append","deleteAnswer","justify-space-around","addAnswer","block","pushQuestion","size","depressed","SurveyMakervue_type_template_id_e676e572_staticRenderFns","SurveyMakervue_type_script_lang_js_","$forceUpdate","splice","filter","watch","to","JSON","parse","stringify","survey_SurveyMakervue_type_script_lang_js_","SurveyMaker","Editorvue_type_script_lang_js_","components","Survey","mixins","undefined","link","modules","toolbar","magicUrl","urlRegularExpression","globalRegularExpression","normalizeRegularExpression","imageDrop","imageResize","theme","show","formData","rawFileData","attachFromServer","originImages","_ref","quill","html","trim","uploadModifiedDocument","uploadDocument","FormData","attachImages","append","editor","delta","processUploadFiles","revertImages","processFileChange","modifiedBody","contents","put","ops","insert","hasOwnProperty","image","includes","imgSrc","imageName","src","imgName","find","img","deleteImageP","deleteFileP","uploadFileP","currentImageId","map","startsWith","attach_path","attach_id","delete","attach_name","fileCount","pair","entries","Promise","all","confirm","attach","Array","isArray","x","f","setContents","pond","browse","document","getElementById","e","self","files","target","dataTransfer","newFileData","Number","namesCount","count","splitter","lastIndexOf","fileExtension","filename","suffix","input","createElement","setAttribute","onchange","file","reader","FileReader","readAsDataURL","onload","test","range","getSelection","insertEmbed","getLength","result","onerror","parseDocument","replace","editor_Editorvue_type_script_lang_js_","Editor_component"],"mappings":"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","file":"js/chunk-64de6f28.402fc583.js","sourcesContent":["import mod from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./Survey.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./Survey.vue?vue&type=style&index=0&lang=css&\"","import moment from 'moment'\nconst BoardMixins = {\n  data () {\n    return {\n      boardTypeItems: {\n        T: '토픽',\n        L: '라운지',\n        D: '아카이브',\n        X: '게시판',\n        E: '전직교사',\n        N: '예비교사'\n      },\n      webUrl: process.env.VUE_APP_WEB_URL\n    }\n  },\n  methods: {\n    uuid () {\n      let partialUUID = () => {\n        return ((1 + Math.random()) * 0x10000 | 0).toString(16).substring(1);\n      };\n      return partialUUID() + partialUUID() + '-' + partialUUID() + '-' + partialUUID() + '-' + partialUUID() + '-' + partialUUID() + partialUUID() + partialUUID()\n    },\n    dataURItoBlob (dataURI) {\n      // convert base64/URLEncoded data component to raw binary data held in a string\n      var byteString;\n      if (dataURI.split(',')[0].indexOf('base64') >= 0) {\n        byteString = atob(dataURI.split(',')[1]);\n      } else {\n        byteString = unescape(dataURI.split(',')[1]);\n      }\n\n      var mimeString = dataURI.split(',')[0].split(':')[1].split(';')[0];\n      // write the bytes of the string to a typed array\n      var ia = new Uint8Array(byteString.length);\n      for (var i = 0; i < byteString.length; i++) {\n        ia[i] = byteString.charCodeAt(i);\n      }\n      return new Blob([ia], { type: mimeString });\n    },\n    timeParser (timestamp) {\n      return moment(timestamp, 'YYYYMMDDHHmmss').fromNow()\n    }\n  }\n}\n\nexport default BoardMixins\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (_vm.survey)?_c('v-layout',{staticClass:\"border-light py-2\",attrs:{\"column\":\"\"}},[_c('v-flex',[_c('v-layout',{attrs:{\"row\":\"\",\"align-center\":\"\",\"mx-2\":\"\"}},[(_vm.onlyView)?_c('span',{staticClass:\"subheading\"},[_vm._v(\"글 작성 후에 수정/삭제가 불가능합니다.\")]):_c('span',{staticClass:\"subheading\"},[_vm._v(\"설문조사\")]),_c('v-spacer'),_c('span',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.finalResults),expression:\"finalResults\"}],staticStyle:{\"white-space\":\"nowrap\"}},[_vm._v(\"\\n        \"+_vm._s(_vm.survey.participants)+\"명 참여\\n      \")])],1)],1),_vm._l((_vm.survey.surveyContents.questions),function(item,index){return _c('v-flex',{key:index,staticClass:\"px-3 pt-2\"},[_c('div',{attrs:{\"id\":\"poll\"}},[_c('div',{staticClass:\"font-weight-bold body-2 mb-2\"},[_vm._v(_vm._s((index+1) + '. ' + item.title)),(item.allowMultipleChoice)?_c('small',{staticClass:\"grey--text lighten-1\"},[_vm._v(\"(복수응답)\")]):_vm._e()]),_c('div',{staticClass:\"ans-cnt\"},_vm._l((item.choices),function(choice,answerIndex){return _c('div',{key:answerIndex,staticClass:\"ans\"},[(_vm.finalResults)?[_c('div',{class:{'ans-voted final multi-row':true, 'selected': choice.selected, 'font-weight-bold':item.mostVotes == choice.votes}},[(choice.percent)?_c('span',{staticClass:\"percent\"},[_vm._v(_vm._s(choice.percent))]):_vm._e(),_c('span',{staticClass:\"txt\"},[_vm._v(_vm._s(choice.text))])]),_c('span',{staticClass:\"bg\",style:({ width: choice.percent })})]:[_c('div',{class:{ 'ans-no-vote multi-row': true, active: choice.selected },on:{\"click\":function($event){return _vm.handleVote(index, choice)}}},[_c('span',{staticClass:\"txt\"},[_vm._v(_vm._s(choice.text))])]),_c('span',{staticClass:\"bg\"})]],2)}),0)]),(index + 1 !== _vm.survey.surveyContents.questions.length)?_c('v-divider',{key:'divider'+index,staticClass:\"mt-3\"}):_vm._e()],1)}),(!_vm.survey.participated && !_vm.onlyView)?_c('v-flex',[_c('v-layout',{attrs:{\"justify-center\":\"\",\"my-2\":\"\"}},[_c('v-btn',{attrs:{\"small\":\"\"},on:{\"click\":function($event){_vm.showSurveyResult = !_vm.showSurveyResult}}},[_vm._v(\"\\n        \"+_vm._s(_vm.showSurveyResult? '돌아가기':'결과보기')+\"\\n      \")]),_c('v-btn',{attrs:{\"small\":\"\",\"color\":\"primary\",\"disabled\":_vm.finalResults},on:{\"click\":_vm.completeSurvey}},[_vm._v(\"응답하기\")])],1)],1):_vm._e()],2):_vm._e()}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <v-layout column class=\"border-light py-2\" v-if=\"survey\">\n    <v-flex>\n      <v-layout row align-center mx-2>\n        <span v-if=\"onlyView\" class=\"subheading\">글 작성 후에 수정/삭제가 불가능합니다.</span>\n        <span v-else class=\"subheading\">설문조사</span>\n        <v-spacer/>\n        <span v-show=\"finalResults\" style=\"white-space:nowrap;\">\n          {{survey.participants}}명 참여\n        </span>\n      </v-layout>\n    </v-flex>\n    <v-flex v-for=\"(item, index) in survey.surveyContents.questions\" :key=\"index\" class=\"px-3 pt-2\">\n      <div id=\"poll\">\n        <div class=\"font-weight-bold body-2 mb-2\">{{(index+1) + '. ' + item.title}}<small v-if=\"item.allowMultipleChoice\" class=\"grey--text lighten-1\">(복수응답)</small></div>\n        <div class=\"ans-cnt\">\n          <div v-for=\"(choice,answerIndex) in item.choices\" :key=\"answerIndex\" class=\"ans\">\n            <template v-if=\"finalResults\">\n              <div :class=\"{'ans-voted final multi-row':true, 'selected': choice.selected, 'font-weight-bold':item.mostVotes == choice.votes}\">\n                <span v-if=\"choice.percent\" class=\"percent\">{{choice.percent}}</span>\n                <span class=\"txt\">{{choice.text}}</span>\n              </div>\n              <span class=\"bg\" :style=\"{ width: choice.percent }\"></span>\n            </template>\n            <template v-else>\n              <div :class=\"{ 'ans-no-vote multi-row': true, active: choice.selected }\" @click=\"handleVote(index, choice)\">\n                <span class=\"txt\">{{choice.text}}</span>\n              </div>\n              <span class=\"bg\"></span>\n            </template>\n          </div>\n        </div>\n      </div>\n      <v-divider v-if=\"index + 1 !== survey.surveyContents.questions.length\" :key=\"'divider'+index\" class=\"mt-3\"></v-divider>\n    </v-flex>\n    <v-flex v-if=\"!survey.participated && !onlyView\">\n      <v-layout justify-center my-2>\n        <v-btn small @click=\"showSurveyResult = !showSurveyResult\">\n          {{showSurveyResult? '돌아가기':'결과보기'}}\n        </v-btn>\n        <v-btn small color=\"primary\" @click=\"completeSurvey\" :disabled=\"finalResults\">응답하기</v-btn>\n      </v-layout>\n    </v-flex>\n  </v-layout>\n</template>\n\n<script>\nexport default {\n  props: ['currentSurvey', 'onlyView'],\n  data () {\n    return {\n      showSurveyResult: false,\n      survey: null\n    };\n  },\n  created () {\n    this.survey = this.formatSurvey(this.currentSurvey);\n  },\n  computed: {\n    finalResults () {\n      return this.survey.participated || this.showSurveyResult\n    }\n  },\n  methods: {\n    formatSurvey (survey) {\n      let otherAnswers = survey.surveyAnswers\n      survey.surveyContents.questions.forEach((q, qIndex) => {\n        let objectArray = []\n        let max = 0;\n        let totalVotes = 0;\n        q.choices.forEach((choice, choiceIndex) => {\n          if (otherAnswers.length > qIndex) {\n            objectArray.push({ 'text': choice, 'selected': false, 'votes': otherAnswers[qIndex][choiceIndex] })\n            if (otherAnswers[qIndex][choiceIndex] > max) {\n              max = otherAnswers[qIndex][choiceIndex];\n            }\n            totalVotes += otherAnswers[qIndex][choiceIndex];\n          } else {\n            objectArray.push({ 'text': choice, 'selected': false, 'votes': 0 })\n          }\n        })\n        q.mostVotes = max\n        q.totalVotes = totalVotes\n        if (totalVotes === 0) {\n          objectArray.forEach(choice => {\n            choice.percent = '0%'\n          })\n        } else {\n          // Calculate percent\n          objectArray.forEach(choice => {\n            choice.percent = !isNaN(choice.votes) && choice.votes > 0 ? (Math.round((parseInt(choice.votes) / totalVotes) * 100)) + '%' : '0%'\n          })\n        }\n        q.choices = objectArray\n      })\n      return survey\n    },\n    getAnswerArray (questions) {\n      let answers = [];\n      questions.forEach(q => {\n        if (!q.allowMultipleChoice) {\n          answers.push(q.choices.findIndex(c => c.selected))\n        } else {\n          let answerArray = []\n          q.choices.forEach((c, cIndex) => {\n            if (c.selected) answerArray.push(cIndex)\n          })\n          answers.push(answerArray)\n        }\n      })\n      return answers;\n    },\n    completeSurvey () {\n      if (this.survey.surveyContents.questions.every(question => question.choices.some(choice => choice.selected))) {\n        if (this.survey.participated) {\n          this.$store.dispatch('showSnackbar', { text: '이미 참여한 설문입니다.', color: 'info' });\n          return;\n        }\n        let answer = this.getAnswerArray(this.survey.surveyContents.questions)\n        this.$axios\n          .post(`/survey`, {\n            documentId: this.$route.params.documentId,\n            answer: answer\n          })\n          .then(response => {\n            console.log(response);\n            if (!response.data.survey) {\n              this.$axios\n                .get(`/${this.$route.params.boardId}/${this.$route.params.documentId}`)\n                .then(response => {\n                  this.survey = this.formatSurvey(response.data.survey)\n                  console.log(this.survey)\n                  this.showSurveyResult = true\n                })\n                .catch(error => {\n                  console.log(error);\n                });\n            } else {\n              this.survey = this.formatSurvey(response.data.survey)\n              this.showSurveyResult = true\n            }\n          })\n          .catch(error => {\n            if (error.response && error.response.status === 409) {\n              this.$store.dispatch('showSnackbar', { text: error.response ? error.response.data.message || '설문 응답을 등록하지 못했습니다.' : '설문 응답을 등록하지 못했습니다.', color: 'info' });\n            } else {\n              this.$store.dispatch('showSnackbar', { text: error.response ? error.response.data.message || '설문 응답을 등록하지 못했습니다.' : '설문 응답을 등록하지 못했습니다.', color: 'error' });\n            }\n          });\n      } else {\n        this.$store.dispatch('showSnackbar', { text: (this.survey.surveyContents.questions.findIndex(question => !question.choices.some(choice => choice.selected)) + 1) + '번 질문의 응답을 선택해주세요.', color: 'warning' });\n      }\n    },\n    handleVote (questionIndex, a) {\n      if (!this.survey.surveyContents.questions[questionIndex].allowMultipleChoice) {\n        if (!a.selected) {\n          this.survey.surveyContents.questions[questionIndex].choices.forEach(choice => (choice.selected = false))\n        }\n      }\n      a.selected = !a.selected\n    }\n  }\n};\n</script>\n<style>\n#poll .ans-cnt{\n  margin: 5px 0;\n}\n#poll .ans-cnt .ans{\n  position: relative;\n  border-radius: 8px;\n  overflow:hidden;\n  margin-top: 8px;\n}\n#poll .ans-cnt .ans:first-child{\n  margin-top: 0;\n}\n\n#poll .ans-cnt .ans-no-vote, #poll .ans-cnt .ans-voted{\n  background-color: #E1E8ED;\n  border-radius: 8px;\n  padding: 5px 10px;\n}\n#poll .ans-cnt .ans-voted .txt,\n#poll .ans-cnt .ans-voted .percent{\n  z-index: 1;\n  position: relative;\n}\n#poll .ans-cnt .ans-no-vote.active{\n  background: #d5d5d5;\n}\n#poll .ans-cnt .ans-no-vote.active .txt::before{\n  content:'✔';\n  width: 20px;\n  margin-right:4px;\n}\n#poll .ans-cnt .ans-voted .percent{\n  min-width: 44px;\n  display: inline-block;\n}\n#poll .ans-cnt .ans .bg{\n  position: absolute;\n  width: 0%;\n  top: 0;\n  left: 0;\n  bottom: 0;\n  z-index: 0;\n  background-color: #77C7F7;\n  transition: width .3s ease-in-out;\n}\n</style>\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/@vue/cli-plugin-babel/node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./Survey.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/@vue/cli-plugin-babel/node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./Survey.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Survey.vue?vue&type=template&id=798320d7&\"\nimport script from \"./Survey.vue?vue&type=script&lang=js&\"\nexport * from \"./Survey.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Survey.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./Editor.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./Editor.vue?vue&type=style&index=0&lang=css&\"","import mod from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./SurveyMaker.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./SurveyMaker.vue?vue&type=style&index=0&lang=css&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-layout',{attrs:{\"column\":\"\",\"mx-1\":_vm.$vuetify.breakpoint.smAndUp,\"mt-1\":_vm.$vuetify.breakpoint.smAndUp}},[_c('v-flex',{staticClass:\"mb-0 pb-0\",attrs:{\"id\":\"title\"}},[_c('v-text-field',{staticClass:\"dense\",attrs:{\"placeholder\":\"제목\",\"flat\":_vm.$vuetify.breakpoint.xsOnly,\"readonly\":!!_vm.documentId,\"solo\":\"\",\"hide-details\":\"\"},model:{value:(_vm.title),callback:function ($$v) {_vm.title=$$v},expression:\"title\"}})],1),_c('v-flex',{attrs:{\"xs12\":\"\",\"id\":\"write-editor\"}},[_c('quill-editor',{ref:\"editor\",attrs:{\"options\":_vm.editorOption},model:{value:(_vm.content),callback:function ($$v) {_vm.content=$$v},expression:\"content\"}},[_c('div',{attrs:{\"slot\":\"toolbar\",\"id\":\"toolbar\"},slot:\"toolbar\"},[_c('button',{staticClass:\"ql-bold\"},[_vm._v(\"Bold\")]),_c('button',{staticClass:\"ql-italic\"},[_vm._v(\"Italic\")]),_c('select',{staticClass:\"ql-size\"},[_c('option',{attrs:{\"value\":\"small\"}},[_vm._v(\"작게\")]),_c('option',{attrs:{\"selected\":\"\"}},[_vm._v(\"보통\")]),_c('option',{attrs:{\"value\":\"large\"}},[_vm._v(\"크게\")]),_c('option',{attrs:{\"value\":\"huge\"}},[_vm._v(\"더 크게\")])])])])],1),_c('div',[_vm._v(_vm._s(_vm.savedContent))]),(!_vm.documentId)?_c('v-dialog',{attrs:{\"max-width\":\"500px\",\"fullscreen\":_vm.$vuetify.breakpoint.xsOnly,\"scrollable\":\"\"},model:{value:(_vm.surveyDialog),callback:function ($$v) {_vm.surveyDialog=$$v},expression:\"surveyDialog\"}},[_c('survey-maker',{attrs:{\"survey\":_vm.survey,\"isSurveyDeletable\":_vm.isSurveyDeletable,\"dialog\":_vm.surveyDialog},on:{\"deleteSurvey\":_vm.deleteSurvey,\"closeSurvey\":_vm.closeSurvey,\"extractSurvey\":_vm.extractSurvey}})],1):_vm._e(),_c('v-layout',{attrs:{\"pt-1\":\"\",\"pl-2\":\"\",\"align-center\":\"\"}},[_c('div',[(!_vm.documentId)?_c('v-btn',{attrs:{\"small\":\"\",\"flat\":\"\",\"color\":_vm.isSurveyDeletable?'primary':'default'},on:{\"click\":_vm.surveyButtonClick}},[_c('v-icon',[_vm._v(\"how_to_vote\")]),_c('span',[_vm._v(\"설문조사\")])],1):(_vm.survey)?_c('div',{staticClass:\"body-1 primary--text mr-2\",attrs:{\"title\":\"등록한 설문조사는 수정할 수 없습니다.\"}},[_c('v-icon',{staticClass:\"primary--text cursor-default vertical-align-middle\"},[_vm._v(\"how_to_vote\")]),_c('span',{staticClass:\"cursor-default\"},[_vm._v(\"설문조사\")])],1):_vm._e()],1),_c('div',[_c('v-btn',{attrs:{\"small\":\"\",\"flat\":\"\"},on:{\"click\":_vm.selectImage}},[_c('v-icon',[_vm._v(\"image\")]),_vm._v(\"이미지\\n      \")],1)],1),_c('div',[_c('v-btn',{attrs:{\"small\":\"\",\"flat\":\"\"},on:{\"click\":_vm.openFileDialog}},[_c('v-icon',[_vm._v(\"attach_file\")]),_vm._v(\"파일첨부\\n      \")],1)],1)]),_c('input',{ref:\"fileInput\",staticClass:\"d-none\",attrs:{\"multiple\":\"\",\"id\":\"file-upload\",\"accept\":\"application/zip, application/x-zip-compressed, multipart/x-zip, application/x-hwp, application/pdf, image/*, application/vnd.openxmlformats-officedocument.wordprocessingml.*, application/msword, application/vnd.ms-powerpoint, audio/*, video/*, application/vnd.ms-excel, application/haansofthwp, application/haansoftxlsx, application/haansoftxls, application/haansoftpptx, application/haansoftppt, application/haansoftdocx, application/haansoftdoc\",\"type\":\"file\",\"value\":\"\",\"capture\":\"filesystem\"},on:{\"click\":function($event){_vm.$refs.fileInput.value = null},\"change\":_vm.onFileChange}}),_c('v-slide-y-transition',[(_vm.attachedFilenames.length>0)?_c('v-layout',{staticClass:\"border-light\",attrs:{\"wrap\":\"\"}},_vm._l((_vm.attachedFilenames),function(item,index){return _c('v-flex',{key:index,attrs:{\"xs6\":\"\",\"md4\":\"\",\"px-2\":\"\"}},[_c('v-slide-y-transition',[_c('v-layout',{attrs:{\"row\":\"\",\"align-center\":\"\"}},[_c('div',{staticClass:\"ellipsis\"},[_vm._v(_vm._s(item))]),_c('v-spacer'),_c('v-btn',{staticClass:\"short\",attrs:{\"small\":\"\"},on:{\"click\":function($event){return _vm.removeFile(index)}}},[_vm._v(\"삭제\")])],1)],1)],1)}),1):_vm._e()],1),(_vm.board.allowAnonymous)?_c('v-layout',{attrs:{\"py-2\":\"\",\"ml-3\":\"\",\"justify-center\":\"\"}},[_c('div',{staticClass:\"mr-3\"},[_c('v-checkbox',{staticClass:\"mr-1 my-auto mb-0\",attrs:{\"hide-details\":\"\",\"label\":\"익명\"},model:{value:(_vm.isAnonymous),callback:function ($$v) {_vm.isAnonymous=$$v},expression:\"isAnonymous\"}})],1),_c('div',[_c('v-checkbox',{staticClass:\"mr-1 my-auto mb-0\",attrs:{\"disabled\":_vm.isAnonymous,\"hide-details\":\"\",\"label\":\"익명댓글불가\"},model:{value:(_vm.disallowAnonymous),callback:function ($$v) {_vm.disallowAnonymous=$$v},expression:\"disallowAnonymous\"}})],1),_c('v-spacer')],1):_vm._e(),_c('v-layout',{attrs:{\"row\":\"\",\"mt-3\":\"\"}},[_c('v-flex',{attrs:{\"text-xs-center\":\"\"}},[_c('v-btn',{on:{\"click\":function($event){return _vm.$router.go(-1)}}},[_vm._v(\"돌아가기\")]),_c('v-btn',{staticClass:\"primary\",on:{\"click\":function($event){return _vm.post()}}},[_vm._v(_vm._s(_vm.documentId?'수정':'등록'))])],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-card',[_c('v-toolbar',{attrs:{\"flat\":\"\"}},[_c('v-toolbar-title',[_vm._v(\"설문조사\")]),_c('v-spacer'),_c('v-btn',{staticClass:\"toolbar-btn-last\",attrs:{\"icon\":\"\"},on:{\"click\":function($event){return _vm.$emit('closeSurvey')}}},[_c('v-icon',[_vm._v(\"close\")])],1)],1),_c('v-card-text',{staticClass:\"pb-0\"},[_c('v-layout',{attrs:{\"column\":\"\"}},[_c('div',{staticClass:\"border-light\",attrs:{\"id\":\"surveyMaker\"}},_vm._l((_vm.currentSurvey.questions),function(question,index){return _c('v-flex',{key:index},[_c('v-card',{attrs:{\"flat\":\"\"}},[_c('v-card-title',{staticClass:\"pb-1\"},[_vm._v(\"\\n              \"+_vm._s(index + 1)+\".\\n              \"),_c('v-text-field',{staticClass:\"dense mt-0 pt-0 ml-2\",attrs:{\"single-line\":\"\",\"hide-details\":\"\",\"dense\":\"\",\"placeholder\":\"질문 내용\",\"append-outer-icon\":\"close\"},on:{\"click:append-outer\":function($event){return _vm.deleteQuestion(index)}},model:{value:(question.title),callback:function ($$v) {_vm.$set(question, \"title\", $$v)},expression:\"question.title\"}})],1),_c('v-card-text',{staticClass:\"py-0\"},[_c('v-layout',{attrs:{\"column\":\"\"}},[_vm._l((question.choices),function(choice,answerIndex){return _c('v-flex',{key:answerIndex,staticClass:\"mt-2\"},[_c('v-text-field',{staticClass:\"pt-1 dense\",attrs:{\"box\":\"\",\"single-line\":\"\",\"placeholder\":'선택지'+(answerIndex+1),\"hide-details\":\"\",\"append-icon\":\"delete\"},on:{\"click:append\":function($event){return _vm.deleteAnswer(index, answerIndex)}},model:{value:(question.choices[answerIndex]),callback:function ($$v) {_vm.$set(question.choices, answerIndex, $$v)},expression:\"question.choices[answerIndex]\"}})],1)}),_c('v-flex',[_c('v-layout',{attrs:{\"row\":\"\",\"align-center\":\"\",\"justify-space-around\":\"\"}},[_c('v-flex',{attrs:{\"text-xs-center\":\"\"}},[_c('v-btn',{attrs:{\"flat\":\"\"},on:{\"click\":function($event){return _vm.addAnswer(index)}}},[_c('v-icon',{staticClass:\"mr-1\",attrs:{\"small\":\"\"}},[_vm._v(\"add\")]),_vm._v(\"선택지 추가\\n                      \")],1)],1),_c('v-flex',{attrs:{\"text-xs-center\":\"\"}},[_c('v-checkbox',{staticClass:\"mt-0 pt-0\",attrs:{\"hide-details\":\"\",\"label\":\"복수응답 허용\"},model:{value:(question.allowMultipleChoice),callback:function ($$v) {_vm.$set(question, \"allowMultipleChoice\", $$v)},expression:\"question.allowMultipleChoice\"}})],1)],1)],1)],2)],1)],1),(index !== _vm.currentSurvey.questions.length - 1)?_c('v-divider',{staticClass:\"mx-4\"}):_vm._e()],1)}),1),_c('v-flex',{attrs:{\"mt-3\":\"\"}},[_c('v-btn',{attrs:{\"block\":\"\",\"flat\":\"\"},on:{\"click\":_vm.pushQuestion}},[_c('v-icon',[_vm._v(\"playlist_add\")]),_c('v-label',{attrs:{\"size\":\"24\"}},[_vm._v(\"질문추가\")])],1)],1)],1)],1),_c('v-card-actions',{staticClass:\"align-start\"},[_c('v-spacer'),_c('v-btn',{attrs:{\"color\":\"error\",\"depressed\":\"\",\"disabled\":!_vm.isSurveyDeletable},on:{\"click\":function($event){return _vm.$emit('deleteSurvey')}}},[_vm._v(\"설문 삭제\")]),_c('v-btn',{attrs:{\"color\":\"primary\",\"depressed\":\"\"},on:{\"click\":_vm.extractSurvey}},[_vm._v(\"저장\")])],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <v-card>\n    <v-toolbar flat>\n      <v-toolbar-title>설문조사</v-toolbar-title>\n      <v-spacer></v-spacer>\n      <v-btn class=\"toolbar-btn-last\" @click=\"$emit('closeSurvey')\" icon><v-icon>close</v-icon></v-btn>\n    </v-toolbar>\n    <v-card-text class=\"pb-0\">\n      <v-layout column>\n        <div class=\"border-light\" id=\"surveyMaker\">\n          <v-flex :key=\"index\" v-for=\"(question, index) in currentSurvey.questions\">\n            <v-card flat>\n              <v-card-title class=\"pb-1\">\n                {{index + 1}}.\n                <v-text-field v-model=\"question.title\" single-line hide-details dense class=\"dense mt-0 pt-0 ml-2\" placeholder=\"질문 내용\" append-outer-icon=\"close\" @click:append-outer=\"deleteQuestion(index)\"></v-text-field>\n              </v-card-title>\n              <v-card-text class=\"py-0\">\n                <v-layout column>\n                  <v-flex :key=\"answerIndex\" v-for=\"(choice, answerIndex) in question.choices\" class=\"mt-2\">\n                    <v-text-field class=\"pt-1 dense\" box single-line :placeholder=\"'선택지'+(answerIndex+1)\" v-model=\"question.choices[answerIndex]\" hide-details append-icon=\"delete\" @click:append=\"deleteAnswer(index, answerIndex)\"></v-text-field>\n                  </v-flex>\n                  <v-flex>\n                    <v-layout row align-center justify-space-around>\n                      <v-flex text-xs-center>\n                        <v-btn flat @click=\"addAnswer(index)\">\n                          <v-icon small class=\"mr-1\">add</v-icon>선택지 추가\n                        </v-btn>\n                      </v-flex>\n                      <v-flex text-xs-center>\n                        <v-checkbox hide-details v-model=\"question.allowMultipleChoice\" label=\"복수응답 허용\" class=\"mt-0 pt-0\"></v-checkbox>\n                      </v-flex>\n                    </v-layout>\n                  </v-flex>\n                </v-layout>\n              </v-card-text>\n            </v-card>\n            <v-divider class=\"mx-4\" v-if=\"index !== currentSurvey.questions.length - 1\"/>\n          </v-flex>\n        </div>\n        <v-flex mt-3>\n          <v-btn block @click=\"pushQuestion\" flat>\n            <v-icon>playlist_add</v-icon><v-label size=\"24\">질문추가</v-label>\n          </v-btn>\n        </v-flex>\n      </v-layout>\n    </v-card-text>\n    <v-card-actions class=\"align-start\">\n      <v-spacer/>\n      <v-btn color=\"error\" depressed @click=\"$emit('deleteSurvey')\" :disabled=\"!isSurveyDeletable\">설문 삭제</v-btn>\n      <v-btn color=\"primary\" depressed @click=\"extractSurvey\">저장</v-btn>\n    </v-card-actions>\n  </v-card>\n</template>\n\n<script>\nexport default {\n  props: ['survey', 'isSurveyDeletable', 'dialog'],\n  data () {\n    return {\n      currentSurvey: {}\n    }\n  },\n  methods: {\n    addAnswer: function (questionIndex) {\n      this.currentSurvey.questions[questionIndex].choices.push('')\n    },\n    deleteAnswer: function (questionIndex, answerIndex) {\n      if (this.currentSurvey.questions[questionIndex].choices.length < 3) {\n        if (this.currentSurvey.questions[questionIndex].choices[answerIndex] && this.currentSurvey.questions[questionIndex].choices[answerIndex].length > 0) {\n          this.currentSurvey.questions[questionIndex].choices[answerIndex] = '';\n          this.$forceUpdate();\n        } else {\n          this.$store.dispatch('showSnackbar', { text: '선택지는 2개 이상이어야 합니다.', color: 'info' })\n        }\n      } else {\n        this.currentSurvey.questions[questionIndex].choices.splice(answerIndex, 1)\n      }\n    },\n    pushQuestion () {\n      this.currentSurvey.questions.push({ title: '', allowMultipleChoice: false, choices: ['', ''] })\n    },\n    deleteQuestion (index) {\n      if (this.currentSurvey.questions.length === 1) {\n        if ((this.currentSurvey.questions[index].title && this.currentSurvey.questions[index].title.length > 0) || (this.currentSurvey.questions[index].choices.some(choice => choice && choice.length > 0))) {\n          this.currentSurvey.questions.splice(index, 1)\n          this.currentSurvey.questions.push({ title: '', allowMultipleChoice: false, choices: ['', ''] })\n        } else {\n          this.$store.dispatch('showSnackbar', { text: '최소 하나 이상의 질문을 입력해주세요', color: 'warning' })\n        }\n      } else {\n        this.currentSurvey.questions.splice(index, 1)\n      }\n    },\n    extractSurvey () {\n      let i = 0;\n      while (i < this.currentSurvey.questions.length) {\n        if (this.currentSurvey.questions[i].title && this.currentSurvey.questions[i].title.length > 0) {\n          if (this.currentSurvey.questions[i].choices.filter(choice => choice && choice.length > 0).length > 1) { // safe\n            this.currentSurvey.questions[i].choices = this.currentSurvey.questions[i].choices.filter(choice => choice && choice.length > 0);\n          } else {\n            this.$store.dispatch('showSnackbar', { text: (i + 1) + '번째 질문의 응답을 2개 이상으로 입력해주세요.', color: 'info' })\n            return;\n          }\n        } else {\n          if (this.currentSurvey.questions[i].choices.some(choice => choice && choice.length > 0)) {\n            this.$store.dispatch('showSnackbar', { text: (i + 1) + '번째 질문의 제목을 입력해주세요.', color: 'info' });\n            return;\n          } else {\n            this.currentSurvey.questions.splice(i, 1);\n            continue;\n          }\n        }\n        i++;\n      }\n      if (i === 0) {\n        this.$store.dispatch('showSnackbar', { text: '질문을 1개 이상 입력해주세요.', color: 'warning' })\n        return;\n      }\n      this.$emit('extractSurvey', this.currentSurvey)\n    }\n  },\n  watch: {\n    dialog (to) {\n      if (to) {\n        this.currentSurvey = JSON.parse(JSON.stringify(this.survey));\n      }\n    }\n  }\n}\n</script>\n<style>\n#surveyMaker .v-text-field--box.v-text-field--single-line input{\n  margin-top:4px;\n}\n#surveyMaker .v-text-field--box > .v-input__control > .v-input__slot{\n  min-height:36px;\n}\n#surveyMaker .v-text-field.v-text-field--enclosed .v-input__append-inner{\n  margin-top:8px;\n}\n</style>\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/@vue/cli-plugin-babel/node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./SurveyMaker.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/@vue/cli-plugin-babel/node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./SurveyMaker.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./SurveyMaker.vue?vue&type=template&id=e676e572&\"\nimport script from \"./SurveyMaker.vue?vue&type=script&lang=js&\"\nexport * from \"./SurveyMaker.vue?vue&type=script&lang=js&\"\nimport style0 from \"./SurveyMaker.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","<template>\n  <v-layout column :mx-1=\"$vuetify.breakpoint.smAndUp\" :mt-1=\"$vuetify.breakpoint.smAndUp\">\n    <v-flex id=\"title\" class=\"mb-0 pb-0\">\n      <v-text-field placeholder=\"제목\" class=\"dense\" :flat=\"$vuetify.breakpoint.xsOnly\" :readonly=\"!!documentId\" solo v-model=\"title\" hide-details></v-text-field>\n    </v-flex>\n    <v-flex xs12 id=\"write-editor\">\n      <quill-editor v-model=\"content\" ref=\"editor\" :options=\"editorOption\">\n        <div id=\"toolbar\" slot=\"toolbar\">\n          <button class=\"ql-bold\">Bold</button>\n          <button class=\"ql-italic\">Italic</button>\n          <select class=\"ql-size\">\n            <option value=\"small\">작게</option>\n            <option selected>보통</option>\n            <option value=\"large\">크게</option>\n            <option value=\"huge\">더 크게</option>\n          </select>\n        </div>\n      </quill-editor>\n    </v-flex>\n    <div>{{savedContent}}</div>\n    <v-dialog v-model=\"surveyDialog\" max-width=\"500px\" :fullscreen=\"$vuetify.breakpoint.xsOnly\" scrollable v-if=\"!documentId\">\n      <survey-maker @deleteSurvey=\"deleteSurvey\" @closeSurvey=\"closeSurvey\" @extractSurvey=\"extractSurvey\" :survey=\"survey\" :isSurveyDeletable=\"isSurveyDeletable\" :dialog=\"surveyDialog\"/>\n    </v-dialog>\n\n    <v-layout pt-1 pl-2 align-center>\n      <div>\n        <v-btn small flat @click=\"surveyButtonClick\" :color=\"isSurveyDeletable?'primary':'default'\" v-if=\"!documentId\">\n          <v-icon>how_to_vote</v-icon>\n          <span>설문조사</span>\n        </v-btn>\n        <div v-else-if=\"survey\" class=\"body-1 primary--text mr-2\" title=\"등록한 설문조사는 수정할 수 없습니다.\">\n          <v-icon class=\"primary--text cursor-default vertical-align-middle\">how_to_vote</v-icon>\n          <span class=\"cursor-default\">설문조사</span>\n        </div>\n      </div>\n      <div>\n        <v-btn small flat @click=\"selectImage\">\n          <v-icon>image</v-icon>이미지\n        </v-btn>\n      </div>\n      <div>\n        <v-btn small flat @click=\"openFileDialog\">\n          <v-icon>attach_file</v-icon>파일첨부\n        </v-btn>\n      </div>\n    </v-layout>\n    <input class=\"d-none\" ref=\"fileInput\" multiple id=\"file-upload\" accept=\"application/zip, application/x-zip-compressed, multipart/x-zip, application/x-hwp, application/pdf, image/*, application/vnd.openxmlformats-officedocument.wordprocessingml.*, application/msword, application/vnd.ms-powerpoint, audio/*, video/*, application/vnd.ms-excel, application/haansofthwp, application/haansoftxlsx, application/haansoftxls, application/haansoftpptx, application/haansoftppt, application/haansoftdocx, application/haansoftdoc\" type=\"file\" @click=\"$refs.fileInput.value = null\" value=\"\" @change=\"onFileChange\" capture=\"filesystem\">\n    <v-slide-y-transition>\n      <v-layout v-if=\"attachedFilenames.length>0\" wrap class=\"border-light\">\n        <v-flex xs6 md4 v-for=\"(item, index) in attachedFilenames\" :key=\"index\" px-2>\n          <v-slide-y-transition>\n            <v-layout row align-center>\n              <div class=\"ellipsis\">{{item}}</div>\n              <v-spacer/>\n              <v-btn small class=\"short\" @click=\"removeFile(index)\">삭제</v-btn>\n            </v-layout>\n          </v-slide-y-transition>\n        </v-flex>\n      </v-layout>\n    </v-slide-y-transition>\n    <v-layout py-2 ml-3 justify-center v-if=\"board.allowAnonymous\">\n      <div class=\"mr-3\">\n        <v-checkbox hide-details class=\"mr-1 my-auto mb-0\" v-model=\"isAnonymous\" label=\"익명\"></v-checkbox>\n      </div>\n      <div>\n        <v-checkbox :disabled=\"isAnonymous\" hide-details class=\"mr-1 my-auto mb-0\" v-model=\"disallowAnonymous\" label=\"익명댓글불가\"></v-checkbox>\n      </div>\n      <v-spacer></v-spacer>\n    </v-layout>\n    <v-layout row mt-3>\n      <v-flex text-xs-center>\n        <v-btn @click=\"$router.go(-1)\">돌아가기</v-btn>\n        <v-btn class=\"primary\" @click=\"post()\">{{documentId?'수정':'등록'}}</v-btn>\n      </v-flex>\n    </v-layout>\n  </v-layout>\n</template>\n<script>\n// Import plugins\nimport Survey from '@/components/board/survey/Survey';\nimport SurveyMaker from '@/components/board/survey/SurveyMaker';\nimport BoardMixins from '@/components/mixins/BoardMixins';\nexport default {\n  name: 'Editor',\n  components: {\n    SurveyMaker,\n    Survey\n  },\n  props: ['documentId', 'board'],\n  mixins: [BoardMixins],\n  data () {\n    return {\n      savedContent: undefined,\n      link: undefined,\n      title: null,\n      content: '',\n      surveyDialog: false,\n      survey: { questions: [] },\n      isSurveyDeletable: false,\n      editorOption: {\n        placeholder: '내용을 입력해주세요.',\n        modules: {\n          toolbar: '#toolbar',\n          magicUrl: {\n            urlRegularExpression: /(https?:\\/\\/[\\S]+)|(www.[\\S]+)|([\\S]+.(?:com|kr|org|io|net|me))/,\n            globalRegularExpression: /(https?:\\/\\/[\\S]+)|(www.[\\S]+)|([\\S]+.(?:com|kr|org|io|net|me))/,\n            normalizeRegularExpression: /(https?:\\/\\/[\\S]+)|(www.[\\S]+)|([\\S]+.(?:com|kr|org|io|net|me))/\n          },\n          imageDrop: true,\n          imageResize: true\n        },\n        theme: this.$vuetify.breakpoint.xsOnly ? 'bubble' : 'snow'\n      },\n      show: false,\n      isAnonymous: false,\n      disallowAnonymous: false,\n      formData: undefined,\n      rawFileData: undefined,\n      attachedFilenames: [], // for easy check\n      attachFromServer: undefined, // for keeping attaches when modifying document\n      originImages: [] // for Revert Imaage\n    };\n  },\n  methods: {\n    onEditorChange ({ quill, html, text }) {\n      this.content = html;\n    },\n    async post () {\n      // manually add images as file\n      if (!this.title || this.title.trim() === '') {\n        this.$store.dispatch('showSnackbar', { text: '글 제목을 입력해주세요.', color: 'error' })\n        return;\n      } else if (!this.content || this.content.trim() === '') {\n        this.$store.dispatch('showSnackbar', { text: '글 내용을 입력해주세요.', color: 'error' })\n        return;\n      }\n      if (this.documentId) await this.uploadModifiedDocument();\n      else await this.uploadDocument();\n    },\n    async uploadDocument () {\n      if (!this.formData) this.formData = new FormData();\n      await this.attachImages();\n      this.formData.append('boardId', this.$route.params.boardId);\n      this.formData.append('title', this.title);\n      this.formData.append('contents', JSON.stringify(this.$refs.editor.quill.editor.delta));\n      this.formData.append('isAnonymous', this.isAnonymous);\n      this.formData.append('allowAnonymous', this.isAnonymous ? true : !this.disallowAnonymous);\n      if (this.isSurveyDeletable) {\n        this.formData.append('survey', JSON.stringify(this.survey));\n      }\n      await this.processUploadFiles()\n      return this.$axios\n        .post('/document', this.formData)\n        .then(response => {\n          if (response.status === 200) {\n            this.$router.push(`/${this.$route.params.boardId}/${response.data.documentId}`);\n          }\n        })\n        .catch(error => {\n          console.log(error);\n          this.$store.dispatch('showSnackbar', { text: `${error.response ? error.response.data.message : '글을 등록하지 못했습니다. 다시 시도해주세요'}`, color: 'error' })\n          delete this.formData;\n          this.revertImages();\n        });\n    },\n    async uploadModifiedDocument () {\n      // Convert Images And Upload First\n      try {\n        if (!this.formData) this.formData = new FormData();\n        this.formData.append('documentId', this.documentId)\n        await this.attachImages(); // change image url here\n        await this.processFileChange()\n        let modifiedBody = {\n          documentId: this.documentId,\n          title: this.title,\n          contents: JSON.stringify(this.$refs.editor.quill.editor.delta)\n        }\n\n        return this.$axios\n          .put(`/document`, modifiedBody)\n          .then(response => {\n            if (response.status === 200) {\n              this.$store.dispatch('showSnackbar', { text: '글을 수정하였습니다', color: 'success' })\n              this.$router.push(`/${this.$route.params.boardId}/${this.documentId}`);\n            }\n          })\n          .catch(error => {\n            console.log(error);\n            this.revertImages();\n            delete this.formData\n            this.$store.dispatch('showSnackbar', { text: `${error.response ? error.response.data.message : '글을 수정하지 못했습니다. 다시 시도해주세요'}`, color: 'error' })\n          })\n      } catch (error) {\n        console.log(error)\n        this.$store.dispatch('showSnackbar', { text: `${error.response ? error.response.data.message : '글을 수정하지 못했습니다. 다시 시도해주세요'}`, color: 'error' })\n        this.revertImages();\n        delete this.formData\n      }\n    },\n    attachImages () {\n      return this.$refs.editor.quill.editor.delta.ops.forEach(item => {\n        if (item.insert.hasOwnProperty('image')) {\n          if (item.insert.image.includes('data:image')) {\n            let imgSrc = item.insert.image;\n            let imageName = this.uuid() + '.' + imgSrc.substring('data:image/'.length, imgSrc.indexOf(';base64'));\n            this.formData.append('attach', this.dataURItoBlob(imgSrc), imageName);\n            item.insert.image = imageName;\n            this.originImages.push({ name: imageName, src: imgSrc });\n          }\n        }\n      });\n    },\n    revertImages () {\n      this.$refs.editor.quill.editor.delta.ops.forEach(item => {\n        if (item.insert.hasOwnProperty('image')) {\n          let imgName = item.insert.image;\n          item.insert.image = this.originImages.find(img => img.name === imgName).src;\n        }\n      });\n      this.originImages = [];\n    },\n    async processFileChange () {\n      // new images are already in formdata\n      // process deleted images\n      let currentImageId = this.$refs.editor.quill.editor.delta.ops.map(item => {\n        if (item.insert.hasOwnProperty('image')) {\n          if (item.insert.image.startsWith('/attach')) {\n            return this.attachFromServer.find(a => item.insert.image === '/' + a.attach_path).attach_id\n          }\n        }\n      });\n      let deleteImageP, deleteFileP, uploadFileP\n      this.attachFromServer = this.attachFromServer.filter(a => a !== null)\n      this.attachFromServer.forEach(a => {\n        if (a.insert && !currentImageId.filter(i => i !== undefined).includes(a.attach_id)) {\n          deleteImageP = this.$axios\n            .delete(`/document/attach/${this.documentId}/${a.attach_id}`)\n            .catch(error => {\n              console.log(error);\n            });\n        } else if (!this.attachedFilenames.includes(a.attach_name) && !a.insert) {\n          deleteFileP = this.$axios\n            .delete(`/document/attach/${this.documentId}/${a.attach_id}`)\n            .catch(error => {\n              console.log(error);\n            });\n        }\n      })\n      await this.processUploadFiles()\n      let fileCount = 0;\n      for (let pair of this.formData.entries()) {\n        if (pair[0] === 'attach') fileCount += 1;\n      }\n      if (fileCount > 0) {\n        uploadFileP = this.$axios\n          .post(`/document/attach`, this.formData)\n          .catch(error => {\n            console.log(error);\n          });\n      }\n      await Promise.all([deleteImageP, deleteFileP, uploadFileP])\n        .catch(error => {\n          console.log(error)\n          this.$store.dispatch('showSnackbar', { text: `${error.response ? error.response.data.message : '글을 수정하지 못했습니다. 다시 시도해주세요'}`, color: 'error' })\n        })\n    },\n    surveyButtonClick () {\n      if (!this.isSurveyDeletable && this.survey.questions.length === 0) {\n        this.survey.questions.push({ title: '', allowMultipleChoice: false, choices: ['', ''] });\n      }\n      this.surveyDialog = true;\n    },\n    extractSurvey (survey) {\n      this.surveyDialog = false;\n      this.survey = JSON.parse(JSON.stringify(survey));\n      this.isSurveyDeletable = true;\n    },\n    closeSurvey () {\n      this.surveyDialog = false;\n    },\n    deleteSurvey () {\n      if (confirm('작성된 질문 및 내용을 삭제할까요?')) {\n        this.surveyDialog = false;\n        this.survey.questions = [];\n        this.isSurveyDeletable = false;\n      }\n    },\n    parseDocument (data) {\n      this.title = data.title\n      this.contents = JSON.parse(data.contents)\n      this.attachFromServer = data.attach\n      this.isAnonymous = data.isAnonymous\n      if (data.survey) {\n        this.survey = data.survey\n        this.isSurveyDeletable = true\n      }\n      if (Array.isArray(data.attach)) {\n        data.attach = data.attach.filter(x => x !== null);\n      }\n      if (data.attach) {\n        let image;\n        this.contents.ops.forEach(item => {\n          if (item.insert.hasOwnProperty('image')) {\n            image = data.attach.find(x => x.attach_name === item.insert.image);\n            if (image) {\n              image.insert = true;\n              item.insert.image = this.webUrl + '/' + image.attach_path\n            }\n          }\n        })\n        this.attachedFilenames = data.attach.filter(f => !f.insert).map(f => f.attach_name)\n      }\n\n      this.$refs.editor.quill.setContents(this.contents)\n    },\n    attachButtonClick () {\n      if (this.documentId) this.openFileDialog()\n      else this.$refs.pond.browse()\n    },\n    openFileDialog () {\n      document.getElementById('file-upload').click();\n    },\n    async onFileChange (e) {\n      if (!this.rawFileData) this.rawFileData = new FormData();\n      var self = this;\n      var files = e.target.files || e.dataTransfer.files;\n      if (files.length > 0) {\n        for (var i = 0; i < files.length; i++) {\n          if (files[i].size > 1024 * 1024 * 8) {\n            this.$store.dispatch('showSnackbar', { text: '8MB 이하의 파일만 첨부가능합니다.', color: 'error' })\n            break;\n          }\n          await self.rawFileData.append('file', files[i], files[i].name);\n          await self.attachedFilenames.push(files[i].name)\n          // keep delete -> attach case\n        }\n      }\n    },\n    async removeFile (index) {\n      if (this.rawFileData) {\n        let newFileData = new FormData()\n        let i = 0\n        for (let pair of this.rawFileData.entries()) {\n          if (pair[0] === 'file') {\n            if (i !== Number(index)) {\n              await newFileData.append(pair[0], pair[1], pair[1].name)\n            }\n            i += 1\n          }\n        }\n        this.rawFileData = newFileData\n      }\n\n      this.attachedFilenames.splice(index, 1)\n    },\n    processUploadFiles () {\n      if (!this.rawFileData) this.rawFileData = new FormData()\n      let namesCount = {}\n      for (let pair of this.rawFileData.entries()) {\n        namesCount[pair[1].name] = {\n          count: namesCount[pair[1].name] ? (namesCount[pair[1].name].count + 1) : 1,\n          index: 0\n        }\n      }\n      for (let pair of this.rawFileData.entries()) {\n        let splitter = pair[1].name.lastIndexOf('.')\n        let fileExtension = pair[1].name.substring(splitter, pair[1].name.length)\n        let filename = pair[1].name.substring(0, splitter)\n        let suffix = ''\n        if (namesCount[pair[1].name].count > 0) {\n          suffix = namesCount[pair[1].name].index === 0 ? '' : ` (${namesCount[pair[1].name].index})`\n          namesCount[pair[1].name].index += 1\n        }\n        this.formData.append('attach', pair[1], filename + suffix + fileExtension)\n      }\n    },\n    selectImage () {\n      const input = document.createElement('input');\n      input.setAttribute('type', 'file');\n      input.setAttribute('accept', 'image/*');\n      input.click();\n      let self = this;\n      // Listen upload local image and save to server\n      input.onchange = () => {\n        const file = input.files[0];\n        var reader = new FileReader();\n        reader.readAsDataURL(file);\n        reader.onload = function () {\n          // file type is only image.\n          if (/^image\\//.test(file.type)) {\n            let range = self.$refs.editor.quill.getSelection()\n            self.$refs.editor.quill.insertEmbed(range == null ? self.$refs.editor.quill.getLength() : range.index, 'image', reader.result);\n          } else {\n            this.$store.dispatch('showSnackbar', { text: '이미지 파일만 업로드할 수 있습니다.', color: 'error' })\n          }\n        };\n        reader.onerror = function (error) {\n          console.log('Error: ', error);\n        };\n      };\n    }\n  },\n  computed: {\n    editor () {\n      return this.$refs.editor.quill;\n    }\n  },\n  watch: {\n    isAnonymous: {\n      handler (to) {\n        if (to) this.disallowAnonymous = false;\n      }\n    }\n  },\n  created () {\n    if (this.$route.params.boardId && this.documentId) {\n      this.$axios\n        .get(`/${this.$route.params.boardId}/${this.documentId}`)\n        .then(response => {\n          this.parseDocument(response.data)\n        })\n        .catch(error => {\n          console.log(error)\n          this.$store.dispatch('showSnackbar', { text: `${error.response ? error.response.data.message : '글 내용을 불러오지 못했습니다.'}`, color: 'error' })\n          this.$router.replace('/error?error=' + (error && error.response ? error.response.status || '404' : '404'));\n        });\n    }\n  }\n};\n</script>\n<style>\n.ql-image {\n  visibility: hidden;\n}\n#write-editor .quill-editor .ql-container {\n  min-height: 20rem;\n  padding-bottom: 1rem;\n}\n#write-editor .quill-editor .ql-editor {\n  min-height: 20rem;\n}\n#title .v-input__slot {\n  box-shadow: none;\n}\n#title,\n#toolbar,\n#toolbar + .ql-container.ql-snow,\n#write-editor .ql-container.ql-bubble{\n  border-top: 1px solid #e8e8e8;\n  border-left: none;\n  border-right: none;\n}\n.ql-snow #toolbar {\n  display: none;\n  border-bottom: none;\n}\n#toolbar + .ql-container.ql-snow,\n#write-editor .ql-container.ql-bubble{\n  border-bottom: 1px solid #e8e8e8;\n}\n#write-editor .quill-editor .ql-bubble .ql-tooltip {\n  z-index:1\n}\n#write-editor .ql-bubble .ql-picker.ql-size {\n  width: 70px;\n}\n@media (min-width: 600px) {\n  #title,\n  #toolbar,\n  #toolbar + .ql-container.ql-snow,\n  #write-editor .ql-container.ql-bubble{\n    border-left: 1px solid #e8e8e8;\n    border-right: 1px solid #e8e8e8;\n  }\n  .ql-snow #toolbar {\n    display: block;\n  }\n  #write-editor .quill-editor .ql-container, .write-editor .quill-editor .ql-editor {\n    min-height: 30rem;\n  }\n}\n#write-editor .ql-editor.ql-blank::before {\n  font-style: normal;\n}\n#write-editor .video-container{\n  position:relative;\n  height:0;\n  width:100%;\n  padding-bottom:56%;\n}\n#write-editor .video-container iframe{\n  position:absolute;\n  top:0;\n  left:0;\n  width:100%;\n  height:100%;\n}\n</style>\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/@vue/cli-plugin-babel/node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./Editor.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/@vue/cli-plugin-babel/node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./Editor.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Editor.vue?vue&type=template&id=7d2ff4f3&\"\nimport script from \"./Editor.vue?vue&type=script&lang=js&\"\nexport * from \"./Editor.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Editor.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}
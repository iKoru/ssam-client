(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-d40c80fc"],{"0a13":function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-card",{attrs:{tile:""}},[r("v-toolbar",{attrs:{card:"",color:"white"}},[r("v-toolbar-title",[e._v("스크랩 그룹 관리")]),r("v-spacer"),r("v-toolbar-items",[r("v-btn",{attrs:{icon:""},on:{click:function(t){e.$emit("closeDialog",null)}}},[r("v-icon",[e._v("close")])],1)],1)],1),r("v-card-text",[r("v-subheader",[e._v("스크랩 그룹을 추가, 변경, 삭제할 수 있습니다.")]),r("v-layout",{attrs:{row:""}},[r("v-flex",{attrs:{xs12:""}},[r("v-data-table",{staticClass:"mx-auto customAction",attrs:{id:"scrapGroupTable","hide-headers":"",items:e.tempScrapGroups,"rows-per-page-items":[-1],"custom-filter":e.filterItem,search:e.search},scopedSlots:e._u([{key:"items",fn:function(t){return[r("td",{staticClass:"cursor-pointer wrap"},[r("v-edit-dialog",{attrs:{"return-value":t.item.scrapGroupName,lazy:"",large:"","cancel-text":"취소","save-text":"확인"},on:{"update:returnValue":function(r){e.$set(t.item,"scrapGroupName",r)}}},[r("span",{staticClass:"multi-row"},[e._v(e._s(t.item.scrapGroupName))]),r("v-icon",{staticClass:"ml-1",attrs:{small:""}},[e._v("edit")]),r("v-text-field",{staticClass:"dense pt-3",attrs:{slot:"input",rules:e.scrapGroupNameRules,label:"스크랩 그룹 이름","single-line":""},slot:"input",model:{value:t.item.scrapGroupName,callback:function(r){e.$set(t.item,"scrapGroupName",r)},expression:"props.item.scrapGroupName"}})],1)],1),r("td",{staticClass:"justify-center layout px-0"},[r("v-icon",{attrs:{small:""},on:{click:function(r){e.deleteItem(t.index)}}},[e._v("delete")])],1)]}}])},[r("template",{slot:"actions-prepend"},[e.$vuetify.breakpoint.xsOnly?[r("v-btn",{staticClass:"short",attrs:{color:e.showCreateField?null:"primary",small:"",flat:""},on:{click:e.toggleCreateBtn}},[e._v(e._s(e.showCreateField?"취소":"추가"))]),r("v-btn",{staticClass:"short",attrs:{color:"primary",small:"",loading:e.loading},on:{click:e.save}},[e._v("저장")])]:e._e(),r("v-spacer")],2)],2),e.$vuetify.breakpoint.smAndUp?r("v-layout",{attrs:{row:"","align-center":""}},[r("v-btn",{staticClass:"mb-3",attrs:{id:"largeCreateBtn",color:e.showCreateField?null:"primary",flat:""},on:{click:e.toggleCreateBtn}},[e._v(e._s(e.showCreateField?"취소":"추가"))]),e.showCreateField?[r("v-text-field",{ref:"newScrapGroupName",staticClass:"dense mt-0 pl-2",attrs:{"validate-on-blur":"",dense:"","single-line":"",label:"추가할 그룹 이름",rules:e.scrapGroupNameRules},on:{keydown:function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?e.addNewRow(t):null}},model:{value:e.newScrapGroupName,callback:function(t){e.newScrapGroupName=t},expression:"newScrapGroupName"}}),r("v-btn",{attrs:{flat:"",color:"primary"},on:{click:e.addNewRow}},[e._v("등록")])]:e._e(),r("v-spacer"),r("v-btn",{attrs:{color:"primary",loading:e.loading},on:{click:e.save}},[e._v("저장")])],2):r("v-layout",{directives:[{name:"show",rawName:"v-show",value:e.showCreateField,expression:"showCreateField"}],attrs:{row:"","align-center":""}},[r("v-text-field",{ref:"newScrapGroupName",staticClass:"dense mt-0 pl-2",attrs:{"validate-on-blur":"",dense:"","single-line":"",label:"추가할 그룹 이름",rules:e.scrapGroupNameRules},on:{keydown:function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?e.addNewRow(t):null}},model:{value:e.newScrapGroupName,callback:function(t){e.newScrapGroupName=t},expression:"newScrapGroupName"}}),r("v-btn",{attrs:{small:"",flat:"",color:"primary"},on:{click:e.addNewRow}},[e._v("등록")])],1)],1)],1)],1)],1)},s=[];function o(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},a=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(a=a.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),a.forEach(function(t){n(e,t,r[t])})}return e}function n(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var i={name:"ScrapGroupManager",props:["scrapGroups","dialog"],data:function(){return{loading:!1,headers:[{text:"그룹 이름",value:"scrapGroupName",sortable:!1},{sortable:!1}],scrapGroupNameRules:[function(e){return!!e||"이름을 입력해주세요."},function(e){return!!e&&e.length<=50||"50자 이내로 입력해주세요."}],tempScrapGroups:[],showCreateField:!1,newScrapGroupName:null,search:!0}},methods:{save:function(e){var t=this;JSON.stringify(this.tempScrapGroups)!==JSON.stringify(this.scrapGroups)?this.tempScrapGroups.some(function(e){return"DELETED"===e.status})&&!confirm("삭제할 스크랩 그룹이 있으시군요.\n해당 그룹의 스크랩은 모두 지워집니다. 정말 삭제하시겠어요?")||this.$axios.put("/scrap/group",{scrapGroups:this.tempScrapGroups}).then(function(e){Array.isArray(e.data.failedGroup)&&e.data.failedGroup.length>0?(t.$store.dispatch("showSnackbar",{text:"오류가 있는 ".concat(e.data.failedGroup.join(", "),"번째 항목을 제외하고 처리되었습니다."),color:"warn"}),t.$emit("updateScrapGroup",null)):(t.$store.dispatch("showSnackbar",{text:"변경된 내용을 반영하였습니다.",color:"success"}),t.$emit("updateScrapGroup",null),t.$emit("closeDialog",null))}).catch(function(e){t.$store.dispatch("showSnackbar",{text:e.response&&e.response.data.message||"변경 내용을 반영하지 못했습니다.",color:"error"})}):this.$store.dispatch("showSnackbar",{text:"변경된 내용이 없습니다.",color:"info"})},deleteItem:function(e){var t=0;while(t<this.tempScrapGroups.length&&t<=e)"DELETED"===this.tempScrapGroups[t].status&&e++,t++;this.tempScrapGroups[e].scrapGroupId?(this.tempScrapGroups[e].status="DELETED",this.search=!this.search):this.tempScrapGroups.splice(e,1)},addNewRow:function(){this.$refs.newScrapGroupName.validate()?(this.tempScrapGroups.push({scrapGroupName:this.newScrapGroupName}),this.newScrapGroupName=null,this.showCreateField=!1):this.$store.dispatch("showSnackbar",{text:"추가할 스크랩 그룹 이름이 올바르지 않습니다.",color:"error"})},resetScrapGroups:function(){this.tempScrapGroups=JSON.parse(JSON.stringify(this.scrapGroups)).map(function(e){return o({},e,{status:"NORMAL"})})},filterItem:function(e){return e.filter(function(e){return"DELETED"!==e.status})},toggleCreateBtn:function(){var e=this;this.newScrapGroupName=null,this.showCreateField=!this.showCreateField,this.showCreateField&&this.$nextTick(function(){e.$refs.newScrapGroupName.focus()})}},created:function(){this.resetScrapGroups()},watch:{dialog:function(e){e?(this.resetScrapGroups(),document.body.style.position="fixed"):document.body.style.position="initial"}}},c=i,l=(r("4c42"),r("0c7c")),p=Object(l["a"])(c,a,s,!1,null,null,null);t["default"]=p.exports},"4c42":function(e,t,r){"use strict";var a=r("a6a9"),s=r.n(a);s.a},a6a9:function(e,t,r){}}]);
//# sourceMappingURL=chunk-d40c80fc.f1f56145.js.map